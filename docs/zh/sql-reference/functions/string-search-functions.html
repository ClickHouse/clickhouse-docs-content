<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-zh/sql-reference/functions/string-search-functions">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">字符串搜索函数 | ClickHouse Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://clickhouse.com/docs/img/logo.png"><meta data-rh="true" name="twitter:image" content="https://clickhouse.com/docs/img/logo.png"><meta data-rh="true" property="og:url" content="https://clickhouse.com/docs/zh/sql-reference/functions/string-search-functions"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="字符串搜索函数 | ClickHouse Docs"><meta data-rh="true" name="description" content="zi-fu-chuan-sou-suo-han-shu}"><meta data-rh="true" property="og:description" content="zi-fu-chuan-sou-suo-han-shu}"><link data-rh="true" rel="icon" href="/docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://clickhouse.com/docs/zh/sql-reference/functions/string-search-functions"><link data-rh="true" rel="alternate" href="https://clickhouse.com/docs/zh/sql-reference/functions/string-search-functions" hreflang="en"><link data-rh="true" rel="alternate" href="https://clickhouse.com/docs/zh/sql-reference/functions/string-search-functions" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://62VCH2MD74-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/docs/knowledgebase/rss.xml" title="ClickHouse Knowledge Base Feed RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs/knowledgebase/atom.xml" title="ClickHouse Knowledge Base Feed Atom Feed">
<link rel="alternate" type="application/json" href="/docs/knowledgebase/feed.json" title="ClickHouse Knowledge Base Feed JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KF1LLRTQ5Q"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-KF1LLRTQ5Q",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="ClickHouse Docs" href="/docs/opensearch.xml">





<script src="/docs/js/analytics.js"></script><link rel="stylesheet" href="/docs/assets/css/styles.d4633d58.css">
<link rel="preload" href="/docs/assets/js/runtime~main.230d878c.js" as="script">
<link rel="preload" href="/docs/assets/js/main.237f6d4b.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navBar_gvJn"><div class="navbarHeaderContainer_rccn navbar-header"><div class="navbar__inner navbarInner_W6bg"><div class="navbar__items"><a href="https://clickhouse.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/docs/img/logo_without_text.svg" alt="ClickHouse" class="themedImage_ToTc themedImage--light_HNdA"><img src="/docs/img/logo_without_text.svg" alt="ClickHouse" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">ClickHouse</b></a><div class="navbarItemsList_uIZ2 navbar-items-list"><div class="navbar__item dropdown"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link ch-menu">Product</a><ul class="dropdown__menu"><li><a href="https://clickhouse.com/cloud" target="_blank" rel="noopener noreferrer" class="dropdown__link">ClickHouse Cloud</a></li><li><a href="https://clickhouse.com/clickhouse" target="_blank" rel="noopener noreferrer" class="dropdown__link">ClickHouse Open Source</a></li></ul></div><a href="https://clickhouse.com/customer-stories" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link ch-menu">Use Cases</a><div class="navbar__item dropdown"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link ch-menu">Company</a><ul class="dropdown__menu"><li><a href="https://clickhouse.com/blog" target="_blank" rel="noopener noreferrer" class="dropdown__link">Blog</a></li><li><a href="https://clickhouse.com/company/our-story" target="_blank" rel="noopener noreferrer" class="dropdown__link">Our story</a></li><li><a href="https://clickhouse.com/company/careers" target="_blank" rel="noopener noreferrer" class="dropdown__link">Careers</a></li><li><a href="https://clickhouse.com/company/contact" target="_blank" rel="noopener noreferrer" class="dropdown__link">Contact us</a></li><li><a href="https://clickhouse.com/company/news-events" target="_blank" rel="noopener noreferrer" class="dropdown__link">News and events</a></li></ul></div><div class="navbar__item dropdown"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link ch-menu">Learn</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/en/intro">Docs</a></li><li><a href="https://clickhouse.com/learn" target="_blank" rel="noopener noreferrer" class="dropdown__link">ClickHouse Academy</a></li></ul></div><a href="https://clickhouse.com/pricing" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link ch-menu">Pricing</a></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item">
                <div class="nav-items-btns">
                  <a href="https://clickhouse.cloud/signIn" class="sign-in navbar__item navbar__link ch-menu">
                    Sign in
                  </a>
                  <a href="https://clickhouse.cloud/signUp" class="click-button-anchor">
                    <button class="click-button primary-btn">Free Trial</button>
                  </a>
                </div></div><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button></div></div><div class="secondary-nav--items secondaryMenu_iuff"><div class="scrollableElement_Qqzp secondaryMenuLeft_tFZR secondary-nav--items-left"><a class="navbar__item navbar__link ch-menu" href="/docs/en/intro">Docs</a><a class="navbar__item navbar__link ch-menu" href="/docs/en/cloud/overview">Cloud</a><a class="navbar__item navbar__link ch-menu" href="/docs/en/sql-reference">SQL Reference</a><a class="navbar__item navbar__link ch-menu" href="/docs/knowledgebase">Knowledge Base</a></div><div class="secondaryMenuRight__9m4 secondary-nav--items-right"><div class="navbar__item dropdown dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg width="14" height="13" viewBox="0 0 14 13" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6.95 12.6496L9.75 5.26628H11.0333L13.8333 12.6496H12.55L11.9 10.7663H8.91667L8.25 12.6496H6.95ZM9.28333 9.69961H11.5L10.4167 6.64961H10.3667L9.28333 9.69961ZM2.08333 10.7996L1.21667 9.93294L4.33333 6.83294C3.94444 6.39961 3.60556 5.95228 3.31667 5.49094C3.02778 5.03005 2.77222 4.54405 2.55 4.03294H3.83333C4.02222 4.41072 4.22222 4.74672 4.43333 5.04094C4.64444 5.33561 4.89444 5.64405 5.18333 5.96628C5.63889 5.47739 6.01667 4.97472 6.31667 4.45828C6.61667 3.94139 6.86667 3.3885 7.06667 2.79961H0.25V1.58294H4.55V0.349609H5.78333V1.58294H10.0833V2.79961H8.3C8.07778 3.53294 7.78333 4.24116 7.41667 4.92428C7.05 5.60783 6.59444 6.25516 6.05 6.86628L7.53333 8.36628L7.06667 9.63294L5.16667 7.73294L2.08333 10.7996Z" fill="currentColor"/>
</svg></a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/en/intro">English</a></li><li><a class="dropdown__link" href="/docs/ru">Russian</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/zh">Chinese</a></li></ul></div><button class="colorModeButton_hk25 navbar-color-toggle"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.7227 0.724664C8.7227 0.330045 8.39191 0 8.0036 0C7.60809 0 7.2773 0.330045 7.2773 0.724664V2.18834C7.2773 2.57578 7.60809 2.90583 8.0036 2.90583C8.39191 2.90583 8.7227 2.57578 8.7227 2.18834V0.724664ZM11.5991 3.4009C11.3258 3.67354 11.3258 4.13274 11.6063 4.41256C11.8796 4.6852 12.347 4.69238 12.6274 4.40538L13.6629 3.3722C13.9434 3.09238 13.9362 2.62601 13.6629 2.34619C13.3897 2.07354 12.9222 2.08072 12.649 2.35336L11.5991 3.4009ZM3.37258 4.40538C3.64584 4.6852 4.11326 4.6852 4.38652 4.41256C4.66697 4.14709 4.66697 3.66637 4.4009 3.4009L3.3582 2.35336C3.09213 2.08789 2.61753 2.07354 2.34427 2.34619C2.07101 2.62601 2.06382 3.09238 2.33708 3.36502L3.37258 4.40538ZM7.9964 11.774C10.0602 11.774 11.7717 10.0664 11.7717 8C11.7717 5.93363 10.0602 4.22601 7.9964 4.22601C5.93258 4.22601 4.22112 5.93363 4.22112 8C4.22112 10.0664 5.93258 11.774 7.9964 11.774ZM7.9964 10.4395C6.65888 10.4395 5.55146 9.33453 5.55146 8C5.55146 6.66547 6.65888 5.56054 7.9964 5.56054C9.33393 5.56054 10.4413 6.66547 10.4413 8C10.4413 9.33453 9.33393 10.4395 7.9964 10.4395ZM15.2809 8.71749C15.6692 8.71749 16 8.38744 16 8C16 7.60538 15.6692 7.28251 15.2809 7.28251H13.8211C13.4328 7.28251 13.102 7.60538 13.102 8C13.102 8.38744 13.4328 8.71749 13.8211 8.71749H15.2809ZM0.719101 7.28251C0.330787 7.28251 0 7.60538 0 8C0 8.38744 0.330787 8.71749 0.719101 8.71749H2.17888C2.57438 8.71749 2.90517 8.38744 2.90517 8C2.90517 7.60538 2.57438 7.28251 2.17888 7.28251H0.719101ZM12.6202 11.5946C12.347 11.322 11.8796 11.322 11.5991 11.5946C11.3258 11.8744 11.3258 12.3336 11.6063 12.6135L12.649 13.6538C12.9294 13.9265 13.3897 13.9193 13.6701 13.6395C13.9434 13.3668 13.9434 12.9076 13.6629 12.6278L12.6202 11.5946ZM2.33708 12.6206C2.05663 12.9004 2.05663 13.3668 2.3227 13.6395C2.60315 13.9121 3.07056 13.9193 3.34382 13.6466L4.38652 12.6135C4.66697 12.3336 4.66697 11.8744 4.4009 11.6018C4.12045 11.322 3.65303 11.322 3.37258 11.5946L2.33708 12.6206ZM8.7227 13.8117C8.7227 13.4242 8.39191 13.0942 8.0036 13.0942C7.60809 13.0942 7.2773 13.4242 7.2773 13.8117V15.2753C7.2773 15.6628 7.60809 16 8.0036 16C8.39191 16 8.7227 15.6628 8.7227 15.2753V13.8117Z" fill="currentColor"></path></svg><span>light Mode</span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_W2AM"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage_qMb8"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_mhZE"><div class="sidebarSearchContainer_Lwc8"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_Y1UP"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/zh">什么是ClickHouse？</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/简介">简介</a><button aria-label="Toggle the collapsible sidebar category &#x27;简介&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/zh/getting-started">快速上手</a><button aria-label="Toggle the collapsible sidebar category &#x27;快速上手&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/zh/interfaces">接口</a><button aria-label="Toggle the collapsible sidebar category &#x27;接口&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/引擎">引擎</a><button aria-label="Toggle the collapsible sidebar category &#x27;引擎&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/zh/sql-reference">SQL参考</a><button aria-label="Toggle the collapsible sidebar category &#x27;SQL参考&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/zh/sql-reference/statements">SQL 语句</a><button aria-label="Toggle the collapsible sidebar category &#x27;SQL 语句&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/syntax">SQL语法</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/distributed-ddl">Distributed DDL</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/zh/sql-reference/functions">函数</a><button aria-label="Toggle the collapsible sidebar category &#x27;函数&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/arithmetic-functions">算术函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/comparison-functions">比较函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/logical-functions">逻辑函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/type-conversion-functions">类型转换函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/files">Files</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/tuple-map-functions">Working with maps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/in-functions">IN 运算符</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/introspection">自省</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/tuple-functions">Tuples</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/encryption-functions">Encryption</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/nlp-functions">NLP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/time-window-functions">时间窗口</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/array-functions">数组函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/array-join">arrayJoin函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/bit-functions">位操作函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/bitmap-functions">位图函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/conditional-functions">条件函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/date-time-functions">时间日期函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/encoding-functions">编码函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/ext-dict-functions">字典函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/functions-for-nulls">Nullable处理函数</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/zh/sql-reference/functions/geo/coordinates">geo</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/geo">GEO函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/hash-functions">Hash函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/higher-order-functions">高阶函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/ip-address-functions">IP函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/json-functions">JSON函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/machine-learning-functions">机器学习函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/math-functions">数学函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/other-functions">其他函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/random-functions">随机函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/rounding-functions">取整函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/splitting-merging-functions">字符串拆分合并函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/string-functions">字符串函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/string-replace-functions">字符串替换函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/zh/sql-reference/functions/string-search-functions">字符串搜索函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/url-functions">URL函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/uuid-functions">UUID函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/functions/ym-dict-functions">使用 Yandex.Metrica 字典函数</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/zh/sql-reference/aggregate-functions">聚合函数</a><button aria-label="Toggle the collapsible sidebar category &#x27;聚合函数&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/zh/sql-reference/table-functions">表函数</a><button aria-label="Toggle the collapsible sidebar category &#x27;表函数&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/zh/sql-reference/dictionaries">字典</a><button aria-label="Toggle the collapsible sidebar category &#x27;字典&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/zh/sql-reference/data-types">数据类型</a><button aria-label="Toggle the collapsible sidebar category &#x27;数据类型&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/ansi">ANSI兼容性</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/sql-reference/window-functions">Window Functions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/zh/sql-reference/operators">操作符</a><button aria-label="Toggle the collapsible sidebar category &#x27;操作符&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/zh/guides">ClickHouse指南</a><button aria-label="Toggle the collapsible sidebar category &#x27;ClickHouse指南&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/zh/operations">操作</a><button aria-label="Toggle the collapsible sidebar category &#x27;操作&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/zh/commercial">商业支持</a><button aria-label="Toggle the collapsible sidebar category &#x27;商业支持&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/zh/faq">F.A.Q.</a><button aria-label="Toggle the collapsible sidebar category &#x27;F.A.Q.&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/zh/whats-new">ClickHouse事迹</a><button aria-label="Toggle the collapsible sidebar category &#x27;ClickHouse事迹&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/zh/changelog">变更日志</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/zh/development">ClickHouse 开发</a><button aria-label="Toggle the collapsible sidebar category &#x27;ClickHouse 开发&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_RiV8"><div class="container padding-top--md padding-bottom--lg main-content-wrapper"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><div class="theme-doc-markdown markdown"><h1>字符串搜索函数</h1><p>下列所有函数在默认的情况下区分大小写。对于不区分大小写的搜索，存在单独的变体。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="positionhaystack-needle-locatehaystack-needle">位置（大海捞针），定位（大海捞针)<a href="#positionhaystack-needle-locatehaystack-needle" class="hash-link" aria-label="Direct link to 位置（大海捞针），定位（大海捞针)" title="Direct link to 位置（大海捞针），定位（大海捞针)">​</a></h2><p>在字符串<code>haystack</code>中搜索子串<code>needle</code>。
返回子串的位置（以字节为单位），从1开始，如果未找到子串，则返回0。</p><p>对于不区分大小写的搜索，请使用函数<code>positionCaseInsensitive</code>。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="positionutf8haystack-needle">positionUTF8(大海捞针)<a href="#positionutf8haystack-needle" class="hash-link" aria-label="Direct link to positionUTF8(大海捞针)" title="Direct link to positionUTF8(大海捞针)">​</a></h2><p>与<code>position</code>相同，但位置以Unicode字符返回。此函数工作在UTF-8编码的文本字符集中。如非此编码的字符集，则返回一些非预期结果（他不会抛出异常）。</p><p>对于不区分大小写的搜索，请使用函数<code>positionCaseInsensitiveUTF8</code>。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="multisearchallpositionshaystack-needle1-needle2-needlen">多搜索分配（干草堆，<!-- -->[<!-- -->针<sub>1</sub>，针<sub>2</sub>, …, needle<sub>n</sub>]<!-- -->)<a href="#multisearchallpositionshaystack-needle1-needle2-needlen" class="hash-link" aria-label="Direct link to multisearchallpositionshaystack-needle1-needle2-needlen" title="Direct link to multisearchallpositionshaystack-needle1-needle2-needlen">​</a></h2><p>与<code>position</code>相同，但函数返回一个数组，其中包含所有匹配needle<sub>我</sub>的位置。</p><p>对于不区分大小写的搜索或/和UTF-8格式，使用函数<code>multiSearchAllPositionsCaseInsensitive，multiSearchAllPositionsUTF8，multiSearchAllPositionsCaseInsensitiveUTF8</code>。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="multisearchfirstpositionhaystack-needle1-needle2-needlen">multiSearchFirstPosition(大海捞针,<!-- -->[<!-- -->针<sub>1</sub>，针<sub>2</sub>, …, needle<sub>n</sub>]<!-- -->)<a href="#multisearchfirstpositionhaystack-needle1-needle2-needlen" class="hash-link" aria-label="Direct link to multisearchfirstpositionhaystack-needle1-needle2-needlen" title="Direct link to multisearchfirstpositionhaystack-needle1-needle2-needlen">​</a></h2><p>与<code>position</code>相同，但返回在<code>haystack</code>中与needles字符串匹配的最左偏移。</p><p>对于不区分大小写的搜索或/和UTF-8格式，使用函数<code>multiSearchFirstPositionCaseInsensitive，multiSearchFirstPositionUTF8，multiSearchFirstPositionCaseInsensitiveUTF8</code>。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="multisearchfirstindexhaystack-needle1-needle2-needlen">multiSearchFirstIndex(大海捞针,<!-- -->[<!-- -->针<sub>1</sub>，针<sub>2</sub>, …, needle<sub>n</sub>]<!-- -->)<a href="#multisearchfirstindexhaystack-needle1-needle2-needlen" class="hash-link" aria-label="Direct link to multisearchfirstindexhaystack-needle1-needle2-needlen" title="Direct link to multisearchfirstindexhaystack-needle1-needle2-needlen">​</a></h2><p>返回在字符串<code>haystack</code>中最先查找到的needle<sub>我</sub>的索引<code>i</code>（从1开始），没有找到任何匹配项则返回0。</p><p>对于不区分大小写的搜索或/和UTF-8格式，使用函数<code>multiSearchFirstIndexCaseInsensitive，multiSearchFirstIndexUTF8，multiSearchFirstIndexCaseInsensitiveUTF8</code>。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="multisearchanyhaystack-needle1-needle2-needlen">多搜索（大海捞针，<!-- -->[<!-- -->针<sub>1</sub>，针<sub>2</sub>, …, needle<sub>n</sub>]<!-- -->)<a href="#multisearchanyhaystack-needle1-needle2-needlen" class="hash-link" aria-label="Direct link to multisearchanyhaystack-needle1-needle2-needlen" title="Direct link to multisearchanyhaystack-needle1-needle2-needlen">​</a></h2><p>如果<code>haystack</code>中至少存在一个needle<sub>我</sub>匹配则返回1，否则返回0。</p><p>对于不区分大小写的搜索或/和UTF-8格式，使用函数<code>multiSearchAnyCaseInsensitive，multiSearchAnyUTF8，multiSearchAnyCaseInsensitiveUTF8</code>。</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="alert-icon admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div><div class="alert-content admonitionContent_vXIg"><div class="admonitionHeading_TMsN">note</div><p>在所有<code>multiSearch*</code>函数中，由于实现规范，needles的数量应小于2<sup>8</sup>。</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="matchhaystack-pattern">匹配（大海捞针，模式)<a href="#matchhaystack-pattern" class="hash-link" aria-label="Direct link to 匹配（大海捞针，模式)" title="Direct link to 匹配（大海捞针，模式)">​</a></h2><p>检查字符串是否与<code>pattern</code>正则表达式匹配。<code>pattern</code>可以是一个任意的<code>re2</code>正则表达式。 <code>re2</code>正则表达式的<a href="https://github.com/google/re2/wiki/Syntax" target="_blank" rel="noopener noreferrer">语法</a>比Perl正则表达式的语法存在更多限制。</p><p>如果不匹配返回0，否则返回1。</p><p>请注意，反斜杠符号（<code>\</code>）用于在正则表达式中转义。由于字符串中采用相同的符号来进行转义。因此，为了在正则表达式中转义符号，必须在字符串文字中写入两个反斜杠（<!-- -->\<!-- -->）。</p><p>正则表达式与字符串一起使用，就像它是一组字节一样。正则表达式中不能包含空字节。
对于在字符串中搜索子字符串的模式，最好使用LIKE或«position»，因为它们更加高效。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="multimatchanyhaystack-pattern1-pattern2-patternn">multiMatchAny（大海捞针，<!-- -->[<!-- -->模式<sub>1</sub>，模式<sub>2</sub>, …, pattern<sub>n</sub>]<!-- -->)<a href="#multimatchanyhaystack-pattern1-pattern2-patternn" class="hash-link" aria-label="Direct link to multimatchanyhaystack-pattern1-pattern2-patternn" title="Direct link to multimatchanyhaystack-pattern1-pattern2-patternn">​</a></h2><p>与<code>match</code>相同，但如果所有正则表达式都不匹配，则返回0；如果任何模式匹配，则返回1。它使用<a href="https://github.com/intel/hyperscan" target="_blank" rel="noopener noreferrer">超扫描</a>库。对于在字符串中搜索子字符串的模式，最好使用«multisearchany»，因为它更高效。</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="alert-icon admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div><div class="alert-content admonitionContent_vXIg"><div class="admonitionHeading_TMsN">note</div><p>任何<code>haystack</code>字符串的长度必须小于2<sup>32\</sup>字节，否则抛出异常。这种限制是因为hyperscan API而产生的。</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="multimatchanyindexhaystack-pattern1-pattern2-patternn">multiMatchAnyIndex（大海捞针，<!-- -->[<!-- -->模式<sub>1</sub>，模式<sub>2</sub>, …, pattern<sub>n</sub>]<!-- -->)<a href="#multimatchanyindexhaystack-pattern1-pattern2-patternn" class="hash-link" aria-label="Direct link to multimatchanyindexhaystack-pattern1-pattern2-patternn" title="Direct link to multimatchanyindexhaystack-pattern1-pattern2-patternn">​</a></h2><p>与<code>multiMatchAny</code>相同，但返回与haystack匹配的任何内容的索引位置。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="multifuzzymatchanyhaystack-distance-pattern1-pattern2-patternn">multiFuzzyMatchAny(干草堆,距离,<!-- -->[<!-- -->模式<sub>1</sub>，模式<sub>2</sub>, …, pattern<sub>n</sub>]<!-- -->)<a href="#multifuzzymatchanyhaystack-distance-pattern1-pattern2-patternn" class="hash-link" aria-label="Direct link to multifuzzymatchanyhaystack-distance-pattern1-pattern2-patternn" title="Direct link to multifuzzymatchanyhaystack-distance-pattern1-pattern2-patternn">​</a></h2><p>与<code>multiMatchAny</code>相同，但如果在haystack能够查找到任何模式匹配能够在指定的<a href="https://en.wikipedia.org/wiki/Edit_distance" target="_blank" rel="noopener noreferrer">编辑距离</a>内进行匹配，则返回1。此功能也处于实验模式，可能非常慢。有关更多信息，请参阅<a href="https://intel.github.io/hyperscan/dev-reference/compilation.html#approximate-matching" target="_blank" rel="noopener noreferrer">hyperscan文档</a>。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="multifuzzymatchanyindexhaystack-distance-pattern1-pattern2-patternn">multiFuzzyMatchAnyIndex(大海捞针,距离,<!-- -->[<!-- -->模式<sub>1</sub>，模式<sub>2</sub>, …, pattern<sub>n</sub>]<!-- -->)<a href="#multifuzzymatchanyindexhaystack-distance-pattern1-pattern2-patternn" class="hash-link" aria-label="Direct link to multifuzzymatchanyindexhaystack-distance-pattern1-pattern2-patternn" title="Direct link to multifuzzymatchanyindexhaystack-distance-pattern1-pattern2-patternn">​</a></h2><p>与<code>multiFuzzyMatchAny</code>相同，但返回匹配项的匹配能容的索引位置。</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="alert-icon admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div><div class="alert-content admonitionContent_vXIg"><div class="admonitionHeading_TMsN">note</div><p><code>multiFuzzyMatch*</code>函数不支持UTF-8正则表达式，由于hyperscan限制，这些表达式被按字节解析。</p></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="alert-icon admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div><div class="alert-content admonitionContent_vXIg"><div class="admonitionHeading_TMsN">note</div><p>如要关闭所有hyperscan函数的使用，请设置<code>SET allow_hyperscan = 0;</code>。</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="extracthaystack-pattern">提取（大海捞针，图案)<a href="#extracthaystack-pattern" class="hash-link" aria-label="Direct link to 提取（大海捞针，图案)" title="Direct link to 提取（大海捞针，图案)">​</a></h2><p>使用正则表达式截取字符串。如果’haystack’与’pattern’不匹配，则返回空字符串。如果正则表达式中不包含子模式，它将获取与整个正则表达式匹配的子串。否则，它将获取与第一个子模式匹配的子串。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="extractallhaystack-pattern">extractAll（大海捞针，图案)<a href="#extractallhaystack-pattern" class="hash-link" aria-label="Direct link to extractAll（大海捞针，图案)" title="Direct link to extractAll（大海捞针，图案)">​</a></h2><p>使用正则表达式提取字符串的所有片段。如果’haystack’与’pattern’正则表达式不匹配，则返回一个空字符串。否则返回所有与正则表达式匹配的字符串数组。通常，行为与’extract’函数相同（它采用第一个子模式，如果没有子模式，则采用整个表达式）。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="likehaystack-pattern-haystack-like-pattern-operator">像（干草堆，模式），干草堆像模式运算符<a href="#likehaystack-pattern-haystack-like-pattern-operator" class="hash-link" aria-label="Direct link to 像（干草堆，模式），干草堆像模式运算符" title="Direct link to 像（干草堆，模式），干草堆像模式运算符">​</a></h2><p>检查字符串是否与简单正则表达式匹配。
正则表达式可以包含的元符号有<code>％</code>和<code>_</code>。</p><p><code>%</code> 表示任何字节数（包括零字符）。</p><p><code>_</code> 表示任何一个字节。</p><p>可以使用反斜杠（<code>\</code>）来对元符号进行转义。请参阅«match»函数说明中有关转义的说明。</p><p>对于像<code>％needle％</code>这样的正则表达式，改函数与<code>position</code>函数一样快。
对于其他正则表达式，函数与’match’函数相同。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="notlikehaystack-pattern-haystack-not-like-pattern-operator">不喜欢（干草堆，模式），干草堆不喜欢模式运算符<a href="#notlikehaystack-pattern-haystack-not-like-pattern-operator" class="hash-link" aria-label="Direct link to 不喜欢（干草堆，模式），干草堆不喜欢模式运算符" title="Direct link to 不喜欢（干草堆，模式），干草堆不喜欢模式运算符">​</a></h2><p>与’like’函数返回相反的结果。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ngramdistancehaystack-needle">大海捞针)<a href="#ngramdistancehaystack-needle" class="hash-link" aria-label="Direct link to 大海捞针)" title="Direct link to 大海捞针)">​</a></h2><p>基于4-gram计算<code>haystack</code>和<code>needle</code>之间的距离：计算两个4-gram集合之间的对称差异，并用它们的基数和对其进行归一化。返回0到1之间的任何浮点数 – 越接近0则表示越多的字符串彼此相似。如果常量的<code>needle</code>或<code>haystack</code>超过32KB，函数将抛出异常。如果非常量的<code>haystack</code>或<code>needle</code>字符串超过32Kb，则距离始终为1。</p><p>对于不区分大小写的搜索或/和UTF-8格式，使用函数<code>ngramDistanceCaseInsensitive，ngramDistanceUTF8，ngramDistanceCaseInsensitiveUTF8</code>。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ngramsearchhaystack-needle">ﾂ暗ｪﾂ氾环催ﾂ団ﾂ法ﾂ人)<a href="#ngramsearchhaystack-needle" class="hash-link" aria-label="Direct link to ﾂ暗ｪﾂ氾环催ﾂ団ﾂ法ﾂ人)" title="Direct link to ﾂ暗ｪﾂ氾环催ﾂ団ﾂ法ﾂ人)">​</a></h2><p>与<code>ngramDistance</code>相同，但计算<code>needle</code>和<code>haystack</code>之间的非对称差异——<code>needle</code>的n-gram减去<code>needle</code>归一化n-gram。可用于模糊字符串搜索。</p><p>对于不区分大小写的搜索或/和UTF-8格式，使用函数<code>ngramSearchCaseInsensitive，ngramSearchUTF8，ngramSearchCaseInsensitiveUTF8</code>。</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="alert-icon admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div><div class="alert-content admonitionContent_vXIg"><div class="admonitionHeading_TMsN">note</div><p>对于UTF-8，我们使用3-gram。所有这些都不是完全公平的n-gram距离。我们使用2字节哈希来散列n-gram，然后计算这些哈希表之间的（非）对称差异 - 可能会发生冲突。对于UTF-8不区分大小写的格式，我们不使用公平的<code>tolower</code>函数 - 我们将每个Unicode字符字节的第5位（从零开始）和字节的第一位归零 - 这适用于拉丁语，主要用于所有西里尔字母。</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ClickHouse/ClickHouse/tree/master/docs/zh/sql-reference/functions/string-search-functions.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev paginationNavLink_UdUv" href="/docs/zh/sql-reference/functions/string-replace-functions"><svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.2751 19.175L10.3251 18.125L5.4501 13.25H21.6001V11.75H5.4501L10.3251 6.87501L9.2751 5.82501L2.5751 12.5L9.2751 19.175Z" fill="currentColor"></path></svg><div class="paginationNavContent__3xr"><div class="pagination-nav__sublabel">Previous</div><div class="paginationNavLabel_YPzM pagination-nav__label">字符串替换函数</div></div></a><a class="pagination-nav__link pagination-nav__link--next paginationNavLink_UdUv" href="/docs/zh/sql-reference/functions/url-functions"><div class="paginationNavContent__3xr"><div class="pagination-nav__sublabel">Next</div><div class="paginationNavLabel_YPzM pagination-nav__label">URL函数</div></div><svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.7249 19.175L13.6749 18.125L18.5499 13.25H2.3999V11.75H18.5499L13.6749 6.87501L14.7249 5.82501L21.4249 12.5L14.7249 19.175Z" fill="currentColor"></path></svg></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#positionhaystack-needle-locatehaystack-needle" class="table-of-contents__link toc-highlight">位置（大海捞针），定位（大海捞针)</a></li><li><a href="#positionutf8haystack-needle" class="table-of-contents__link toc-highlight">positionUTF8(大海捞针)</a></li><li><a href="#multisearchallpositionshaystack-needle1-needle2-needlen" class="table-of-contents__link toc-highlight">多搜索分配（干草堆，[针<sub>1</sub>，针<sub>2</sub>, …, needle<sub>n</sub>])</a></li><li><a href="#multisearchfirstpositionhaystack-needle1-needle2-needlen" class="table-of-contents__link toc-highlight">multiSearchFirstPosition(大海捞针,[针<sub>1</sub>，针<sub>2</sub>, …, needle<sub>n</sub>])</a></li><li><a href="#multisearchfirstindexhaystack-needle1-needle2-needlen" class="table-of-contents__link toc-highlight">multiSearchFirstIndex(大海捞针,[针<sub>1</sub>，针<sub>2</sub>, …, needle<sub>n</sub>])</a></li><li><a href="#multisearchanyhaystack-needle1-needle2-needlen" class="table-of-contents__link toc-highlight">多搜索（大海捞针，[针<sub>1</sub>，针<sub>2</sub>, …, needle<sub>n</sub>])</a></li><li><a href="#matchhaystack-pattern" class="table-of-contents__link toc-highlight">匹配（大海捞针，模式)</a></li><li><a href="#multimatchanyhaystack-pattern1-pattern2-patternn" class="table-of-contents__link toc-highlight">multiMatchAny（大海捞针，[模式<sub>1</sub>，模式<sub>2</sub>, …, pattern<sub>n</sub>])</a></li><li><a href="#multimatchanyindexhaystack-pattern1-pattern2-patternn" class="table-of-contents__link toc-highlight">multiMatchAnyIndex（大海捞针，[模式<sub>1</sub>，模式<sub>2</sub>, …, pattern<sub>n</sub>])</a></li><li><a href="#multifuzzymatchanyhaystack-distance-pattern1-pattern2-patternn" class="table-of-contents__link toc-highlight">multiFuzzyMatchAny(干草堆,距离,[模式<sub>1</sub>，模式<sub>2</sub>, …, pattern<sub>n</sub>])</a></li><li><a href="#multifuzzymatchanyindexhaystack-distance-pattern1-pattern2-patternn" class="table-of-contents__link toc-highlight">multiFuzzyMatchAnyIndex(大海捞针,距离,[模式<sub>1</sub>，模式<sub>2</sub>, …, pattern<sub>n</sub>])</a></li><li><a href="#extracthaystack-pattern" class="table-of-contents__link toc-highlight">提取（大海捞针，图案)</a></li><li><a href="#extractallhaystack-pattern" class="table-of-contents__link toc-highlight">extractAll（大海捞针，图案)</a></li><li><a href="#likehaystack-pattern-haystack-like-pattern-operator" class="table-of-contents__link toc-highlight">像（干草堆，模式），干草堆像模式运算符</a></li><li><a href="#notlikehaystack-pattern-haystack-not-like-pattern-operator" class="table-of-contents__link toc-highlight">不喜欢（干草堆，模式），干草堆不喜欢模式运算符</a></li><li><a href="#ngramdistancehaystack-needle" class="table-of-contents__link toc-highlight">大海捞针)</a></li><li><a href="#ngramsearchhaystack-needle" class="table-of-contents__link toc-highlight">ﾂ暗ｪﾂ氾环催ﾂ団ﾂ法ﾂ人)</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer_jryj"><div class="container_y1z5 container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">© 2016&ndash;2023 ClickHouse, Inc.</div></div><div><div class="footer__links text--center"><div class="footer__links"><a href="https://clickhouse.com/legal/trademark-policy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Trademark</a><span class="footer__link-separator">·</span><a href="https://clickhouse.com/legal/privacy-policy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy</a><span class="footer__link-separator">·</span><a href="https://trust.clickhouse.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Security</a><span class="footer__link-separator">·</span><a href="https://clickhouse.com/legal/agreements/terms-of-service" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Service</a></div></div></div></div><button class="colorModeButton_hk25"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.7227 0.724664C8.7227 0.330045 8.39191 0 8.0036 0C7.60809 0 7.2773 0.330045 7.2773 0.724664V2.18834C7.2773 2.57578 7.60809 2.90583 8.0036 2.90583C8.39191 2.90583 8.7227 2.57578 8.7227 2.18834V0.724664ZM11.5991 3.4009C11.3258 3.67354 11.3258 4.13274 11.6063 4.41256C11.8796 4.6852 12.347 4.69238 12.6274 4.40538L13.6629 3.3722C13.9434 3.09238 13.9362 2.62601 13.6629 2.34619C13.3897 2.07354 12.9222 2.08072 12.649 2.35336L11.5991 3.4009ZM3.37258 4.40538C3.64584 4.6852 4.11326 4.6852 4.38652 4.41256C4.66697 4.14709 4.66697 3.66637 4.4009 3.4009L3.3582 2.35336C3.09213 2.08789 2.61753 2.07354 2.34427 2.34619C2.07101 2.62601 2.06382 3.09238 2.33708 3.36502L3.37258 4.40538ZM7.9964 11.774C10.0602 11.774 11.7717 10.0664 11.7717 8C11.7717 5.93363 10.0602 4.22601 7.9964 4.22601C5.93258 4.22601 4.22112 5.93363 4.22112 8C4.22112 10.0664 5.93258 11.774 7.9964 11.774ZM7.9964 10.4395C6.65888 10.4395 5.55146 9.33453 5.55146 8C5.55146 6.66547 6.65888 5.56054 7.9964 5.56054C9.33393 5.56054 10.4413 6.66547 10.4413 8C10.4413 9.33453 9.33393 10.4395 7.9964 10.4395ZM15.2809 8.71749C15.6692 8.71749 16 8.38744 16 8C16 7.60538 15.6692 7.28251 15.2809 7.28251H13.8211C13.4328 7.28251 13.102 7.60538 13.102 8C13.102 8.38744 13.4328 8.71749 13.8211 8.71749H15.2809ZM0.719101 7.28251C0.330787 7.28251 0 7.60538 0 8C0 8.38744 0.330787 8.71749 0.719101 8.71749H2.17888C2.57438 8.71749 2.90517 8.38744 2.90517 8C2.90517 7.60538 2.57438 7.28251 2.17888 7.28251H0.719101ZM12.6202 11.5946C12.347 11.322 11.8796 11.322 11.5991 11.5946C11.3258 11.8744 11.3258 12.3336 11.6063 12.6135L12.649 13.6538C12.9294 13.9265 13.3897 13.9193 13.6701 13.6395C13.9434 13.3668 13.9434 12.9076 13.6629 12.6278L12.6202 11.5946ZM2.33708 12.6206C2.05663 12.9004 2.05663 13.3668 2.3227 13.6395C2.60315 13.9121 3.07056 13.9193 3.34382 13.6466L4.38652 12.6135C4.66697 12.3336 4.66697 11.8744 4.4009 11.6018C4.12045 11.322 3.65303 11.322 3.37258 11.5946L2.33708 12.6206ZM8.7227 13.8117C8.7227 13.4242 8.39191 13.0942 8.0036 13.0942C7.60809 13.0942 7.2773 13.4242 7.2773 13.8117V15.2753C7.2773 15.6628 7.60809 16 8.0036 16C8.39191 16 8.7227 15.6628 8.7227 15.2753V13.8117Z" fill="currentColor"></path></svg><span>light Mode</span></button></footer></div>
<script src="/docs/assets/js/runtime~main.230d878c.js"></script>
<script src="/docs/assets/js/main.237f6d4b.js"></script>
</body>
</html>