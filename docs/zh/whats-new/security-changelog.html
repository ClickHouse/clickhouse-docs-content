<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-zh/whats-new/security-changelog">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">安全更新日志 | ClickHouse Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://clickhouse.com/docs/img/logo.png"><meta data-rh="true" name="twitter:image" content="https://clickhouse.com/docs/img/logo.png"><meta data-rh="true" property="og:url" content="https://clickhouse.com/docs/zh/whats-new/security-changelog"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="安全更新日志 | ClickHouse Docs"><meta data-rh="true" name="description" content="修复于ClickHouse 22.9.1.2603, 2022-09-22"><meta data-rh="true" property="og:description" content="修复于ClickHouse 22.9.1.2603, 2022-09-22"><link data-rh="true" rel="icon" href="/docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://clickhouse.com/docs/zh/whats-new/security-changelog"><link data-rh="true" rel="alternate" href="https://clickhouse.com/docs/zh/whats-new/security-changelog" hreflang="en"><link data-rh="true" rel="alternate" href="https://clickhouse.com/docs/zh/whats-new/security-changelog" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://62VCH2MD74-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/docs/knowledgebase/rss.xml" title="ClickHouse Knowledge Base Feed RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs/knowledgebase/atom.xml" title="ClickHouse Knowledge Base Feed Atom Feed">
<link rel="alternate" type="application/json" href="/docs/knowledgebase/feed.json" title="ClickHouse Knowledge Base Feed JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KF1LLRTQ5Q"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-KF1LLRTQ5Q",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="ClickHouse Docs" href="/docs/opensearch.xml">





<script src="/docs/js/analytics.js"></script><link rel="stylesheet" href="/docs/assets/css/styles.b6c65ed1.css">
<link rel="preload" href="/docs/assets/js/runtime~main.cb4944d2.js" as="script">
<link rel="preload" href="/docs/assets/js/main.21fa7d17.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navBar_gvJn"><div class="navbarHeaderContainer_rccn navbar-header"><div class="navbar__inner navbarInner_W6bg"><div class="navbar__items"><a href="https://clickhouse.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/docs/img/logo_without_text.svg" alt="ClickHouse" class="themedImage_ToTc themedImage--light_HNdA"><img src="/docs/img/logo_without_text.svg" alt="ClickHouse" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">ClickHouse</b></a><div class="navbarItemsList_uIZ2 navbar-items-list"><div class="navbar__item dropdown"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link ch-menu">Product</a><ul class="dropdown__menu"><li><a href="https://clickhouse.com/cloud" target="_blank" rel="noopener noreferrer" class="dropdown__link">ClickHouse Cloud</a></li><li><a href="https://clickhouse.com/clickhouse" target="_blank" rel="noopener noreferrer" class="dropdown__link">ClickHouse Open Source</a></li></ul></div><a href="https://clickhouse.com/customer-stories" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link ch-menu">Use Cases</a><div class="navbar__item dropdown"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link ch-menu">Company</a><ul class="dropdown__menu"><li><a href="https://clickhouse.com/blog" target="_blank" rel="noopener noreferrer" class="dropdown__link">Blog</a></li><li><a href="https://clickhouse.com/company/our-story" target="_blank" rel="noopener noreferrer" class="dropdown__link">Our story</a></li><li><a href="https://clickhouse.com/company/careers" target="_blank" rel="noopener noreferrer" class="dropdown__link">Careers</a></li><li><a href="https://clickhouse.com/company/contact" target="_blank" rel="noopener noreferrer" class="dropdown__link">Contact us</a></li><li><a href="https://clickhouse.com/company/news-events" target="_blank" rel="noopener noreferrer" class="dropdown__link">News and events</a></li></ul></div><div class="navbar__item dropdown"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link ch-menu">Learn</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/en/intro">Docs</a></li><li><a href="https://clickhouse.com/learn" target="_blank" rel="noopener noreferrer" class="dropdown__link">ClickHouse Academy</a></li></ul></div><a href="https://clickhouse.com/pricing" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link ch-menu">Pricing</a></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item">
                <div class="nav-items-btns">
                  <a href="https://clickhouse.cloud/signIn" class="sign-in navbar__item navbar__link ch-menu">
                    Sign in
                  </a>
                  <a href="https://clickhouse.cloud/signUp" class="click-button-anchor">
                    <button class="click-button primary-btn">Free Trial</button>
                  </a>
                </div></div><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button></div></div><div class="secondary-nav--items secondaryMenu_iuff"><div class="scrollableElement_Qqzp secondaryMenuLeft_tFZR secondary-nav--items-left"><a class="navbar__item navbar__link ch-menu" href="/docs/en/intro">Docs</a><a class="navbar__item navbar__link ch-menu" href="/docs/en/cloud/overview">Cloud</a><a class="navbar__item navbar__link ch-menu" href="/docs/en/sql-reference">SQL Reference</a><a class="navbar__item navbar__link ch-menu" href="/docs/knowledgebase">Knowledge Base</a></div><div class="secondaryMenuRight__9m4 secondary-nav--items-right"><div class="navbar__item dropdown dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg width="14" height="13" viewBox="0 0 14 13" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6.95 12.6496L9.75 5.26628H11.0333L13.8333 12.6496H12.55L11.9 10.7663H8.91667L8.25 12.6496H6.95ZM9.28333 9.69961H11.5L10.4167 6.64961H10.3667L9.28333 9.69961ZM2.08333 10.7996L1.21667 9.93294L4.33333 6.83294C3.94444 6.39961 3.60556 5.95228 3.31667 5.49094C3.02778 5.03005 2.77222 4.54405 2.55 4.03294H3.83333C4.02222 4.41072 4.22222 4.74672 4.43333 5.04094C4.64444 5.33561 4.89444 5.64405 5.18333 5.96628C5.63889 5.47739 6.01667 4.97472 6.31667 4.45828C6.61667 3.94139 6.86667 3.3885 7.06667 2.79961H0.25V1.58294H4.55V0.349609H5.78333V1.58294H10.0833V2.79961H8.3C8.07778 3.53294 7.78333 4.24116 7.41667 4.92428C7.05 5.60783 6.59444 6.25516 6.05 6.86628L7.53333 8.36628L7.06667 9.63294L5.16667 7.73294L2.08333 10.7996Z" fill="currentColor"/>
</svg></a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/en/intro">English</a></li><li><a class="dropdown__link" href="/docs/ru">Russian</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/zh">Chinese</a></li></ul></div><button class="colorModeButton_hk25 navbar-color-toggle"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.7227 0.724664C8.7227 0.330045 8.39191 0 8.0036 0C7.60809 0 7.2773 0.330045 7.2773 0.724664V2.18834C7.2773 2.57578 7.60809 2.90583 8.0036 2.90583C8.39191 2.90583 8.7227 2.57578 8.7227 2.18834V0.724664ZM11.5991 3.4009C11.3258 3.67354 11.3258 4.13274 11.6063 4.41256C11.8796 4.6852 12.347 4.69238 12.6274 4.40538L13.6629 3.3722C13.9434 3.09238 13.9362 2.62601 13.6629 2.34619C13.3897 2.07354 12.9222 2.08072 12.649 2.35336L11.5991 3.4009ZM3.37258 4.40538C3.64584 4.6852 4.11326 4.6852 4.38652 4.41256C4.66697 4.14709 4.66697 3.66637 4.4009 3.4009L3.3582 2.35336C3.09213 2.08789 2.61753 2.07354 2.34427 2.34619C2.07101 2.62601 2.06382 3.09238 2.33708 3.36502L3.37258 4.40538ZM7.9964 11.774C10.0602 11.774 11.7717 10.0664 11.7717 8C11.7717 5.93363 10.0602 4.22601 7.9964 4.22601C5.93258 4.22601 4.22112 5.93363 4.22112 8C4.22112 10.0664 5.93258 11.774 7.9964 11.774ZM7.9964 10.4395C6.65888 10.4395 5.55146 9.33453 5.55146 8C5.55146 6.66547 6.65888 5.56054 7.9964 5.56054C9.33393 5.56054 10.4413 6.66547 10.4413 8C10.4413 9.33453 9.33393 10.4395 7.9964 10.4395ZM15.2809 8.71749C15.6692 8.71749 16 8.38744 16 8C16 7.60538 15.6692 7.28251 15.2809 7.28251H13.8211C13.4328 7.28251 13.102 7.60538 13.102 8C13.102 8.38744 13.4328 8.71749 13.8211 8.71749H15.2809ZM0.719101 7.28251C0.330787 7.28251 0 7.60538 0 8C0 8.38744 0.330787 8.71749 0.719101 8.71749H2.17888C2.57438 8.71749 2.90517 8.38744 2.90517 8C2.90517 7.60538 2.57438 7.28251 2.17888 7.28251H0.719101ZM12.6202 11.5946C12.347 11.322 11.8796 11.322 11.5991 11.5946C11.3258 11.8744 11.3258 12.3336 11.6063 12.6135L12.649 13.6538C12.9294 13.9265 13.3897 13.9193 13.6701 13.6395C13.9434 13.3668 13.9434 12.9076 13.6629 12.6278L12.6202 11.5946ZM2.33708 12.6206C2.05663 12.9004 2.05663 13.3668 2.3227 13.6395C2.60315 13.9121 3.07056 13.9193 3.34382 13.6466L4.38652 12.6135C4.66697 12.3336 4.66697 11.8744 4.4009 11.6018C4.12045 11.322 3.65303 11.322 3.37258 11.5946L2.33708 12.6206ZM8.7227 13.8117C8.7227 13.4242 8.39191 13.0942 8.0036 13.0942C7.60809 13.0942 7.2773 13.4242 7.2773 13.8117V15.2753C7.2773 15.6628 7.60809 16 8.0036 16C8.39191 16 8.7227 15.6628 8.7227 15.2753V13.8117Z" fill="currentColor"></path></svg><span>light Mode</span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_W2AM"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage_qMb8"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_mhZE"><div class="sidebarSearchContainer_Lwc8"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_Y1UP"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/zh">什么是ClickHouse？</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/简介">简介</a><button aria-label="Toggle the collapsible sidebar category &#x27;简介&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/zh/getting-started">快速上手</a><button aria-label="Toggle the collapsible sidebar category &#x27;快速上手&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/zh/interfaces">接口</a><button aria-label="Toggle the collapsible sidebar category &#x27;接口&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/引擎">引擎</a><button aria-label="Toggle the collapsible sidebar category &#x27;引擎&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/zh/sql-reference">SQL参考</a><button aria-label="Toggle the collapsible sidebar category &#x27;SQL参考&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/zh/guides">ClickHouse指南</a><button aria-label="Toggle the collapsible sidebar category &#x27;ClickHouse指南&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/zh/operations">操作</a><button aria-label="Toggle the collapsible sidebar category &#x27;操作&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/zh/commercial">商业支持</a><button aria-label="Toggle the collapsible sidebar category &#x27;商业支持&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/zh/faq">F.A.Q.</a><button aria-label="Toggle the collapsible sidebar category &#x27;F.A.Q.&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/zh/whats-new">ClickHouse事迹</a><button aria-label="Toggle the collapsible sidebar category &#x27;ClickHouse事迹&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/whats-new/roadmap">Roadmap</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/zh/whats-new/security-changelog">安全更新日志</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/变更日志">变更日志</a><button aria-label="Toggle the collapsible sidebar category &#x27;变更日志&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/zh/changelog">变更日志</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/zh/development">ClickHouse 开发</a><button aria-label="Toggle the collapsible sidebar category &#x27;ClickHouse 开发&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_RiV8"><div class="container padding-top--md padding-bottom--lg main-content-wrapper"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><div class="theme-doc-markdown markdown"><h1>安全更新日志</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="修复于clickhouse-22912603-2022-09-22">修复于ClickHouse 22.9.1.2603, 2022-09-22<a href="#修复于clickhouse-22912603-2022-09-22" class="hash-link" aria-label="Direct link to 修复于ClickHouse 22.9.1.2603, 2022-09-22" title="Direct link to 修复于ClickHouse 22.9.1.2603, 2022-09-22">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cve-2022-44011">CVE-2022-44011<a href="#cve-2022-44011" class="hash-link" aria-label="Direct link to CVE-2022-44011" title="Direct link to CVE-2022-44011">​</a></h3><p>ClickHouse server中发现了一个堆缓冲区溢出问题。拥有向ClickHouse Server导入数据能力的恶意用户，可通过插入畸形CapnProto对象使ClickHouse Server对象崩溃。</p><p>修复已推送至版本22.9.1.2603, 22.8.2.11，22.7.4.16，22.6.6.16，22.3.12.19</p><p>作者：Kiojj(独立研究者)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cve-2022-44010">CVE-2022-44010<a href="#cve-2022-44010" class="hash-link" aria-label="Direct link to CVE-2022-44010" title="Direct link to CVE-2022-44010">​</a></h3><p>ClickHouse server中发现了一个堆缓冲区溢出问题。攻击者可发送一个特殊的HTTP请求至HTTP端口（默认监听在8123端口），该攻击可造成堆缓冲区溢出进而使ClickHouse server进程崩溃。执行该攻击无需认证。</p><p>修复版本已推送至版本22.9.1.2603，22.8.2.11，22.7.4.16，22.6.6.16，22.3.12.19</p><p>作者：Kiojj(独立研究者)</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="修复于clickhouse-21102152021-10-18">修复于ClickHouse 21.10.2.15，2021-10-18<a href="#修复于clickhouse-21102152021-10-18" class="hash-link" aria-label="Direct link to 修复于ClickHouse 21.10.2.15，2021-10-18" title="Direct link to 修复于ClickHouse 21.10.2.15，2021-10-18">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cve-2021-43304">CVE-2021-43304<a href="#cve-2021-43304" class="hash-link" aria-label="Direct link to CVE-2021-43304" title="Direct link to CVE-2021-43304">​</a></h3><p>在对恶意查询做语法分析时，ClickHouse的LZ4压缩编码会堆缓冲区溢出。LZ4:decompressImpl循环尤其是wildCopy&lt;copy_amount&gt;(op, ip, copy_end)中的随意复制操作没有验证是否会导致超出目标缓冲区限制。</p><p>作者：JFrog 安全研究团队</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cve-2021-43305">CVE-2021-43305<a href="#cve-2021-43305" class="hash-link" aria-label="Direct link to CVE-2021-43305" title="Direct link to CVE-2021-43305">​</a></h3><p>在对恶意查询做语法分析时，ClickHouse的LZ4压缩编码会堆缓冲区溢出。LZ4:decompressImpl循环尤其是wildCopy&lt;copy_amount&gt;(op, ip, copy_end)中的随意复制操作没有验证是否会导致超出目标缓冲区限制。
该问题于CVE-2021-43304非常相似，但是无保护的copy操作存在于不同的wildCopy调用里。</p><p>作者：JFrog 安全研究团队</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cve-2021-42387">CVE-2021-42387<a href="#cve-2021-42387" class="hash-link" aria-label="Direct link to CVE-2021-42387" title="Direct link to CVE-2021-42387">​</a></h3><p>在对恶意查询做语法分析时，ClickHouse的LZ4:decompressImpl循环会从压缩数据中读取一个用户提供的16bit无符号值（&#x27;offset&#x27;）。这个offset后面在复制操作作为长度使用时，没有检查是否超过复制源的上限。</p><p>作者：JFrog 安全研究团队</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cve-2021-42388">CVE-2021-42388<a href="#cve-2021-42388" class="hash-link" aria-label="Direct link to CVE-2021-42388" title="Direct link to CVE-2021-42388">​</a></h3><p>在对恶意查询做语法分析时，ClickHouse的LZ4:decompressImpl循环会从压缩数据中读取一个用户提供的16bit无符号值（&#x27;offset&#x27;）。这个offset后面在复制操作作为长度使用时，没有检查是否越过复制源的下限。</p><p>作者：JFrog 安全研究团队</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cve-2021-42389">CVE-2021-42389<a href="#cve-2021-42389" class="hash-link" aria-label="Direct link to CVE-2021-42389" title="Direct link to CVE-2021-42389">​</a></h3><p>在对恶意查询做语法分析时，ClickHouse的Delta压缩编码存在除零错误。压缩缓存的首字节在取模时没有判断是否为0。</p><p>作者：JFrog 安全研究团队</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cve-2021-42390">CVE-2021-42390<a href="#cve-2021-42390" class="hash-link" aria-label="Direct link to CVE-2021-42390" title="Direct link to CVE-2021-42390">​</a></h3><p>在对恶意查询做语法分析时，ClickHouse的DeltaDouble压缩编码存在除零错误。压缩缓存的首字节在取模时没有判断是否为0。</p><p>作者：JFrog 安全研究团队</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cve-2021-42391">CVE-2021-42391<a href="#cve-2021-42391" class="hash-link" aria-label="Direct link to CVE-2021-42391" title="Direct link to CVE-2021-42391">​</a></h3><p>在对恶意查询做语法分析时，  ClickHouse的Gorilla压缩编码存在除零错误，压缩缓存的首字节取模时没有判断是否为0。</p><p>作者：JFrog 安全研究团队</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="修复于clickhouse-2143212021-04-12">修复于ClickHouse 21.4.3.21，2021-04-12<a href="#修复于clickhouse-2143212021-04-12" class="hash-link" aria-label="Direct link to 修复于ClickHouse 21.4.3.21，2021-04-12" title="Direct link to 修复于ClickHouse 21.4.3.21，2021-04-12">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cve-2021-25263">CVE-2021-25263<a href="#cve-2021-25263" class="hash-link" aria-label="Direct link to CVE-2021-25263" title="Direct link to CVE-2021-25263">​</a></h3><p>拥有CREATE DICTIONARY权限的攻击者，可以读取许可目录之外的任意文件。</p><p>修复已推送至版本20.8.18.32-lts，21.1.9.41-stable，21.2.9.41-stable，21.3.6.55-lts，21.4.3.21-stable以及更早期的版本。</p><p>作者：<a href="https://twitter.com/vegoshin" target="_blank" rel="noopener noreferrer">Vyacheslav Egoshin</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="fixed-in-clickhouse-release-19-14-3-3-2019-09-10">修复于ClickHouse Release 19.14.3.3, 2019-09-10<a href="#fixed-in-clickhouse-release-19-14-3-3-2019-09-10" class="hash-link" aria-label="Direct link to 修复于ClickHouse Release 19.14.3.3, 2019-09-10" title="Direct link to 修复于ClickHouse Release 19.14.3.3, 2019-09-10">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cve-2019-15024">CVE-2019-15024<a href="#cve-2019-15024" class="hash-link" aria-label="Direct link to CVE-2019-15024" title="Direct link to CVE-2019-15024">​</a></h3><p>对ZooKeeper具有写访问权限并且可以运行ClickHouse所在网络上可用的自定义服务器的攻击者可以创建一个自定义的恶意服务器，该服务器将充当ClickHouse副本并在ZooKeeper中注册。当另一个副本将从恶意副本获取数据部分时，它可以强制clickhouse服务器写入文件系统上的任意路径。</p><p>作者：Yandex信息安全团队Eldar Zaitov</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cve-2019-16535">CVE-2019-16535<a href="#cve-2019-16535" class="hash-link" aria-label="Direct link to CVE-2019-16535" title="Direct link to CVE-2019-16535">​</a></h3><p>解压算法中的OOB-read、OOB-write和整数下溢可以通过本机协议实现RCE或DoS。</p><p>作者: Yandex信息安全团队Eldar Zaitov</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cve-2019-16536">CVE-2019-16536<a href="#cve-2019-16536" class="hash-link" aria-label="Direct link to CVE-2019-16536" title="Direct link to CVE-2019-16536">​</a></h3><p>恶意的经过身份验证的客户端可能会触发导致DoS的堆栈溢出。</p><p>作者: Yandex信息安全团队Eldar Zaitov</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="fixed-in-clickhouse-release-19-13-6-1-2019-09-20">修复于ClickHouse Release 19.13.6.1, 2019-09-20<a href="#fixed-in-clickhouse-release-19-13-6-1-2019-09-20" class="hash-link" aria-label="Direct link to 修复于ClickHouse Release 19.13.6.1, 2019-09-20" title="Direct link to 修复于ClickHouse Release 19.13.6.1, 2019-09-20">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cve-2019-18657">CVE-2019-18657<a href="#cve-2019-18657" class="hash-link" aria-label="Direct link to CVE-2019-18657" title="Direct link to CVE-2019-18657">​</a></h3><p>表函数<code>url</code>存在允许攻击者在请求中插入任意HTTP标头的漏洞。</p><p>作者: <a href="https://github.com/NSTikhomirov" target="_blank" rel="noopener noreferrer">Nikita Tikhomirov</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="fixed-in-clickhouse-release-18-12-13-2018-09-10">修复于ClickHouse Release 18.12.13, 2018-09-10<a href="#fixed-in-clickhouse-release-18-12-13-2018-09-10" class="hash-link" aria-label="Direct link to 修复于ClickHouse Release 18.12.13, 2018-09-10" title="Direct link to 修复于ClickHouse Release 18.12.13, 2018-09-10">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cve-2018-14672">CVE-2018-14672<a href="#cve-2018-14672" class="hash-link" aria-label="Direct link to CVE-2018-14672" title="Direct link to CVE-2018-14672">​</a></h3><p>加载CatBoost模型的函数允许路径遍历和通过错误消息读取任意文件。</p><p>作者：Yandex信息安全团队Andrey Krasichkov</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="fixed-in-clickhouse-release-18-10-3-2018-08-13">修复于Release 18.10.3, 2018-08-13<a href="#fixed-in-clickhouse-release-18-10-3-2018-08-13" class="hash-link" aria-label="Direct link to 修复于Release 18.10.3, 2018-08-13" title="Direct link to 修复于Release 18.10.3, 2018-08-13">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cve-2018-14671">CVE-2018-14671<a href="#cve-2018-14671" class="hash-link" aria-label="Direct link to CVE-2018-14671" title="Direct link to CVE-2018-14671">​</a></h3><p>unixODBC允许从文件系统加载任意共享对象，从而导致远程代码执行漏洞。</p><p>作者：Yandex信息安全团队Andrey Krasichkov和Evgeny Sidorov</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="fixed-in-clickhouse-release-1-1-54388-2018-06-28">修复于ClickHouse Release 1.1.54388, 2018-06-28<a href="#fixed-in-clickhouse-release-1-1-54388-2018-06-28" class="hash-link" aria-label="Direct link to 修复于ClickHouse Release 1.1.54388, 2018-06-28" title="Direct link to 修复于ClickHouse Release 1.1.54388, 2018-06-28">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cve-2018-14668">CVE-2018-14668<a href="#cve-2018-14668" class="hash-link" aria-label="Direct link to CVE-2018-14668" title="Direct link to CVE-2018-14668">​</a></h3><p><code>remote</code>表函数允许在<code>user</code>，<code>password</code>和<code>default_database</code>字段中使用任意符号，从而导致跨协议请求伪造攻击。</p><p>者：Yandex信息安全团队Andrey Krasichkov</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="fixed-in-clickhouse-release-1-1-54390-2018-07-06">修复于ClickHouse Release 1.1.54390, 2018-07-06<a href="#fixed-in-clickhouse-release-1-1-54390-2018-07-06" class="hash-link" aria-label="Direct link to 修复于ClickHouse Release 1.1.54390, 2018-07-06" title="Direct link to 修复于ClickHouse Release 1.1.54390, 2018-07-06">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cve-2018-14669">CVE-2018-14669<a href="#cve-2018-14669" class="hash-link" aria-label="Direct link to CVE-2018-14669" title="Direct link to CVE-2018-14669">​</a></h3><p>ClickHouse MySQL客户端启用了<code>LOAD DATA LOCAL INFILE</code>功能，允许恶意MySQL数据库从连接的ClickHouse服务器读取任意文件。</p><p>作者：Yandex信息安全团队Andrey Krasichkov和Evgeny Sidorov</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="fixed-in-clickhouse-release-1-1-54131-2017-01-10">修复于ClickHouse Release 1.1.54131, 2017-01-10<a href="#fixed-in-clickhouse-release-1-1-54131-2017-01-10" class="hash-link" aria-label="Direct link to 修复于ClickHouse Release 1.1.54131, 2017-01-10" title="Direct link to 修复于ClickHouse Release 1.1.54131, 2017-01-10">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cve-2018-14670">CVE-2018-14670<a href="#cve-2018-14670" class="hash-link" aria-label="Direct link to CVE-2018-14670" title="Direct link to CVE-2018-14670">​</a></h3><p>deb包中的错误配置可能导致未经授权使用数据库。</p><p>作者：英国国家网络安全中心（NCSC）</p><p>{## <a href="https://clickhouse.com/docs/en/security_changelog/" target="_blank" rel="noopener noreferrer">Original article</a> ##}</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ClickHouse/ClickHouse/tree/master/docs/zh/whats-new/security-changelog.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev paginationNavLink_UdUv" href="/docs/zh/whats-new/roadmap"><svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.2751 19.175L10.3251 18.125L5.4501 13.25H21.6001V11.75H5.4501L10.3251 6.87501L9.2751 5.82501L2.5751 12.5L9.2751 19.175Z" fill="currentColor"></path></svg><div class="paginationNavContent__3xr"><div class="pagination-nav__sublabel">Previous</div><div class="paginationNavLabel_YPzM pagination-nav__label">Roadmap</div></div></a><a class="pagination-nav__link pagination-nav__link--next paginationNavLink_UdUv" href="/docs/category/变更日志"><div class="paginationNavContent__3xr"><div class="pagination-nav__sublabel">Next</div><div class="paginationNavLabel_YPzM pagination-nav__label">变更日志</div></div><svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.7249 19.175L13.6749 18.125L18.5499 13.25H2.3999V11.75H18.5499L13.6749 6.87501L14.7249 5.82501L21.4249 12.5L14.7249 19.175Z" fill="currentColor"></path></svg></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#修复于clickhouse-22912603-2022-09-22" class="table-of-contents__link toc-highlight">修复于ClickHouse 22.9.1.2603, 2022-09-22</a><ul><li><a href="#cve-2022-44011" class="table-of-contents__link toc-highlight">CVE-2022-44011</a></li><li><a href="#cve-2022-44010" class="table-of-contents__link toc-highlight">CVE-2022-44010</a></li></ul></li><li><a href="#修复于clickhouse-21102152021-10-18" class="table-of-contents__link toc-highlight">修复于ClickHouse 21.10.2.15，2021-10-18</a><ul><li><a href="#cve-2021-43304" class="table-of-contents__link toc-highlight">CVE-2021-43304</a></li><li><a href="#cve-2021-43305" class="table-of-contents__link toc-highlight">CVE-2021-43305</a></li><li><a href="#cve-2021-42387" class="table-of-contents__link toc-highlight">CVE-2021-42387</a></li><li><a href="#cve-2021-42388" class="table-of-contents__link toc-highlight">CVE-2021-42388</a></li><li><a href="#cve-2021-42389" class="table-of-contents__link toc-highlight">CVE-2021-42389</a></li><li><a href="#cve-2021-42390" class="table-of-contents__link toc-highlight">CVE-2021-42390</a></li><li><a href="#cve-2021-42391" class="table-of-contents__link toc-highlight">CVE-2021-42391</a></li></ul></li><li><a href="#修复于clickhouse-2143212021-04-12" class="table-of-contents__link toc-highlight">修复于ClickHouse 21.4.3.21，2021-04-12</a><ul><li><a href="#cve-2021-25263" class="table-of-contents__link toc-highlight">CVE-2021-25263</a></li></ul></li><li><a href="#fixed-in-clickhouse-release-19-14-3-3-2019-09-10" class="table-of-contents__link toc-highlight">修复于ClickHouse Release 19.14.3.3, 2019-09-10</a><ul><li><a href="#cve-2019-15024" class="table-of-contents__link toc-highlight">CVE-2019-15024</a></li><li><a href="#cve-2019-16535" class="table-of-contents__link toc-highlight">CVE-2019-16535</a></li><li><a href="#cve-2019-16536" class="table-of-contents__link toc-highlight">CVE-2019-16536</a></li></ul></li><li><a href="#fixed-in-clickhouse-release-19-13-6-1-2019-09-20" class="table-of-contents__link toc-highlight">修复于ClickHouse Release 19.13.6.1, 2019-09-20</a><ul><li><a href="#cve-2019-18657" class="table-of-contents__link toc-highlight">CVE-2019-18657</a></li></ul></li><li><a href="#fixed-in-clickhouse-release-18-12-13-2018-09-10" class="table-of-contents__link toc-highlight">修复于ClickHouse Release 18.12.13, 2018-09-10</a><ul><li><a href="#cve-2018-14672" class="table-of-contents__link toc-highlight">CVE-2018-14672</a></li></ul></li><li><a href="#fixed-in-clickhouse-release-18-10-3-2018-08-13" class="table-of-contents__link toc-highlight">修复于Release 18.10.3, 2018-08-13</a><ul><li><a href="#cve-2018-14671" class="table-of-contents__link toc-highlight">CVE-2018-14671</a></li></ul></li><li><a href="#fixed-in-clickhouse-release-1-1-54388-2018-06-28" class="table-of-contents__link toc-highlight">修复于ClickHouse Release 1.1.54388, 2018-06-28</a><ul><li><a href="#cve-2018-14668" class="table-of-contents__link toc-highlight">CVE-2018-14668</a></li></ul></li><li><a href="#fixed-in-clickhouse-release-1-1-54390-2018-07-06" class="table-of-contents__link toc-highlight">修复于ClickHouse Release 1.1.54390, 2018-07-06</a><ul><li><a href="#cve-2018-14669" class="table-of-contents__link toc-highlight">CVE-2018-14669</a></li></ul></li><li><a href="#fixed-in-clickhouse-release-1-1-54131-2017-01-10" class="table-of-contents__link toc-highlight">修复于ClickHouse Release 1.1.54131, 2017-01-10</a><ul><li><a href="#cve-2018-14670" class="table-of-contents__link toc-highlight">CVE-2018-14670</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer_jryj"><div class="container_y1z5 container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">© 2016&ndash;2023 ClickHouse, Inc.</div></div><div><div class="footer__links text--center"><div class="footer__links"><a href="https://clickhouse.com/legal/trademark-policy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Trademark</a><span class="footer__link-separator">·</span><a href="https://clickhouse.com/legal/privacy-policy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy</a><span class="footer__link-separator">·</span><a href="https://trust.clickhouse.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Security</a><span class="footer__link-separator">·</span><a href="https://clickhouse.com/legal/agreements/terms-of-service" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Service</a></div></div></div></div><button class="colorModeButton_hk25"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.7227 0.724664C8.7227 0.330045 8.39191 0 8.0036 0C7.60809 0 7.2773 0.330045 7.2773 0.724664V2.18834C7.2773 2.57578 7.60809 2.90583 8.0036 2.90583C8.39191 2.90583 8.7227 2.57578 8.7227 2.18834V0.724664ZM11.5991 3.4009C11.3258 3.67354 11.3258 4.13274 11.6063 4.41256C11.8796 4.6852 12.347 4.69238 12.6274 4.40538L13.6629 3.3722C13.9434 3.09238 13.9362 2.62601 13.6629 2.34619C13.3897 2.07354 12.9222 2.08072 12.649 2.35336L11.5991 3.4009ZM3.37258 4.40538C3.64584 4.6852 4.11326 4.6852 4.38652 4.41256C4.66697 4.14709 4.66697 3.66637 4.4009 3.4009L3.3582 2.35336C3.09213 2.08789 2.61753 2.07354 2.34427 2.34619C2.07101 2.62601 2.06382 3.09238 2.33708 3.36502L3.37258 4.40538ZM7.9964 11.774C10.0602 11.774 11.7717 10.0664 11.7717 8C11.7717 5.93363 10.0602 4.22601 7.9964 4.22601C5.93258 4.22601 4.22112 5.93363 4.22112 8C4.22112 10.0664 5.93258 11.774 7.9964 11.774ZM7.9964 10.4395C6.65888 10.4395 5.55146 9.33453 5.55146 8C5.55146 6.66547 6.65888 5.56054 7.9964 5.56054C9.33393 5.56054 10.4413 6.66547 10.4413 8C10.4413 9.33453 9.33393 10.4395 7.9964 10.4395ZM15.2809 8.71749C15.6692 8.71749 16 8.38744 16 8C16 7.60538 15.6692 7.28251 15.2809 7.28251H13.8211C13.4328 7.28251 13.102 7.60538 13.102 8C13.102 8.38744 13.4328 8.71749 13.8211 8.71749H15.2809ZM0.719101 7.28251C0.330787 7.28251 0 7.60538 0 8C0 8.38744 0.330787 8.71749 0.719101 8.71749H2.17888C2.57438 8.71749 2.90517 8.38744 2.90517 8C2.90517 7.60538 2.57438 7.28251 2.17888 7.28251H0.719101ZM12.6202 11.5946C12.347 11.322 11.8796 11.322 11.5991 11.5946C11.3258 11.8744 11.3258 12.3336 11.6063 12.6135L12.649 13.6538C12.9294 13.9265 13.3897 13.9193 13.6701 13.6395C13.9434 13.3668 13.9434 12.9076 13.6629 12.6278L12.6202 11.5946ZM2.33708 12.6206C2.05663 12.9004 2.05663 13.3668 2.3227 13.6395C2.60315 13.9121 3.07056 13.9193 3.34382 13.6466L4.38652 12.6135C4.66697 12.3336 4.66697 11.8744 4.4009 11.6018C4.12045 11.322 3.65303 11.322 3.37258 11.5946L2.33708 12.6206ZM8.7227 13.8117C8.7227 13.4242 8.39191 13.0942 8.0036 13.0942C7.60809 13.0942 7.2773 13.4242 7.2773 13.8117V15.2753C7.2773 15.6628 7.60809 16 8.0036 16C8.39191 16 8.7227 15.6628 8.7227 15.2753V13.8117Z" fill="currentColor"></path></svg><span>light Mode</span></button></footer></div>
<script src="/docs/assets/js/runtime~main.cb4944d2.js"></script>
<script src="/docs/assets/js/main.21fa7d17.js"></script>
</body>
</html>