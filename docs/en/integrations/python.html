<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-en/integrations/language-clients/python/index">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Python Integration with ClickHouse Connect | ClickHouse Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://clickhouse.com/docs/img/logo.png"><meta data-rh="true" name="twitter:image" content="https://clickhouse.com/docs/img/logo.png"><meta data-rh="true" property="og:url" content="https://clickhouse.com/docs/en/integrations/python"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Python Integration with ClickHouse Connect | ClickHouse Docs"><meta data-rh="true" name="description" content="The ClickHouse Connect project suite for connecting Python to ClickHouse"><meta data-rh="true" property="og:description" content="The ClickHouse Connect project suite for connecting Python to ClickHouse"><meta data-rh="true" name="keywords" content="clickhouse,python,client,connect,integrate"><link data-rh="true" rel="icon" href="/docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://clickhouse.com/docs/en/integrations/python"><link data-rh="true" rel="alternate" href="https://clickhouse.com/docs/en/integrations/python" hreflang="en"><link data-rh="true" rel="alternate" href="https://clickhouse.com/docs/en/integrations/python" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://62VCH2MD74-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/docs/knowledgebase/rss.xml" title="ClickHouse Knowledge Base Feed RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs/knowledgebase/atom.xml" title="ClickHouse Knowledge Base Feed Atom Feed">
<link rel="alternate" type="application/json" href="/docs/knowledgebase/feed.json" title="ClickHouse Knowledge Base Feed JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KF1LLRTQ5Q"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-KF1LLRTQ5Q",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="ClickHouse Docs" href="/docs/opensearch.xml">





<script src="/docs/js/analytics.js"></script><link rel="stylesheet" href="/docs/assets/css/styles.084d673f.css">
<link rel="preload" href="/docs/assets/js/runtime~main.b478ee8e.js" as="script">
<link rel="preload" href="/docs/assets/js/main.92fcbde1.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navBar_gvJn"><div class="navbarHeaderContainer_rccn navbar-header"><div class="navbar__inner navbarInner_W6bg"><div class="navbar__items"><a href="https://clickhouse.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/docs/img/logo_without_text.svg" alt="ClickHouse" class="themedImage_ToTc themedImage--light_HNdA"><img src="/docs/img/logo_without_text.svg" alt="ClickHouse" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">ClickHouse</b></a><div class="navbarItemsList_uIZ2 navbar-items-list"><div class="navbar__item dropdown"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link ch-menu">Product</a><ul class="dropdown__menu"><li><a href="https://clickhouse.com/cloud" target="_blank" rel="noopener noreferrer" class="dropdown__link">ClickHouse Cloud</a></li><li><a href="https://clickhouse.com/clickhouse" target="_blank" rel="noopener noreferrer" class="dropdown__link">ClickHouse Open Source</a></li></ul></div><a href="https://clickhouse.com/customer-stories" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link ch-menu">Use Cases</a><div class="navbar__item dropdown"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link ch-menu">Company</a><ul class="dropdown__menu"><li><a href="https://clickhouse.com/blog" target="_blank" rel="noopener noreferrer" class="dropdown__link">Blog</a></li><li><a href="https://clickhouse.com/company/our-story" target="_blank" rel="noopener noreferrer" class="dropdown__link">Our story</a></li><li><a href="https://clickhouse.com/company/careers" target="_blank" rel="noopener noreferrer" class="dropdown__link">Careers</a></li><li><a href="https://clickhouse.com/company/contact" target="_blank" rel="noopener noreferrer" class="dropdown__link">Contact us</a></li><li><a href="https://clickhouse.com/company/news-events" target="_blank" rel="noopener noreferrer" class="dropdown__link">News and events</a></li></ul></div><div class="navbar__item dropdown"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link ch-menu">Learn</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/en/intro">Docs</a></li><li><a href="https://clickhouse.com/learn" target="_blank" rel="noopener noreferrer" class="dropdown__link">ClickHouse Academy</a></li></ul></div><a href="https://clickhouse.com/pricing" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link ch-menu">Pricing</a></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item">
                <div class="nav-items-btns">
                  <a href="https://clickhouse.cloud/signIn" class="sign-in navbar__item navbar__link ch-menu">
                    Sign in
                  </a>
                  <a href="https://clickhouse.cloud/signUp" class="click-button-anchor">
                    <button class="click-button primary-btn">Free Trial</button>
                  </a>
                </div></div><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button></div></div><div class="secondary-nav--items secondaryMenu_iuff"><div class="scrollableElement_Qqzp secondaryMenuLeft_tFZR secondary-nav--items-left"><a aria-current="page" class="navbar__item navbar__link ch-menu navbar__link--active" href="/docs/en/intro">Docs</a><a class="navbar__item navbar__link ch-menu" href="/docs/en/cloud/overview">Cloud</a><a class="navbar__item navbar__link ch-menu" href="/docs/en/sql-reference">SQL Reference</a><a class="navbar__item navbar__link ch-menu" href="/docs/knowledgebase">Knowledge Base</a></div><div class="secondaryMenuRight__9m4 secondary-nav--items-right"><div class="navbar__item dropdown dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg width="14" height="13" viewBox="0 0 14 13" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6.95 12.6496L9.75 5.26628H11.0333L13.8333 12.6496H12.55L11.9 10.7663H8.91667L8.25 12.6496H6.95ZM9.28333 9.69961H11.5L10.4167 6.64961H10.3667L9.28333 9.69961ZM2.08333 10.7996L1.21667 9.93294L4.33333 6.83294C3.94444 6.39961 3.60556 5.95228 3.31667 5.49094C3.02778 5.03005 2.77222 4.54405 2.55 4.03294H3.83333C4.02222 4.41072 4.22222 4.74672 4.43333 5.04094C4.64444 5.33561 4.89444 5.64405 5.18333 5.96628C5.63889 5.47739 6.01667 4.97472 6.31667 4.45828C6.61667 3.94139 6.86667 3.3885 7.06667 2.79961H0.25V1.58294H4.55V0.349609H5.78333V1.58294H10.0833V2.79961H8.3C8.07778 3.53294 7.78333 4.24116 7.41667 4.92428C7.05 5.60783 6.59444 6.25516 6.05 6.86628L7.53333 8.36628L7.06667 9.63294L5.16667 7.73294L2.08333 10.7996Z" fill="currentColor"/>
</svg></a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/en/intro">English</a></li><li><a class="dropdown__link" href="/docs/ru">Russian</a></li><li><a class="dropdown__link" href="/docs/zh">Chinese</a></li></ul></div><button class="colorModeButton_hk25 navbar-color-toggle"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.7227 0.724664C8.7227 0.330045 8.39191 0 8.0036 0C7.60809 0 7.2773 0.330045 7.2773 0.724664V2.18834C7.2773 2.57578 7.60809 2.90583 8.0036 2.90583C8.39191 2.90583 8.7227 2.57578 8.7227 2.18834V0.724664ZM11.5991 3.4009C11.3258 3.67354 11.3258 4.13274 11.6063 4.41256C11.8796 4.6852 12.347 4.69238 12.6274 4.40538L13.6629 3.3722C13.9434 3.09238 13.9362 2.62601 13.6629 2.34619C13.3897 2.07354 12.9222 2.08072 12.649 2.35336L11.5991 3.4009ZM3.37258 4.40538C3.64584 4.6852 4.11326 4.6852 4.38652 4.41256C4.66697 4.14709 4.66697 3.66637 4.4009 3.4009L3.3582 2.35336C3.09213 2.08789 2.61753 2.07354 2.34427 2.34619C2.07101 2.62601 2.06382 3.09238 2.33708 3.36502L3.37258 4.40538ZM7.9964 11.774C10.0602 11.774 11.7717 10.0664 11.7717 8C11.7717 5.93363 10.0602 4.22601 7.9964 4.22601C5.93258 4.22601 4.22112 5.93363 4.22112 8C4.22112 10.0664 5.93258 11.774 7.9964 11.774ZM7.9964 10.4395C6.65888 10.4395 5.55146 9.33453 5.55146 8C5.55146 6.66547 6.65888 5.56054 7.9964 5.56054C9.33393 5.56054 10.4413 6.66547 10.4413 8C10.4413 9.33453 9.33393 10.4395 7.9964 10.4395ZM15.2809 8.71749C15.6692 8.71749 16 8.38744 16 8C16 7.60538 15.6692 7.28251 15.2809 7.28251H13.8211C13.4328 7.28251 13.102 7.60538 13.102 8C13.102 8.38744 13.4328 8.71749 13.8211 8.71749H15.2809ZM0.719101 7.28251C0.330787 7.28251 0 7.60538 0 8C0 8.38744 0.330787 8.71749 0.719101 8.71749H2.17888C2.57438 8.71749 2.90517 8.38744 2.90517 8C2.90517 7.60538 2.57438 7.28251 2.17888 7.28251H0.719101ZM12.6202 11.5946C12.347 11.322 11.8796 11.322 11.5991 11.5946C11.3258 11.8744 11.3258 12.3336 11.6063 12.6135L12.649 13.6538C12.9294 13.9265 13.3897 13.9193 13.6701 13.6395C13.9434 13.3668 13.9434 12.9076 13.6629 12.6278L12.6202 11.5946ZM2.33708 12.6206C2.05663 12.9004 2.05663 13.3668 2.3227 13.6395C2.60315 13.9121 3.07056 13.9193 3.34382 13.6466L4.38652 12.6135C4.66697 12.3336 4.66697 11.8744 4.4009 11.6018C4.12045 11.322 3.65303 11.322 3.37258 11.5946L2.33708 12.6206ZM8.7227 13.8117C8.7227 13.4242 8.39191 13.0942 8.0036 13.0942C7.60809 13.0942 7.2773 13.4242 7.2773 13.8117V15.2753C7.2773 15.6628 7.60809 16 8.0036 16C8.39191 16 8.7227 15.6628 8.7227 15.2753V13.8117Z" fill="currentColor"></path></svg><span>light Mode</span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_W2AM"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage_qMb8"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_mhZE"><div class="sidebarSearchContainer_Lwc8"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_Y1UP"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="false"><a class="menu__link">Get Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/intro">What is ClickHouse?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/getting-started/quick-start">Quick Start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/tutorial">Advanced Tutorial</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/install">Install</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item top-nav-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="false"><a class="menu__link">Concepts</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/concepts/why-clickhouse-is-so-fast">Why is ClickHouse so Fast?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/concepts/olap">What is OLAP?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/about-us/distinctive-features">Why is ClickHouse unique?</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="false"><a class="menu__link">Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/guides/creating-tables">Creating Tables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/guides/inserting-data">Inserting Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/guides/writing-queries">SELECT Queries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/guides/developer/mutations">Updating and Deleting Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/guides/joining-tables">Joining Tables</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/en/guides/developer/cascading-materialized-views">Advanced Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/en/optimize/sparse-primary-indexes">Best Practices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/en/getting-started/example-datasets">Example Datasets</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="false"><a class="menu__link">Integrations</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations">View all integrations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/s3">AWS S3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/gcs">Google Cloud Storage (GCS)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/postgresql">PostgreSQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/mysql">MySQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/kafka">Kafka</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/dbt">dbt</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/redshift">Redshift</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed top-nav-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/en/integrations/airbyte">More...</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="false"><a class="menu__link">Data Formats</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/data-formats/csv-tsv">CSV and TSV</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/data-formats/json">JSON</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/data-formats/parquet">Parquet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/data-formats/arrow-avro-orc">Avro, Arrow and ORC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/interfaces/formats">View all formats...</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="false"><a class="menu__link menu__link--active">Clients and Drivers</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/sql-clients/clickhouse-client-local">clickhouse-client (CLI)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/sql-clients/sql-console">SQL Console</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/getting-started/playground">ClickHouse Playground</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/language-clients/nodejs">Node.js</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/java">Java</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/en/integrations/python">Python</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/en/integrations/language-clients/nodejs">View all languages</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/language-clients/nodejs">Node.js</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/java">Java</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/go">Go</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/en/integrations/python">Python</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/en/interfaces/overview">Drivers and Interfaces</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/en/integrations/datagrip">SQL Clients</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/en/integrations/data-visualization">Business Intelligence</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="false"><a class="menu__link">Managing ClickHouse</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/operations/access-rights">Users and Roles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/operations/backup">Backup and Restore</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/operations/monitoring">Monitoring</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/en/architecture/introduction">Deploying</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/en/guides/sre/configuring-ldap">Security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/en/operations/settings">Advanced Settings</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/en/guides/sre/scaling-clusters">Performance and Optimizations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/en/operations/utilities">Tools and Utilities</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/en/operations/update">More...</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="false"><a class="menu__link">About ClickHouse</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/about-us/adopters">Adopters</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/changelog">Changelog</a><button aria-label="Toggle the collapsible sidebar category &#x27;Changelog&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/whats-new/security-changelog">Security Changelog</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/whats-new/roadmap">Roadmap</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/en/development/developer-instruction">Contribute</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/about-us/history">ClickHouse History</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_RiV8"><div class="container padding-top--md padding-bottom--lg main-content-wrapper"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><div class="theme-doc-markdown markdown"><h1>Python Integration with ClickHouse Connect</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2><p>ClickHouse Connect is a suite of Python packages providing interoperability with a wide range of Python applications.
The three primary components are:</p><ul><li>A low level driver in the package <code>clickhouse_connect.driver</code>. This package includes a basic client that handles
all ClickHouse Connect requests to the ClickHouse Server, as well assorted helper classes and utility functions.</li><li>A limited <a href="https://www.sqlalchemy.org/" target="_blank" rel="noopener noreferrer">SQLAlchemy</a> dialect in the package <code>clickhouse_connect.cc_sqlalchemy</code>. This
package focuses implements query/cursor functionality, and does not generally support SQLAlchemy DDL and ORM
operations.
(SQLAlchemy is targeted toward OLTP databases, and we recommend more specialized tools and frameworks to manage
the ClickHouse OLAP database.)</li><li>An Apache <a href="https://superset.apache.org/" target="_blank" rel="noopener noreferrer">Superset</a> EngineSpec in the <code>clickhouse_connect.cc_superset</code>.  Note that
this sub-package is deprecated and will be removed in a future release.  The functionality has been moved to the
main Superset project, and is included here for backward compatibility with older Superset version.</li></ul><p>This documentation is current as of the beta release 0.5.17.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="requirements-and-compatibility">Requirements and Compatibility<a href="#requirements-and-compatibility" class="hash-link" aria-label="Direct link to Requirements and Compatibility" title="Direct link to Requirements and Compatibility">​</a></h3><table><thead><tr><th align="right">Python</th><th align="left"></th><th align="right">Platform¹</th><th align="left"></th><th align="right">ClickHouse</th><th align="left"></th><th align="right">SQLAlchemy²</th><th align="left"></th><th align="right">Apache Superset</th><th align="left"></th></tr></thead><tbody><tr><td align="right">2.x, &lt;3.7</td><td align="left">❌</td><td align="right">Linux (x86)</td><td align="left">✅</td><td align="right">&lt;22.3³</td><td align="left">🟡</td><td align="right">&lt;1.3</td><td align="left">❌</td><td align="right">&lt;1.4</td><td align="left">❌</td></tr><tr><td align="right">3.7.x</td><td align="left">✅</td><td align="right">Linux (Aarch64)</td><td align="left">✅</td><td align="right">22.3.x</td><td align="left">✅</td><td align="right">1.3.x</td><td align="left">✅</td><td align="right">1.4.x</td><td align="left">✅</td></tr><tr><td align="right">3.8.x</td><td align="left">✅</td><td align="right">macOS (x86)</td><td align="left">✅</td><td align="right">22.4-22.7³</td><td align="left">🟡</td><td align="right">1.4.x</td><td align="left">✅</td><td align="right">1.5.x</td><td align="left">✅</td></tr><tr><td align="right">3.9.x</td><td align="left">✅</td><td align="right">macOs (M1)</td><td align="left">✅</td><td align="right">22.8.x</td><td align="left">✅</td><td align="right">&gt;=2.x</td><td align="left">❌</td><td align="right">2.0.x</td><td align="left">✅</td></tr><tr><td align="right">3.10.x</td><td align="left">✅</td><td align="right">Windows</td><td align="left">✅</td><td align="right">22.9-22.12³</td><td align="left">🟡</td><td align="right"></td><td align="left"></td><td align="right"></td><td align="left"></td></tr><tr><td align="right">3.11.x</td><td align="left">✅</td><td align="right"></td><td align="left"></td><td align="right">22.12.x</td><td align="left">✅</td><td align="right"></td><td align="left"></td><td align="right"></td><td align="left"></td></tr><tr><td align="right"></td><td align="left"></td><td align="right"></td><td align="left"></td><td align="right">23.1.x</td><td align="left">✅</td><td align="right"></td><td align="left"></td><td align="right"></td><td align="left"></td></tr><tr><td align="right"></td><td align="left"></td><td align="right"></td><td align="left"></td><td align="right">23.2.x</td><td align="left">✅</td><td align="right"></td><td align="left"></td><td align="right"></td><td align="left"></td></tr></tbody></table><p>¹ClickHouse Connect has been explicitly tested against the listed platforms.  In addition, untested binary wheels (with C
optimization) are built for all architectures supported by the excellent <a href="https://cibuildwheel.readthedocs.io/en/stable/" target="_blank" rel="noopener noreferrer">cibuildwheel</a> project.
Finally, because ClickHouse Connect can also run as pure Python, the source installation should work on any recent
Python installation.</p><p>²Again SQLAlchemy support is limited primarily to query functionality.  The full SQLAlchemy API is not supported.</p><p>³ClickHouse Connect has been tested against all currently supported ClickHouse versions. Because it uses the HTTP
protocol, it should also work correctly for most other versions of ClickHouse, although there may be some
incompatibilities with certain advanced data types.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a href="#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation">​</a></h3><p>Install ClickHouse Connect from PyPI via pip:</p><p><code>pip install clickhouse-connect</code></p><p>ClickHouse Connect can also be installed from source:</p><ul><li><code>git clone</code> the <a href="https://github.com/ClickHouse/clickhouse-connect" target="_blank" rel="noopener noreferrer">GitHub repository</a>.</li><li>(Optional) run <code>pip install cython</code> to build and enable the C/Cython optimizations</li><li><code>cd</code> to the project root directory and run <code>pip install .</code></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="support-policy">Support Policy<a href="#support-policy" class="hash-link" aria-label="Direct link to Support Policy" title="Direct link to Support Policy">​</a></h3><p>ClickHouse Connect is currently in beta and only the current beta release is actively supported. Please update to the latest
version before reported any issues. Issues should be filed in
the <a href="https://github.com/ClickHouse/clickhouse-connect/issues" target="_blank" rel="noopener noreferrer">GitHub project</a>.
Future releases of ClickHouse Connect are guaranteed to be compatible with actively supported ClickHouse versions at the
time of release (generally the three most recent <code>stable</code> and two most recent <code>lts</code> releases).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-usage">Basic Usage<a href="#basic-usage" class="hash-link" aria-label="Direct link to Basic Usage" title="Direct link to Basic Usage">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gather-your-connection-details">Gather your connection details<a href="#gather-your-connection-details" class="hash-link" aria-label="Direct link to Gather your connection details" title="Direct link to Gather your connection details">​</a></h3><p>To connect to ClickHouse with HTTP(S) you need this information:</p><ul><li><p>The HOST and PORT: typically, the port is 8443 when using TLS or 8123 when not using TLS.</p></li><li><p>The DATABASE NAME: out of the box, there is a database named <code>default</code>, use the name of the database that you want to connect to.</p></li><li><p>The USERNAME and PASSWORD: out of the box, the username is <code>default</code>. Use the username appropriate for your use case.</p></li></ul><p>The details for your ClickHouse Cloud service are available in the ClickHouse Cloud console.  Select the service that you will connect to and click <strong>Connect</strong>:</p><p><img loading="lazy" alt="ClickHouse Cloud service connect button" src="/docs/assets/images/cloud-connect-button-e2247559831d9d3549387ddfb0deee9b.png" width="939" height="474" class="img_ev3q"></p><p>Choose <strong>HTTPS</strong>, and the details are available in an example <code>curl</code> command. </p><p><img loading="lazy" alt="ClickHouse Cloud HTTPS connection details" src="/docs/assets/images/connection-details-https-6ceceb667ac0b41ab35a2ad390b7e2dc.png" width="586" height="470" class="img_ev3q"></p><p>If you are using self-managed ClickHouse, the connection details are set by your ClickHouse administrator.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="establish-a-connection">Establish a connection<a href="#establish-a-connection" class="hash-link" aria-label="Direct link to Establish a connection" title="Direct link to Establish a connection">​</a></h4><p>There are two examples shown for connecting to ClickHouse:</p><ul><li>Connecting to a ClickHouse server on localhost.</li><li>Connecting to a ClickHouse Cloud service.</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="use-a-clickhouse-connect-client-instance-to-connect-to-a-clickhouse-server-on-localhost">Use a ClickHouse Connect client instance to connect to a ClickHouse server on localhost:<a href="#use-a-clickhouse-connect-client-instance-to-connect-to-a-clickhouse-server-on-localhost" class="hash-link" aria-label="Direct link to Use a ClickHouse Connect client instance to connect to a ClickHouse server on localhost:" title="Direct link to Use a ClickHouse Connect client instance to connect to a ClickHouse server on localhost:">​</a></h5><div class="language-python codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> clickhouse_connect</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">client </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> clickhouse_connect</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">get_client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">host</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;localhost&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> username</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;default&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> password</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;password&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="use-a-clickhouse-connect-client-instance-to-connect-to-a-clickhouse-cloud-service">Use a ClickHouse Connect client instance to connect to a ClickHouse Cloud service:<a href="#use-a-clickhouse-connect-client-instance-to-connect-to-a-clickhouse-cloud-service" class="hash-link" aria-label="Direct link to Use a ClickHouse Connect client instance to connect to a ClickHouse Cloud service:" title="Direct link to Use a ClickHouse Connect client instance to connect to a ClickHouse Cloud service:">​</a></h5><div class="theme-admonition theme-admonition-tip alert alert--success admonition_WoCw"><div class="alert-icon admonitionIcon_Ibzs"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></div><div class="alert-content admonitionContent_vXIg"><div class="admonitionHeading_TMsN">tip</div><p>Use the connection details gathered earlier.  ClickHouse Cloud services require TLS, so use port 8443.</p></div></div><div class="language-python codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> clickhouse_connect</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">client </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> clickhouse_connect</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">get_client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">host</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;HOSTNAME.clickhouse.cloud&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> port</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token number" style="color:rgb(181, 206, 168)">8443</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> username</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;default&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> password</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;your password&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="interact-with-your-database">Interact with your database<a href="#interact-with-your-database" class="hash-link" aria-label="Direct link to Interact with your database" title="Direct link to Interact with your database">​</a></h4><p>To run a ClickHouse SQL command, use the client <code>command</code> method:</p><div class="language-python codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">command</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;CREATE TABLE new_table (key UInt32, value String, metric Float64) ENGINE MergeTree ORDER BY key&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To insert batch data, use the client <code>insert</code> method with a two-dimensional array of rows and values:</p><div class="language-python codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">row1 </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">1000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;String Value 1000&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5.233</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">row2 </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">2000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;String Value 2000&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token number" style="color:rgb(181, 206, 168)">107.04</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">data </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">row1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> row2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">insert</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;new_table&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> column_names</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;key&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;value&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;metric&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To retrieve data using ClickHouse SQL, use the client <code>query</code> method:</p><div class="language-python codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">result </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">query</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;SELECT max(key), avg(metric) FROM new_table&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">result</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">result_rows</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">13</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">2000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token number" style="color:rgb(181, 206, 168)">50.9035</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="clickhouse-connect-driver-api">ClickHouse Connect Driver API<a href="#clickhouse-connect-driver-api" class="hash-link" aria-label="Direct link to ClickHouse Connect Driver API" title="Direct link to ClickHouse Connect Driver API">​</a></h2><p><strong><em>Note:</em></strong> Passing keyword arguments is recommended for most api methods given the number of
possible arguments, many of which are optional.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="client-initialization">Client Initialization<a href="#client-initialization" class="hash-link" aria-label="Direct link to Client Initialization" title="Direct link to Client Initialization">​</a></h3><p>The <code>clickhouse_connect.driver.client</code> class provides the primary interface between a Python application and the
ClickHouse database server. Use the <code>clickhouse_connect.get_client</code> function to obtain a Client instance, which accepts
the following arguments:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="connection-arguments">Connection Arguments<a href="#connection-arguments" class="hash-link" aria-label="Direct link to Connection Arguments" title="Direct link to Connection Arguments">​</a></h4><table><thead><tr><th>Parameter</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>interface</td><td>str</td><td>http</td><td>Must be http or https.</td></tr><tr><td>host</td><td>str</td><td><em>None</em></td><td>The hostname or IP address of the ClickHouse server.  If not set, <code>localhost</code> will be used.</td></tr><tr><td>port</td><td>int</td><td>8123 or 8443</td><td>The ClickHouse HTTP or HTTPS port. If not set will default to 8123, or to 8443 if <em>secure</em>=<em>True</em> or <em>interface</em>=<em>https</em>.</td></tr><tr><td>username</td><td>str</td><td><em>None</em></td><td>The ClickHouse user name. If not set, the <code>default</code> ClickHouse user will be used.</td></tr><tr><td>password</td><td>str</td><td><em>&lt;<!-- -->empty string<!-- -->&gt;</em></td><td>The password for <em>username</em>.</td></tr><tr><td>database</td><td>str</td><td><em>None</em></td><td>The default database for the connection. If not set, ClickHouse Connect will use the default database for <em>username</em>.</td></tr><tr><td>secure</td><td>bool</td><td>False</td><td>Use https/TLS.  This overrides inferred values from the interface or port arguments.</td></tr><tr><td>dsn</td><td>str</td><td><em>None</em></td><td>A string in standard DSN (Data Source Name) format.  Other connection values (such as host or user) will be extracted from this string if not set otherwise.</td></tr><tr><td>compress</td><td>bool or str</td><td>True</td><td>Enable compression for ClickHouse HTTP inserts and query results. See <a href="#compression">Additional Options (Compression)</a></td></tr><tr><td>query_limit</td><td>int</td><td>0 (unlimited)</td><td>Maximum number of rows to return for any <code>query</code> response. Set this to zero to return unlimited rows.  Note that large query limits may result in out of memory exceptions if results are not streamed, as all results are loaded into memory at once.</td></tr><tr><td>query_retries</td><td>int</td><td>2</td><td>Maximum number of retries for a <code>query</code> request. Only &quot;retryable&quot; HTTP responses will be retried. <code>command</code> or <code>insert</code> requests are not automatically retried by the driver to prevent unintended duplicate requests.</td></tr><tr><td>connect_timeout</td><td>int</td><td>10</td><td>HTTP connection timeout in seconds.</td></tr><tr><td>send_receive_timeout</td><td>int</td><td>300</td><td>Send/receive timeout for the HTTP connection in seconds.</td></tr><tr><td>client_name</td><td>str</td><td><em>None</em></td><td>client_name prepended to the HTTP User Agent header. Set this to track client queries in the ClickHouse system.query_log.</td></tr><tr><td>send_progress</td><td>bool</td><td>True</td><td>Deprecated as of v0.5.9, does nothing.</td></tr><tr><td>pool_mgr</td><td>obj</td><td><em>&lt;<!-- -->default PoolManager<!-- -->&gt;</em></td><td>The <code>urllib3</code> library PoolManager to use.   For advanced use cases requiring multiple connection pools to different hosts.</td></tr><tr><td>http_proxy</td><td>str</td><td><em>None</em></td><td>HTTP proxy address (equivalent to setting the HTTP_PROXY environment variable).</td></tr><tr><td>https_proxy</td><td>str</td><td><em>None</em></td><td>HTTPS proxy address (equivalent to setting the HTTPS_PROXY environment variable).</td></tr><tr><td>apply_server_timezone</td><td>bool</td><td>True</td><td>Use server timezone for timezone aware query results.  See <!-- -->[Timezone Precedence]<!-- -->)(#time-zones)</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="httpstls-arguments">HTTPS/TLS Arguments<a href="#httpstls-arguments" class="hash-link" aria-label="Direct link to HTTPS/TLS Arguments" title="Direct link to HTTPS/TLS Arguments">​</a></h4><table><thead><tr><th>Parameter</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>verify</td><td>bool</td><td>True</td><td>Validate the ClickHouse server TLS/SSL certificate (hostname, expiration, etc.) if using HTTPS/TLS.</td></tr><tr><td>ca_cert</td><td>str</td><td><em>None</em></td><td>If <em>verify</em>=<em>True</em>, the file path to Certificate Authority root to validate ClickHouse server certificate, in .pem format. Ignored if verify is False. This is not necessary if the ClickHouse server certificate is a globally trusted root as verified by the operating system.</td></tr><tr><td>client_cert</td><td>str</td><td><em>None</em></td><td>File path to a TLS Client certificate in .pem format (for mutual TLS authentication). The file should contain a full certificate chain, including any intermediate certificates.</td></tr><tr><td>client_cert_key</td><td>str</td><td><em>None</em></td><td>File path to the private key for the Client Certificate. Required if the private key is not included the Client Certificate key file.</td></tr><tr><td>server_host_name</td><td>str</td><td><em>None</em></td><td>The ClickHouse server hostname as identified by the CN or SNI of its TLS certificate.  Set this to avoid SSL errors when connecting through a proxy or tunnel with a different hostname</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="settings-argument">Settings Argument<a href="#settings-argument" class="hash-link" aria-label="Direct link to Settings Argument" title="Direct link to Settings Argument">​</a></h4><p>Finally, the <code>settings</code> argument to <code>get_client</code> is used to pass additional ClickHouse settings to the server for each
client request. Note that
in most cases, users with <em>readonly</em>=<em>1</em> access cannot alter settings sent with a query, so ClickHouse Connect will drop
such settings in the final request and log a warning.
The following settings apply only to HTTP queries/sessions used by ClickHouse Connect, and are not documented as general
ClickHouse settings.</p><table><thead><tr><th>Setting</th><th>Description</th></tr></thead><tbody><tr><td>buffer_size</td><td>Buffer size (in bytes) used by ClickHouse Server before writing to the HTTP channel.</td></tr><tr><td>session_id</td><td>A unique session id to associate related queries on the server. Required for temporary tables.</td></tr><tr><td>compress</td><td>Whether the ClickHouse server should compress the POST response data. This setting should only be used for &quot;raw&quot; queries.</td></tr><tr><td>decompress</td><td>Whether the data sent to ClickHouse server must be decompressed. This setting is should only be used for &quot;raw&quot; inserts.</td></tr><tr><td>quota_key</td><td>The quota key associated with this requests. See the ClickHouse server documentation on quotas.</td></tr><tr><td>session_check</td><td>Used to check the session status.</td></tr><tr><td>session_timeout</td><td>Number of seconds of inactivity before the identified by the session id will timeout and no longer be considered valid. Defaults to 60 seconds.</td></tr><tr><td>wait_end_of_query</td><td>Buffers the entire response on the ClickHouse server. This setting is required to return summary information, and is set for automatically on non-streaming queries.</td></tr></tbody></table><p>For other ClickHouse settings that can be sent with each query,
see <a href="/docs/en/operations/settings/settings">the ClickHouse documentation</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="client-creation-examples">Client Creation Examples<a href="#client-creation-examples" class="hash-link" aria-label="Direct link to Client Creation Examples" title="Direct link to Client Creation Examples">​</a></h4><ul><li>Without any parameters, a ClickHouse Connect client will connect to the default HTTP port on <code>localhost</code> with the
default user and no password:</li></ul><div class="language-python codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> clickhouse_connect</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">client </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> clickhouse_connect</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">get_client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">server_version</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;22.10.1.98&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Connecting to a secure (https) external ClickHouse server</li></ul><div class="language-python codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> clickhouse_connect</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">client </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> clickhouse_connect</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">get_client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">host</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;play.clickhouse.com&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> secure</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token boolean">True</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> port</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token number" style="color:rgb(181, 206, 168)">443</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> user</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;play&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> password</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;clickhouse&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">command</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;SELECT timezone()&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;Etc/UTC&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Connecting with a session id and other custom connection parameters and ClickHouse settings.</li></ul><div class="language-python codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> clickhouse_connect</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">client </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> clickhouse_connect</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">get_client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">host</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;play.clickhouse.com&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                                       user</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;play&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                                       password</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;clickhouse&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                                       port</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token number" style="color:rgb(181, 206, 168)">443</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                                       session_id</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;example_session_1&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                                       connect_timeout</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token number" style="color:rgb(181, 206, 168)">15</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                                       database</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;github&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                                       settings</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;distributed_ddl_task_timeout&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token number" style="color:rgb(181, 206, 168)">300</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">database</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;github&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-method-arguments">Common Method Arguments<a href="#common-method-arguments" class="hash-link" aria-label="Direct link to Common Method Arguments" title="Direct link to Common Method Arguments">​</a></h3><p>Several client methods use one or both of the common <code>parameters</code> and <code>settings</code> arguments. These keyword
arguments are described below.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-argument">Parameters Argument<a href="#parameters-argument" class="hash-link" aria-label="Direct link to Parameters Argument" title="Direct link to Parameters Argument">​</a></h4><p>ClickHouse Connect Client <code>query*</code> and <code>command</code> methods accept an optional <code>parameters</code> keyword argument used for
binding Python expressions to a ClickHouse value expression. Two sorts of binding are available.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="server-side-binding">Server Side Binding<a href="#server-side-binding" class="hash-link" aria-label="Direct link to Server Side Binding" title="Direct link to Server Side Binding">​</a></h5><p>ClickHouse supports <a href="/docs/en/interfaces/cli#cli-queries-with-parameters">server side binding</a>
for most query values,
where the bound value is sent separate from the query as an HTTP query parameter. ClickHouse Connect will add the
appropriate
query parameters if it detects a binding expression of the form {<!-- -->&lt;<!-- -->name<!-- -->&gt;<!-- -->:<!-- -->&lt;<!-- -->datatype<!-- -->&gt;<!-- -->}. For server side
binding,
the <code>parameters</code> argument should be a Python dictionary.</p><ul><li>Server Side Binding with Python Dictionary, DateTime value and string value</li></ul><div class="language-python codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> datetime</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">my_date </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> datetime</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">datetime</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">2022</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">10</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">01</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">15</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">20</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">parameters </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;table&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;my_table&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> v1</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;: my_date, &#x27;</span><span class="token plain">v2</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;: &quot;a string with a single quote&#x27;</span><span class="token plain">&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">query</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;SELECT * FROM {table:Identifier} WHERE date &gt;= {v1:DateTime} AND string ILIKE {v2:String}&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> parameters</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">parameters</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Generates the following query on the server</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># SELECT * FROM my_table WHERE date &gt;= &#x27;2022-10-01 15:20:05&#x27; AND string ILIKE &#x27;a string with a single quote\&#x27;&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="client-side-binding">Client Side Binding<a href="#client-side-binding" class="hash-link" aria-label="Direct link to Client Side Binding" title="Direct link to Client Side Binding">​</a></h5><p>ClickHouse Connect also supports client side parameter binding which can allow more flexibility in generating templated
SQL queries. For client side binding, the <code>parameters</code> argument should be a dictionary or a sequence. Client side
binding
uses the Python <a href="https://docs.python.org/3/library/stdtypes.html#old-string-formatting" target="_blank" rel="noopener noreferrer">&quot;printf&quot; style</a> string
formatting
for parameter substitution.</p><p>Note that unlike server side binding, client side binding doesn&#x27;t work for database identifiers such as database, table,
or column names, since Python style formatting can&#x27;t distinguish between the different types of strings, and they
need to be formatted differently (backticks or double quotes for database identifiers, single quotes for data values).</p><ul><li>Example with Python Dictionary, DateTime value and string escaping</li></ul><div class="language-python codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> datetime</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">my_date </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> datetime</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">datetime</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">2022</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">10</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">01</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">15</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">20</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">parameters </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;v1&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> my_date</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;v2&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;a string with a single quote&#x27;&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">query</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;SELECT * FROM some_table WHERE date &gt;= %(v1)s AND string ILIKE %(v2)s&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> parameters</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">parameters</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Generates the following query:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># SELECT * FROM some_table WHERE date &gt;= &#x27;2022-10-01 15:20:05&#x27; AND string ILIKE &#x27;a string with a single quote\&#x27;&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Example with Python Sequence (Tuple), Float64, and IPv4Address</li></ul><div class="language-python codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> ipaddress</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">parameters </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">35200.44</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> ipaddress</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">IPv4Address</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">0x443d04fe</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">query</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;SELECT * FROM some_table WHERE metric &gt;= %s AND ip_address = %s&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> parameters</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">parameters</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Generates the following query:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># SELECT * FROM some_table WHERE metric &gt;= 35200.44 AND ip_address = &#x27;68.61.4.254&#x27;&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="settings-argument-1">Settings Argument<a href="#settings-argument-1" class="hash-link" aria-label="Direct link to Settings Argument" title="Direct link to Settings Argument">​</a></h4><p>All the core SQL Client ClickHouse database server accept an optional <code>settings</code> keyword argument used for passing
ClickHouse server <a href="/docs/en/operations/settings/settings">user settings</a> for the included SQL
statement. The <code>settings</code> argument should be a dictionary. Each item should be a ClickHouse setting name and its
associated value. Note that values will be converted to strings when sent to the server as query parameters.</p><p>As with client level settings, ClickHouse Connect will drop any settings that the server marks as <em>readonly</em>=<em>1</em>, with
an associated log message. Settings that apply only to queries via the ClickHouse HTTP interface are always valid. Those
settings are described under the <code>get_client</code> <a href="#settings-argument">API</a>.</p><p>Example of using ClickHouse settings:</p><div class="language-python codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">settings </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;merge_tree_min_rows_for_concurrent_read&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">65535</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;session_id&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;session_1234&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;use_skip_indexes&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token boolean">False</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">query</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;SELECT event_type, sum(timeout) FROM event_errors WHERE event_time &gt; &#x27;2022-08-01&#x27;&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> settings</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">settings</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="client-command-method">Client <em>command</em> Method<a href="#client-command-method" class="hash-link" aria-label="Direct link to client-command-method" title="Direct link to client-command-method">​</a></h3><p>Use the <code>Client.command</code> method to send SQL queries to the ClickHouse Server that do not normally return data or return
a simple single value rather than a full dataset. This method takes the following parameters:</p><table><thead><tr><th>Parameter</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>cmd</td><td>str</td><td><em>Required</em></td><td>A ClickHouse SQL statement that returns a single value or a single row of values.</td></tr><tr><td>parameters</td><td>dict or iterable</td><td><em>None</em></td><td>See <a href="#parameters-argument">parameters description</a>.</td></tr><tr><td>data</td><td>str or bytes</td><td><em>None</em></td><td>Optional data to include with the command as the POST body.</td></tr><tr><td>settings</td><td>dict</td><td><em>None</em></td><td>See <a href="#settings-argument">settings description</a>.</td></tr><tr><td>use_database</td><td>bool</td><td>True</td><td>Use the client database (specified when creating the client). False means the command will use the default ClickHouse Server database for the connected user.</td></tr></tbody></table><ul><li><em>command</em> can be used for DDL statements</li></ul><div class="language-python codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">command</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;CREATE TABLE test_command (col_1 String, col_2 DateTime) Engine MergeTree ORDER BY tuple()&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">command</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;SHOW CREATE TABLE test_command&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">6</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;CREATE TABLE default.test_command\\n(\\n    `col_1` String,\\n    `col_2` DateTime\\n)\\nENGINE = MergeTree\\nORDER BY tuple()\\nSETTINGS index_granularity = 8192&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><em>command</em> can also be used for simple queries that return only a single row</li></ul><div class="language-python codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">result </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">command</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;SELECT count() FROM system.tables&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">result</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">7</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">110</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="client-query-method">Client <em>query</em> Method<a href="#client-query-method" class="hash-link" aria-label="Direct link to client-query-method" title="Direct link to client-query-method">​</a></h3><p>The <code>Client.query</code> method is the primary way to retrieve a single &quot;batch&quot; dataset from the ClickHouse Server. It
utilizes the Native
ClickHouse format over HTTP to transmit large datasets (up to approximately one million rows) efficiently. This method
takes the following parameters.</p><table><thead><tr><th>Parameter</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>query</td><td>str</td><td><em>Required</em></td><td>The ClickHouse SQL SELECT or DESCRIBE query.</td></tr><tr><td>parameters</td><td>dict or iterable</td><td><em>None</em></td><td>See <a href="#parameters-argument">parameters description</a>.</td></tr><tr><td>settings</td><td>dict</td><td><em>None</em></td><td>See <a href="#settings-argument">settings description</a>.</td></tr><tr><td>query_formats</td><td>dict</td><td><em>None</em></td><td>Datatype formatting specification for result values. See Advanced Usage (Read Formats)</td></tr><tr><td>column_formats</td><td>dict</td><td><em>None</em></td><td>Datatype formatting per column. See Advanced Usage (Read Formats)</td></tr><tr><td>encoding</td><td>str</td><td><em>None</em></td><td>Encoding used to encode ClickHouse String columns into Python strings.  Python defaults to <code>UTF-8</code> if not set.</td></tr><tr><td>use_none</td><td>bool</td><td>True</td><td>Use Python <em>None</em> type for ClickHouse nulls. If False, use a datatype default (such as 0) for ClickHouse nulls. Note - defaults to False for numpy/Pandas for performance reasons.</td></tr><tr><td>column_oriented</td><td>bool</td><td>False</td><td>Return the results as a sequence of columns rather than a sequence of rows.  Helpful for transforming Python data to other column oriented data formats.</td></tr><tr><td>query_tz</td><td>str</td><td><em>None</em></td><td>A timezone name from the zoneinfo database.  This timezone will be applied to all datetime or Pandas Timestamp objects returned by the query.</td></tr><tr><td>column_tzs</td><td>dict</td><td><em>None</em></td><td>A dictionary of column name to timezone name.  Like <code>query_tz</code>, but allows specifying different timezones for different columns.</td></tr><tr><td>use_na_values</td><td>bool</td><td>True</td><td>Use Pandas missing types such as pandas.NA and pandas.NaT for ClickHouse NULL values.  Only relevant to the <code>query_df</code> and <code>query_df_stream</code> methods.</td></tr><tr><td>external_data</td><td>ExternalData</td><td><em>None</em></td><td>An ExternalData object containing file or binary data to use with the query.  See <a href="#external-data">Advanced Queries (External Data)</a></td></tr><tr><td>context</td><td>QueryContext</td><td><em>None</em></td><td>A reusable QueryContext object can be used to encapsulate the above method arguments. See <a href="#querycontexts">Advanced Queries (QueryContexts)</a></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="the-queryresult-object">The QueryResult Object<a href="#the-queryresult-object" class="hash-link" aria-label="Direct link to The QueryResult Object" title="Direct link to The QueryResult Object">​</a></h4><p>The base <code>query</code> method returns a QueryResult object with the following public properties:</p><ul><li><code>result_rows</code> -- A matrix of the data returned in the form of a Sequence of rows, with each row element being a
sequence of column values.</li><li><code>result_columns</code> -- A matrix of the data returned in the form of a Sequence of columns, with each column element being
a
sequence of the row values for that column</li><li><code>column_names</code> -- A tuple of strings representing the column names in the <code>result_set</code></li><li><code>column_types</code> -- A tuple of ClickHouseType instances representing the ClickHouse data type for each column in
the <code>result_columns</code></li><li><code>query_id</code> -- The ClickHouse query_id (useful for examining the query in the <code>system.query_log</code> table)</li><li><code>summary</code> -- Any data returned by the <code>X-ClickHouse-Summary</code> HTTP response header</li><li><code>first_item</code> -- A convenience property for retrieving the first row of the response as a dictionary (keys are column
names)</li><li><code>first_row</code> -- A convenience property to return the first row of the result</li><li><code>column_block_stream</code> -- A generator of query results in column oriented format. This property should not be
referenced directly (see below).</li><li><code>row_block_stream</code> -- A generator of query results in row oriented format. This property should not be referenced
directly (see below).</li><li><code>rows_stream</code> -- A generator of query results that yields a single row per invocation. This property should not be
referenced directly (see below).</li></ul><p>The <code>*_stream</code> properties return a Python Context that can be used as an iterator for the returned data. They should
only be
accessed indirectly using the Client <code>*_stream</code> methods. In a future release, the QueryResult object returned by the
main Client <code>query</code>
method will have consumed the stream and contain the entire populated <code>result_set</code> to provide a clean separation between
completed, &quot;batch&quot; results retrieved via the Client <code>query</code> method and streaming results retrieved via the
Client <code>query_*_stream</code> methods.</p><p>The complete details of streaming query results (using StreamContext objects) are outlined in
<a href="#streaming-queries">Advanced Queries (Streaming Queries)</a>.</p><p>Note -- streaming behavior from versions v0.5.0-v0.5.3 using the QueryResult object as a Python context is deprecated as
version v0.5.4
and will be removed in a future release. The QueryResult methods <code>stream_column_blocks</code>, <code>stream_row_blocks</code>,
and <code>stream_rows</code>
should not be used and are only included for backward compatibility.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="specialized-client-query-methods">Specialized Client Query Methods<a href="#specialized-client-query-methods" class="hash-link" aria-label="Direct link to Specialized Client Query Methods" title="Direct link to Specialized Client Query Methods">​</a></h3><p>There are three specialized versions of the main <code>query</code> method:</p><ul><li><code>query_np</code> -- This version returns a Numpy Array instead a ClickHouse Connect QueryResult.</li><li><code>query_df</code> -- This version returns a Pandas Dataframe instead of a ClickHouse Connect QueryResult.</li><li><code>query_arrow</code> -- This version returns a PyArrow Table. It utilizes the ClickHouse <code>Arrow</code> format directly, so
it only accepts three arguments in common with the main <code>query method</code>:  <code>query</code>, <code>parameters</code>, and <code>settings</code>. In
addition there is additional argument <code>use_strings</code> which determines whether the Arrow Table will render ClickHouse
String types as strings (if True) or bytes (if False).</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="client-streaming-query-methods">Client Streaming Query Methods<a href="#client-streaming-query-methods" class="hash-link" aria-label="Direct link to Client Streaming Query Methods" title="Direct link to Client Streaming Query Methods">​</a></h3><p>The ClickHouse Connect Client provides multiple methods for retrieving data as a stream (implemented as a Python
generator):</p><ul><li><code>query_column_block_stream</code> -- Returns query data in blocks as a sequence of columns using native Python object</li><li><code>query_column_rows_stream</code> -- Returns query data as a block of rows using native Python object</li><li><code>query_rows_stream</code> -- Returns query data as a sequence of rows using native Python object</li><li><code>query_np_stream</code> -- Returns each ClickHouse block of query data as a Numpy array</li><li><code>query_df_stream</code> -- Returns each ClickHouse Block of query data as a Pandas Dataframe</li></ul><p>Each of these methods returns a <code>ContextStream</code> object that must be opened via a <code>with</code> statement to start consuming the
stream.
See <a href="#streaming-queries">Advanced Queries (Streaming Queries)</a>
for details and examples.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="client-insert-method">Client <em>insert</em> Method<a href="#client-insert-method" class="hash-link" aria-label="Direct link to client-insert-method" title="Direct link to client-insert-method">​</a></h3><p>For the common use case of inserting multiple records into ClickHouse, there is the <code>Client.insert</code> method. It takes the
following parameters:</p><table><thead><tr><th>Parameter</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>table</td><td>str</td><td><em>Required</em></td><td>The ClickHouse table to insert into. The full table name (including database) is permitted.</td></tr><tr><td>data</td><td>Sequence of Sequences</td><td><em>Required</em></td><td>The matrix of data to insert, either a Sequence of rows, each of which is a sequence of column values, or a Sequence of columns, each of which is a sequence of row values.</td></tr><tr><td>column_names</td><td>Sequence of str, or str</td><td>&#x27;*&#x27;</td><td>A list of column_names for the data matrix. If &#x27;*&#x27; is used instead, ClickHouse Connect will execute a &quot;pre-query&quot; to retrieve all of the column names for the table.</td></tr><tr><td>database</td><td>str</td><td>&#x27;&#x27;</td><td>The target database of the insert. If not specified, the database for the client will be assumed.</td></tr><tr><td>column_types</td><td>Sequence of ClickHouseType</td><td><em>None</em></td><td>A list of ClickHouseType instances. If neither column_types or column_type_names is specified, ClickHouse Connect will execute a &quot;pre-query&quot; to retrieve all the column types for the table.</td></tr><tr><td>column_type_names</td><td>Sequence of ClickHouse type names</td><td><em>None</em></td><td>A list of ClickHouse datatype names. If neither column_types or column_type_names is specified, ClickHouse Connect will execute a &quot;pre-query&quot; to retrieve all the column types for the table.</td></tr><tr><td>column_oriented</td><td>bool</td><td>False</td><td>If True, the <code>data</code> argument is assume to be a Sequence of columns (and no &quot;pivot&quot; will be necessary to insert the data). Otherwise <code>data</code> is interpreted as a Sequence of rows.</td></tr><tr><td>settings</td><td>dict</td><td><em>None</em></td><td>See <a href="#settings-argument">settings description</a>.</td></tr><tr><td>insert_context</td><td>InsertContext</td><td><em>None</em></td><td>A reusable InsertContext object can be used to encapsulate the above method arguments.  See <a href="#insertcontexts">Advanced Inserts (InsertContexts)</a></td></tr></tbody></table><p>This method does not return a value. An exception will be raised if the insert fails for any reason.</p><p>There are two specialized versions of the main <code>query</code> method:</p><ul><li><code>insert_df</code> -- Instead of Python Sequence of Sequences <code>data</code> argument, the second parameter of this method requires
a <code>df</code>
argument that must be a Pandas Dataframe instance. ClickHouse Connect automatically processes the Dataframe as a
column oriented datasource,
so the <code>column_oriented</code> parameter is not required or available.</li><li><code>insert_arrow</code> -- Instead of a Python Sequence of Sequences <code>data</code> argument, this method requires an <code>arrow_table</code>.
ClickHouse
Connect passes the Arrow table unmodified to the ClickHouse server for processing, so only the <code>database</code>
and <code>settings</code> arguments
are available in addition to <code>table</code> and <code>arrow_table</code>.</li></ul><p><em>Note:</em> A Numpy array is a valid Sequence of Sequences and can be used as the <code>data</code> argument to the main <code>insert</code>
method, so a specialized
method is not required.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="file-inserts">File Inserts<a href="#file-inserts" class="hash-link" aria-label="Direct link to File Inserts" title="Direct link to File Inserts">​</a></h3><p>The <code>clickhouse_connect.driver.tools</code> includes the <code>insert_file</code> method that allows inserting data directly from the
file system
into an existing ClickHouse table. Parsing is delegated to the ClickHouse server.  <code>insert_file</code> accepts the following
parameters:</p><table><thead><tr><th>Parameter</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>client</td><td>Client</td><td><em>Required</em></td><td>The <code>driver.Client</code> used to perform the insert</td></tr><tr><td>table</td><td>str</td><td><em>Required</em></td><td>The ClickHouse table to insert into. The full table name (including database) is permitted.</td></tr><tr><td>file_path</td><td>str</td><td><em>Required</em></td><td>The native file system path to the data file</td></tr><tr><td>fmt</td><td>str</td><td>CSV, CSVWithNames</td><td>The ClickHouse Input Format of the file.  CSVWithNames is assumed if <code>column_names</code> is not provided</td></tr><tr><td>column_names</td><td>Sequence of str</td><td><em>None</em></td><td>A list of column_names in the data file.  Not required for formats that include column names</td></tr><tr><td>database</td><td>str</td><td><em>None</em></td><td>Database of the table.  Ignored if the table is fully qualified.  If not specified, the insert will use the client database</td></tr><tr><td>settings</td><td>dict</td><td><em>None</em></td><td>See <a href="#settings-argument">settings description</a>.</td></tr></tbody></table><p>For files with inconsistent data or date/time values in an unusual format, settings that apply to data imports (such as
<code>input_format_allow_errors_num</code> and <code>input_format_allow_errors_num</code>) are recognized for this method.</p><div class="language-python codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> clickhouse_connect</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">from</span><span class="token plain"> clickhouse_connect</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">driver</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">tools </span><span class="token keyword" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> insert_file</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">client </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> clickhouse_connect</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">get_client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">insert_file</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;example_table&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;my_data.csv&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            settings</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;input_format_allow_errors_ratio&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">.2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                      </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;input_format_allow_errors_num&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="raw-api">Raw API<a href="#raw-api" class="hash-link" aria-label="Direct link to Raw API" title="Direct link to Raw API">​</a></h3><p>For use cases which do not require transformation between ClickHouse data and native or third party data types and
structures,
the ClickHouse Connect client provides two methods for direct usage of the ClickHouse connection.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="client-raw_query-method">Client <em>raw_query</em> Method<a href="#client-raw_query-method" class="hash-link" aria-label="Direct link to client-raw_query-method" title="Direct link to client-raw_query-method">​</a></h4><p>The <code>Client.raw_query</code> method allows direct usage of the ClickHouse HTTP query interface using the client connection.
The
return value is an unprocessed <code>bytes</code> object. It offers a convenient wrapper with parameter binding, error handling,
retries, and settings management using a minimal interface:</p><table><thead><tr><th>Parameter</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>query</td><td>str</td><td><em>Required</em></td><td>Any valid ClickHouse query</td></tr><tr><td>parameters</td><td>dict or iterable</td><td><em>None</em></td><td>See <a href="#parameters-argument">parameters description</a>.</td></tr><tr><td>settings</td><td>dict</td><td><em>None</em></td><td>See <a href="#settings-argument">settings description</a>.</td></tr><tr><td>fmt</td><td>str</td><td><em>None</em></td><td>ClickHouse Output Format for the resulting bytes.  (ClickHouse uses TSV if not specified)</td></tr><tr><td>use_database</td><td>bool</td><td>True</td><td>Use the clickhouse-connect Client assigned database for the query context</td></tr></tbody></table><p>It is the caller&#x27;s responsibility to handle the resulting <code>bytes</code> object. Note that the <code>Client.query_arrow</code> is just a
thin wrapper
around this method using the ClickHouse <code>Arrow</code> output format.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="client-raw_insert-method">Client <em>raw_insert</em> Method<a href="#client-raw_insert-method" class="hash-link" aria-label="Direct link to client-raw_insert-method" title="Direct link to client-raw_insert-method">​</a></h4><p>The <code>Client.raw_insert</code> method allows direct inserts of <code>bytes</code> objects or <code>bytes</code> object generators using the client
connection. Because it does no processing of the insert payload, it is highly performant. The method provides options
to specify settings and insert format:</p><table><thead><tr><th>Parameter</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>table</td><td>str</td><td><em>Required</em></td><td>Either the simple or database qualified table name</td></tr><tr><td>column_names</td><td>Sequence<!-- -->[str]</td><td><em>None</em></td><td>Column names for the insert block.  Required if the <code>fmt</code> parameter does not include names</td></tr><tr><td>insert_block</td><td>str, bytes, Generator<!-- -->[bytes]<!-- -->, BinaryIO</td><td><em>Required</em></td><td>Data to insert.  Strings will be encoding with the client encoding.</td></tr><tr><td>settings</td><td>dict</td><td><em>None</em></td><td>See <a href="#settings-argument">settings description</a>.</td></tr><tr><td>fmt</td><td>str</td><td><em>None</em></td><td>ClickHouse Input Format of the <code>insert_block</code> bytes.  (ClickHouse uses TSV if not specified)</td></tr></tbody></table><p>It is the caller&#x27;s responsibility that the <code>insert_block</code> is in the specified format. ClickHouse Connect uses these raw
inserts for file uploads and PyArrow Tables, delegating parsing to the ClickHouse server.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="querying-data-with-clickhouse-connect--advanced-usage">Querying Data with ClickHouse Connect:  Advanced Usage<a href="#querying-data-with-clickhouse-connect--advanced-usage" class="hash-link" aria-label="Direct link to Querying Data with ClickHouse Connect:  Advanced Usage" title="Direct link to Querying Data with ClickHouse Connect:  Advanced Usage">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="querycontexts">QueryContexts<a href="#querycontexts" class="hash-link" aria-label="Direct link to QueryContexts" title="Direct link to QueryContexts">​</a></h3><p>ClickHouse Connect executes standard queries within a QueryContext.  The QueryContext contains the key structures that are used
to build queries against the ClickHouse database, and the configuration used to process the result into a QueryResult or other
response data structure.  That includes the query itself, parameters, settings, read formats, and other properties.</p><p>A QueryContext can be acquired using the client <code>create_query_context</code> method.  This method takes the same parameters
as the core query method.  This query context can then be passed to the <code>query</code>, <code>query_df</code>, or <code>query_np</code> methods as the <code>context</code>
keyword argument instead of any or all of the other arguments to those methods.  Note that additional arguments specified for the
method call will override any properties of QueryContext.</p><p>The clearest use case for a QueryContext is to send the same query with different binding parameter values.  All parameter values can
be updated by calling the <code>QueryContext.set_parameters</code> method with a dictionary, or any single value can be updated by calling
<code>QueryContext.set_parameter</code> with the desired <code>key</code>, <code>value</code> pair.</p><div class="language-python codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">create_query_context</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">query</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;SELECT value1, value2 FROM data_table WHERE key = {k:Int32}&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                            parameters</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;k&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                            column_oriented</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token boolean">True</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">result </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">query</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">context</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">qc</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">assert</span><span class="token plain"> result</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">result_set</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">==</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;second_value2&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">qc</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">set_parameter</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;k&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">result </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> test_client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">query</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">context</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">qc</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">assert</span><span class="token plain"> result</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">result_set</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">==</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;first_value2&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that QueryContexts are not thread safe, but a copy can be obtained in a multithreaded environment by calling the
<code>QueryContext.updated_copy</code> method.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="streaming-queries">Streaming Queries<a href="#streaming-queries" class="hash-link" aria-label="Direct link to Streaming Queries" title="Direct link to Streaming Queries">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="data-blocks">Data Blocks<a href="#data-blocks" class="hash-link" aria-label="Direct link to Data Blocks" title="Direct link to Data Blocks">​</a></h4><p>ClickHouse Connect processes all data from the primary <code>query</code> method as a stream of blocks received from the ClickHouse server.
These blocks are transmitted in the custom &quot;Native&quot; format to and from ClickHouse. A &quot;block&quot; is simply a sequence of columns of binary data,
where each column contains an equal number of data values of the specified data type. (As a columnar database, ClickHouse stores this data
in a similar form.)  The size of a block returned from a query is governed by two user settings that can be set at several levels
(user profile, user, session, or query).  They are:</p><ul><li><a href="/docs/en/operations/settings/settings#setting-max_block_size">max_block_size</a> -- Limit on the size of the block in rows.  Default 65536.</li><li><a href="/docs/en/operations/settings/settings#preferred-block-size-bytes">preferred_block_size_bytes</a> -- Soft limit on the size of the block in bytes.  Default 1,000,0000.</li></ul><p>Regardless of the <code>preferred_block_size_setting</code>, each block will never be more than <code>max_block_size</code> rows.  Depending on the
type of query, the actual blocks returned can be of any size.  For example, queries to a distributed table covering many shards
may contain smaller blocks retrieved directly from each shard.</p><p>When using one of the Client <code>query_*_stream</code> methods, results are returned on a block by block basis.  ClickHouse Connect only
loads a single block at a time.  This allows processing large amounts of data without the need to load all of a large result
set into memory.  Note the application should be prepared to process any number of blocks and the exact size of each block
cannot be controlled.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="streamcontexts">StreamContexts<a href="#streamcontexts" class="hash-link" aria-label="Direct link to StreamContexts" title="Direct link to StreamContexts">​</a></h4><p>Each of the <code>query_*_stream</code> methods (like <code>query_row_block_stream</code>) returns a ClickHouse <code>StreamContext</code> object, which
is a combined Python context/generator.  This is the basic usage:</p><div class="language-python codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">with</span><span class="token plain"> client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">query_row_block_stream</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;SELECT pickup, dropoff, pickup_longitude, pickup_latitude FROM taxi_trips&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">as</span><span class="token plain"> stream</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> block </span><span class="token keyword" style="color:rgb(86, 156, 214)">in</span><span class="token plain"> stream</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> row </span><span class="token keyword" style="color:rgb(86, 156, 214)">in</span><span class="token plain"> block</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">do something </span><span class="token keyword" style="color:rgb(86, 156, 214)">with</span><span class="token plain"> each row of Python trip data</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that trying to use a StreamContext without a <code>with</code> statement will raise an error.  The use of a Python context ensures
that the stream (in this case, a streaming HTTP response) will be properly closed even if not all the data is consumed and/or
an exception is raised during processing.  Also, StreamContexts can only be used once to consume the stream.  Trying to use a StreamContext
after it has exited will produce a <code>StreamClosedError</code>.</p><p>You can use the <code>source</code> property of the StreamContext to access the parent <code>QueryResult</code> object, which includes column names
and types.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="stream-types">Stream Types<a href="#stream-types" class="hash-link" aria-label="Direct link to Stream Types" title="Direct link to Stream Types">​</a></h4><p>The <code>query_column_block_stream</code> method returns the block as a sequence of column data stored as native Python data types.  Using
the above <code>taxi_trips</code> queries, the data returned will be a list where each element of the list is another list (or tuple)
containing all the data for the  associated column.  So <code>block[0]</code> would be a tuple containing nothing but strings.  Column
oriented formats are most used for doing aggregate operations for all the values in a column, like adding up total fairs.</p><p>The <code>query_row_block_stream</code> method returns the block as a sequence of rows like a traditional relational database.  For taxi
trips, the data returned will be a list where each element of the list is another list representing a row of data.  So <code>block[0]</code>
would contain all the fields (in order) for the first taxi trip , <code>block[1]</code> would contain a row for all the fields in
the second taxi trip, and so on.  Row oriented results are normally used for display or transformation processes.</p><p>The <code>query_row_stream</code> is a convenience method that automatically moves to the next block when iterating through the stream.
Otherwise, it is identical to <code>query_row_block_stream</code>.</p><p>The <code>query_np_stream</code> method return each block as a two-dimensional Numpy Array.  Internally Numpy arrays are (usually) stored as columns,
so no distinct row or column methods are needed.  The &quot;shape&quot; of the numpy array will be expressed as (columns, rows).  The Numpy
library provides many methods of manipulating numpy arrays.  Note that if all columns in the query share the same Numpy dtype,
the returned numpy array will only have one dtype as well, and can be reshaped/rotated without actually changing its internal structure.</p><p>Finally, the <code>query_df_stream</code> method returns each ClickHouse Block as a two-dimensional Pandas Dataframe.  Here&#x27;s an example
which shows that the StreamContext object can be used as a context in a deferred fashion (but only once).</p><div class="language-python codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">df_stream </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">query_df_stream</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;SELECT * FROM hits&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">column_names </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> df_stream</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">source</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">column_names</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">with</span><span class="token plain"> df_stream</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> df </span><span class="token keyword" style="color:rgb(86, 156, 214)">in</span><span class="token plain"> df_stream</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">do something </span><span class="token keyword" style="color:rgb(86, 156, 214)">with</span><span class="token plain"> the pandas DataFrame</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="read-formats">Read Formats<a href="#read-formats" class="hash-link" aria-label="Direct link to Read Formats" title="Direct link to Read Formats">​</a></h3><p>Read formats control the data types of values returned from the client <code>query</code>, <code>query_np</code>, and <code>query_df</code> methods.  (The <code>raw_query</code>
and <code>query_arrow</code> do not modify incoming data from ClickHouse, so format control does not apply.)  For example, if the read format
for a UUID is changed from the default <code>native</code> format to the alternative <code>string</code> format, a ClickHouse query of <code>UUID</code> column will be
returned as string values (using the standard 8-4-4-4-12 RFC 1422 format) instead of Python UUID objects.</p><p>The &quot;data type&quot; argument for any formatting function can include wildcards.  The format is a single lower case string.</p><p>Read formats can be set at several levels:</p><ul><li>Globally, using the methods defined in the <code>clickhouse_connect.datatypes.format</code> package.  This will control the format of the
configured datatype for all queries.</li></ul><div class="language-python codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">from</span><span class="token plain"> clickhouse_connect</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">datatypes</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token builtin" style="color:rgb(86, 156, 214)">format</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> set_read_format</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Return both IPv6 and IPv4 values as strings</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">set_read_format</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;IPv*&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;string&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)"># Return all Date types as the underlying epoch second or epoch day</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">set_read_format</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;Date*&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;int&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>For an entire query, using the optional <code>query_formats</code> dictionary argument.  In that case any column (or subcolumn) of the
specified data types(s) will use the configured format.</li></ul><div class="language-python codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)"># Return any UUID column as a string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">query</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;SELECT user_id, user_uuid, device_uuid from users&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> query_formats</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;UUID&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;string&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>For the values in a specific column, using the optional <code>column_formats</code> dictionary argument.  The key is the column named as
return by ClickHouse, and format for the data column or a second level &quot;format&quot; dictionary of a ClickHouse type name and a value
of query formats.  This secondary dictionary can be used for nested column types such as Tuples or Maps.</li></ul><div class="language-python codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)"># Return IPv6 values in the `dev_address` column as strings</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">query</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;SELECT device_id, dev_address, gw_address from devices&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> column_formats</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;dev_address&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;string&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="read-format-options-python-types">Read Format Options (Python Types)<a href="#read-format-options-python-types" class="hash-link" aria-label="Direct link to Read Format Options (Python Types)" title="Direct link to Read Format Options (Python Types)">​</a></h4><table><thead><tr><th>ClickHouse Type</th><th>Native Python Type</th><th>Read Formats</th><th>Comments</th></tr></thead><tbody><tr><td>Int<!-- -->[8-64]<!-- -->, UInt<!-- -->[8-32]</td><td>int</td><td>-</td><td></td></tr><tr><td>UInt64</td><td>int</td><td>signed</td><td>Superset does not currently handle large unsigned UInt64 values</td></tr><tr><td>[U]<!-- -->Int<!-- -->[128,256]</td><td>int</td><td>string</td><td>Pandas and Numpy int values are 64 bits maximum, so these can be returned as strings</td></tr><tr><td>Float32</td><td>float</td><td>-</td><td>All Python floats are 64 bits internally</td></tr><tr><td>Float64</td><td>float</td><td>-</td><td></td></tr><tr><td>Decimal</td><td>decimal.Decimal</td><td>-</td><td></td></tr><tr><td>String</td><td>string</td><td>bytes</td><td>ClickHouse String columns have no inherent encoding, so they are also used for variable length binary data</td></tr><tr><td>FixedString</td><td>bytes</td><td>string</td><td>FixedStrings are fixed size byte arrays, but sometimes are treated as Python strings</td></tr><tr><td>Enum<!-- -->[8,16]</td><td>string</td><td>string, int</td><td>Python enums don&#x27;t accept empty strings, so all enums are rendered as either strings or the underlying int value.</td></tr><tr><td>Date</td><td>datetime.date</td><td>int</td><td>ClickHouse stores Dates as days since 01/01/1970.  This value is available as an int</td></tr><tr><td>Date32</td><td>datetime.date</td><td>int</td><td>Same as Date, but for a wider range of dates</td></tr><tr><td>DateTime</td><td>datetime.datetime</td><td>int</td><td>ClickHouse stores DateTime in epoch seconds.  This value is available as an int</td></tr><tr><td>DateTime64</td><td>datetime.datetime</td><td>int</td><td>Python datetime.datetime is limited to microsecond precision. The raw 64 bit int value is available</td></tr><tr><td>IPv4</td><td>ipaddress.IPv4Address</td><td>string</td><td>IP addresses can be read as strings and properly formatted strings can be inserted as IP addresses</td></tr><tr><td>IPv6</td><td>ipaddress.IPv6Address</td><td>string</td><td>IP addresses can be read as strings and properly formatted can be inserted as IP addresses</td></tr><tr><td>Tuple</td><td>dict or tuple</td><td>tuple, json</td><td>Named tuples returned as dictionaries by default.  Named tuples can also be returned as JSON strings</td></tr><tr><td>Map</td><td>dict</td><td>-</td><td></td></tr><tr><td>Nested</td><td>Sequence<!-- -->[dict]</td><td>-</td><td></td></tr><tr><td>UUID</td><td>uuid.UUID</td><td>string</td><td>UUIDs can be read as strings formatted as per RFC 4122</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="external-data">External Data<a href="#external-data" class="hash-link" aria-label="Direct link to External Data" title="Direct link to External Data">​</a></h3><p>ClickHouse queries can accept external data in any ClickHouse format.  This binary data is sent along with the query string to be used to process the data.  Details of
the External Data feature are <a href="/docs/en/engines/table-engines/special/external-data">here</a>.  The client <code>query*</code> methods accept an optional <code>external_data</code> parameter
to take advantage of this feature.  The value for the <code>external_data</code> parameter should be a <code>clickhouse_connect.driver.external.ExternalData</code> object.  The constructor
for that object accepts the follow arguments:</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>file_path</td><td>str</td><td>Path to a file on the local system path to read the external data from.  Either <code>file_path</code> or <code>data</code> is required</td></tr><tr><td>file_name</td><td>str</td><td>The name of the external data &quot;file&quot;.  If not provided, will be determined from the <code>file_path</code> (without extensions)</td></tr><tr><td>data</td><td>bytes</td><td>The external data in binary form (instead of being read from a file).  Either <code>data</code> or <code>file_path</code> is required</td></tr><tr><td>fmt</td><td>str</td><td>The ClickHouse <a href="/docs/en/sql-reference/formats">Input Format</a> of the data.  Defaults to <code>TSV</code></td></tr><tr><td>types</td><td>str or seq of str</td><td>A list of column data types in the external data.  If a string, types should be separated by commas.  Either <code>types</code> or <code>structure</code> is required</td></tr><tr><td>structure</td><td>str or seq of str</td><td>A list of column name + data type in the data (see examples).  Either <code>structure</code> or <code>types</code> is required</td></tr><tr><td>mime_type</td><td>str</td><td>Optional MIME type of the file data.  Currently ClickHouse ignores this HTTP subheader</td></tr></tbody></table><p>To send a query with an external CSV file containing &quot;movie&quot; data, and combine that data with an <code>directors</code> table already present on the ClickHouse server:</p><div class="language-python codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> clickhouse_connect</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">from</span><span class="token plain"> clickhouse_connect</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">driver</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">external </span><span class="token keyword" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> ExternalData</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">client </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> clickhouse_connect</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">get_client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">ext_data </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> ExternalData</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">file_path</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;/data/movies.csv&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                        fmt</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;CSV&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                        structure</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;movie String&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;year UInt16&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;rating Decimal32(3)&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;director String&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">result </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">query</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;SELECT name, avg(rating) FROM directors INNER JOIN movies ON directors.name = movies.director GROUP BY directors.name&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                      external_data</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">ext_data</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">result_rows</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Additional external data files can be added to the initial ExternalData object using the <code>add_file</code> method, which takes the same parameters
as the constructor.  For HTTP, all external data is transmitted as part of a <code>multi-part/form-data</code> file upload.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="time-zones">Time Zones<a href="#time-zones" class="hash-link" aria-label="Direct link to Time Zones" title="Direct link to Time Zones">​</a></h3><p>There are multiple mechanisms for applying a time zone to ClickHouse DateTime and DateTime64 values.  Internally, the ClickHouse server always stores any DateTime or DateTime64
object as a time zone naive number representing seconds since the epoch, 1970-01-01 00:00:00 UTC time.  For DateTime64 values, the representation can be milliseconds, microseconds,
or nanoseconds since the epoch, depending on precision.  As a result, the application of any time zone information always occurs on the client side.  Note that this involves meaningful
extra calculation, so in performance critical applications it is recommended to treat DateTime types as epoch timestamps except for user display and conversion (Pandas Timestamps,
for example, are always a 64-bit integer representing epoch nanoseconds to improve performance).</p><p>When using time zone aware data types in queries - in particular the Python <code>datetime.datetime</code> object -- <code>clickhouse-connect</code> applies a client side time zone using the following
precedence rules:</p><ol><li>If the query method parameter <code>client_tzs</code> is specified for the query, the specific column time zone is applied</li><li>If the ClickHouse column has timezone metadata (i.e., it is a type like DateTime64(3, &#x27;America/Denver&#x27;)), the ClickHouse column timezone is applied.  (Note this
timezone metadata is not available to clickhouse-connect for DateTime columns previous to ClickHouse version 23.2)</li><li>If the query method parameter <code>query_tz</code> is specified for the query, the &quot;query timezone&quot; is applied.</li><li>If a timezone setting is applied to the query or session, that timezone is applied.  (This functionality is not yet released in the ClickHouse Server)</li><li>Finally, if the client <code>apply_server_timezone</code> parameter has been set to True (the default), the ClickHouse server timezone is applied.</li></ol><p>Note that if the applied timezone based on these rules is UTC, <code>clickhouse-connect</code> will <em>always</em> return a time zone naive Python <code>datetime.datetime</code> object.  Additional timezone
information can then be added to this timezone naive object by the application code if desired.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="inserting-data-with-clickhouse-connect--advanced-usage">Inserting Data with ClickHouse Connect:  Advanced Usage<a href="#inserting-data-with-clickhouse-connect--advanced-usage" class="hash-link" aria-label="Direct link to Inserting Data with ClickHouse Connect:  Advanced Usage" title="Direct link to Inserting Data with ClickHouse Connect:  Advanced Usage">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="insertcontexts">InsertContexts<a href="#insertcontexts" class="hash-link" aria-label="Direct link to InsertContexts" title="Direct link to InsertContexts">​</a></h3><p>ClickHouse Connect executes all inserts within an InsertContext.  The InsertContext includes  all the values sent as arguments to
the client <code>insert</code> method.  In addition, when an InsertContext is originally constructed, ClickHouse Connect retrieves the data types
for the insert columns required for efficient Native format inserts.  By reusing the  InsertContext for multiple inserts, this &quot;pre-query&quot;
is avoided and inserts are executed more quickly and efficiently.</p><p>An InsertContext can be acquired using the client <code>get_insert_context</code> method.  The method takes the same arguments as
the <code>insert</code> function.  Note that only the <code>data</code> property of InsertContexts should be modified for reuse.  This is consistent
with its intended purpose of providing a reusable object for repeated inserts of new data to the same table.</p><div class="language-python codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">test_data </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;v1&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;v2&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;v3&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;v4&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">ic </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> test_client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">create_insert_context</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">table</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;test_table&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> data</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;test_data&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">insert</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">context</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">ic</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">assert</span><span class="token plain"> client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">command</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;SELECT count() FROM test_table&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">==</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">new_data </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;v5&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;v6&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">4</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;v7&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;v8&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">ic</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">data </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> new_data</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">insert</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">context</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain">ic</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">qr </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> test_client</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">query</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;SELECT * FROM test_table ORDER BY key DESC&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">assert</span><span class="token plain"> qr</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">row_count </span><span class="token operator" style="color:rgb(212, 212, 212)">==</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">assert</span><span class="token plain"> qr</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">==</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>InsertContexts include mutable state that is updated during the insert process, so they are not thread safe.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="write-formats">Write Formats<a href="#write-formats" class="hash-link" aria-label="Direct link to Write Formats" title="Direct link to Write Formats">​</a></h3><p>Write formats are currently implemented for limited number of types.  In most cases ClickHouse Connect will attempt to
automatically determine the correct write format for a column by checking the type of the first (non-null) data value.
For example, if inserting into a DateTime column, and the first insert value of the column is a Python integer, ClickHouse
Connect will directly insert the integer value under the assumption that it&#x27;s actually an epoch second.</p><p>In most cases, it is unnecessary to override the write format for a data type, but the associated methods in the
<code>clickhouse_connect.datatypes.format</code> package can be used to do so at a global level.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="write-format-options">Write Format Options<a href="#write-format-options" class="hash-link" aria-label="Direct link to Write Format Options" title="Direct link to Write Format Options">​</a></h4><table><thead><tr><th>ClickHouse Type</th><th>Native Python Type</th><th>Write Formats</th><th>Comments</th></tr></thead><tbody><tr><td>Int<!-- -->[8-64]<!-- -->, UInt<!-- -->[8-32]</td><td>int</td><td>-</td><td></td></tr><tr><td>UInt64</td><td>int</td><td></td><td></td></tr><tr><td>[U]<!-- -->Int<!-- -->[128,256]</td><td>int</td><td></td><td></td></tr><tr><td>Float32</td><td>float</td><td></td><td></td></tr><tr><td>Float64</td><td>float</td><td></td><td></td></tr><tr><td>Decimal</td><td>decimal.Decimal</td><td></td><td></td></tr><tr><td>String</td><td>string</td><td></td><td></td></tr><tr><td>FixedString</td><td>bytes</td><td>string</td><td>If inserted as a string, additional bytes will be set to zeros</td></tr><tr><td>Enum<!-- -->[8,16]</td><td>string</td><td></td><td></td></tr><tr><td>Date</td><td>datetime.date</td><td>int</td><td>ClickHouse stores Dates as days since 01/01/1970.  int types will be assumed to be this &quot;epoch date&quot; value</td></tr><tr><td>Date32</td><td>datetime.date</td><td>int</td><td>Same as Date, but for a wider range of dates</td></tr><tr><td>DateTime</td><td>datetime.datetime</td><td>int</td><td>ClickHouse stores DateTime in epoch seconds.  int types will be assumed to be this &quot;epoch second&quot; value</td></tr><tr><td>DateTime64</td><td>datetime.datetime</td><td>int</td><td>Python datetime.datetime is limited to microsecond precision. The raw 64 bit int value is available</td></tr><tr><td>IPv4</td><td>ipaddress.IPv4Address</td><td>string</td><td>Properly formatted strings can be inserted as IPv4 addresses</td></tr><tr><td>IPv6</td><td>ipaddress.IPv6Address</td><td>string</td><td>Properly formatted strings can be inserted as IPv6 addresses</td></tr><tr><td>Tuple</td><td>dict or tuple</td><td></td><td></td></tr><tr><td>Map</td><td>dict</td><td></td><td></td></tr><tr><td>Nested</td><td>Sequence<!-- -->[dict]</td><td></td><td></td></tr><tr><td>JSON/Object(&#x27;json&#x27;)</td><td>dict</td><td>string</td><td>Either dictionaries or JSON strings can be inserted into JSON Columns.</td></tr><tr><td>UUID</td><td>uuid.UUID</td><td>string</td><td>Properly formatted strings can be inserted as ClickHouse UUIDs</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-options">Additional Options<a href="#additional-options" class="hash-link" aria-label="Direct link to Additional Options" title="Direct link to Additional Options">​</a></h2><p>ClickHouse Connect provides a number of additional options for advanced use cases</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="global-settings">Global Settings<a href="#global-settings" class="hash-link" aria-label="Direct link to Global Settings" title="Direct link to Global Settings">​</a></h3><p>There are a small number of settings that control ClickHouse Connect behavior globally.  They are accessed from the top
level <code>common</code> package:</p><div class="language-python codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">from</span><span class="token plain"> clickhouse_connect </span><span class="token keyword" style="color:rgb(86, 156, 214)">import</span><span class="token plain"> common</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">common</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">set_setting</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;autogenerate_session_id&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token boolean">False</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">common</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">get_setting</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;invalid_setting_action&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;drop&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Four global settings are currently defined:</p><table><thead><tr><th>Setting Name</th><th>Default</th><th>Options</th><th>Description</th></tr></thead><tbody><tr><td>autogenerate_session_id</td><td>True</td><td>True, False</td><td>Autogenerate a new UUID(1) session id (if not provided) for each client session.  If no session id is provided (either at the client or query level, ClickHouse will generate random internal id for each query</td></tr><tr><td>invalid_setting_action</td><td>&#x27;error&#x27;</td><td>&#x27;drop&#x27;, &#x27;send&#x27;, &#x27;error&#x27;</td><td>Action to take when an invalid or readonly setting is provided (either for the client session or query).  If <code>drop</code>, the setting will be ignored, if <code>send</code>, the setting will be sent to ClickHouse, if <code>error</code> a client side ProgrammingError will be raised</td></tr><tr><td>dict_parameter_format</td><td>&#x27;json&#x27;</td><td>&#x27;json&#x27;, &#x27;map&#x27;</td><td>This controls whether parameterized queries convert a Python dictionary to JSON or ClickHouse Map syntax. <code>json</code> should be used for inserts into JSON columns, <code>map</code> for ClickHouse Map columns</td></tr><tr><td>product_name</td><td></td><td></td><td>A string that is passed with the query to clickhouse for tracking the app using ClickHouse Connect.  Should be in the form <!-- -->&lt;<!-- -->product name;&amp;gl/<!-- -->&lt;<!-- -->product version<!-- -->&gt;</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="compression">Compression<a href="#compression" class="hash-link" aria-label="Direct link to Compression" title="Direct link to Compression">​</a></h3><p>ClickHouse Connect supports lz4, zstd, brotli, and gzip compression for both query results and inserts.  Always keep in mind
that using compression usually involves a tradeoff between network bandwidth/transfer speed against CPU usage (both on the
client and the server.)</p><p>To receive compressed data, the ClickHouse server <code>enable_http_compression</code> must be set to 1, or the user must have
permission to change the setting on a &quot;per query&quot; basis.</p><p>Compression is controlled by the <code>compress</code> parameter when calling the <code>clickhouse_connect.get_client</code> factory method.
By default, <code>compress</code> is set to <code>True</code>, which will trigger the default compression settings.  For queries executed
with the <code>query</code>, <code>query_np</code>, and <code>query_df</code> client methods,  ClickHouse Connect will add the <code>Accept-Encoding</code> header with
the <code>lz4</code>, <code>zstd</code>, <code>br</code> (brotli, if the brotli library is installed), <code>gzip</code>, and <code>deflate</code> encodings to queries executed
with the <code>query</code> client method (and indirectly, <code>query_np</code> and <code>query_df</code>.  (For the majority of requests the ClickHouse
server will return with a <code>zstd</code> compressed payload.)  For inserts, by default ClickHouse Connect will compress insert
blocks with <code>lz4</code> compression, and send the <code>Content-Encoding: lz4</code> HTTP header.</p><p>The <code>get_client</code> <code>compress</code> parameter can also be set to a specific compression method, one of <code>lz4</code>, <code>zstd</code>, <code>br</code>, or
<code>gzip</code>.  That method will then be used for both inserts and query results (if supported by the ClickHouse server.)  The required
<code>zstd</code> and <code>lz4</code> compression libraries are now installed by default with ClickHouse Connect.  If <code>br</code>/brotli is specified,
the brotli library must be installed separately.</p><p>Note that the <code>raw*</code> client methods don&#x27;t use the compression specified by the client configuration.</p><p>We also recommend against using <code>gzip</code> compression, as it is significantly slower than the alternatives for both compressing
and decompressing data.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="http-proxy-support">HTTP Proxy Support<a href="#http-proxy-support" class="hash-link" aria-label="Direct link to HTTP Proxy Support" title="Direct link to HTTP Proxy Support">​</a></h3><p>ClickHouse Connect adds basic HTTP proxy support using the urllib3 library.  It recognizes the standard <code>HTTP_PROXY</code> and
<code>HTTPS_PROXY</code> environment variables.  Note that using these environment variables will apply to any client created with the
<code>clickhouse_connect.get_client</code> method.  Alternatively, to configure per client, you can use the <code>http_proxy</code> or <code>https_proxy</code>
arguments to the get_client method. For details on the implementation of HTTP Proxy support, see the <a href="https://urllib3.readthedocs.io/en/stable/advanced-usage.html#http-and-https-proxies" target="_blank" rel="noopener noreferrer">urllib3</a>
documentation.</p><p>To use a Socks proxy, you can send a urllib3 SOCKSProxyManager as the <code>pool_mgr</code> argument to <code>get_client</code>.  Note that
this will require installing the PySocks library either directly or using the <code>[socks]</code> option for the urllib3 dependency.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ClickHouse/clickhouse-docs/blob/main/docs/en/integrations/language-clients/python/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev paginationNavLink_UdUv" href="/docs/en/integrations/java"><svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.2751 19.175L10.3251 18.125L5.4501 13.25H21.6001V11.75H5.4501L10.3251 6.87501L9.2751 5.82501L2.5751 12.5L9.2751 19.175Z" fill="currentColor"></path></svg><div class="paginationNavContent__3xr"><div class="pagination-nav__sublabel">Previous</div><div class="paginationNavLabel_YPzM pagination-nav__label">Java</div></div></a><a class="pagination-nav__link pagination-nav__link--next paginationNavLink_UdUv" href="/docs/en/integrations/language-clients/nodejs"><div class="paginationNavContent__3xr"><div class="pagination-nav__sublabel">Next</div><div class="paginationNavLabel_YPzM pagination-nav__label">Node.js</div></div><svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.7249 19.175L13.6749 18.125L18.5499 13.25H2.3999V11.75H18.5499L13.6749 6.87501L14.7249 5.82501L21.4249 12.5L14.7249 19.175Z" fill="currentColor"></path></svg></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a><ul><li><a href="#requirements-and-compatibility" class="table-of-contents__link toc-highlight">Requirements and Compatibility</a></li><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#support-policy" class="table-of-contents__link toc-highlight">Support Policy</a></li><li><a href="#basic-usage" class="table-of-contents__link toc-highlight">Basic Usage</a></li><li><a href="#gather-your-connection-details" class="table-of-contents__link toc-highlight">Gather your connection details</a></li></ul></li><li><a href="#clickhouse-connect-driver-api" class="table-of-contents__link toc-highlight">ClickHouse Connect Driver API</a><ul><li><a href="#client-initialization" class="table-of-contents__link toc-highlight">Client Initialization</a></li><li><a href="#common-method-arguments" class="table-of-contents__link toc-highlight">Common Method Arguments</a></li><li><a href="#client-command-method" class="table-of-contents__link toc-highlight">Client <em>command</em> Method</a></li><li><a href="#client-query-method" class="table-of-contents__link toc-highlight">Client <em>query</em> Method</a></li><li><a href="#specialized-client-query-methods" class="table-of-contents__link toc-highlight">Specialized Client Query Methods</a></li><li><a href="#client-streaming-query-methods" class="table-of-contents__link toc-highlight">Client Streaming Query Methods</a></li><li><a href="#client-insert-method" class="table-of-contents__link toc-highlight">Client <em>insert</em> Method</a></li><li><a href="#file-inserts" class="table-of-contents__link toc-highlight">File Inserts</a></li><li><a href="#raw-api" class="table-of-contents__link toc-highlight">Raw API</a></li></ul></li><li><a href="#querying-data-with-clickhouse-connect--advanced-usage" class="table-of-contents__link toc-highlight">Querying Data with ClickHouse Connect:  Advanced Usage</a><ul><li><a href="#querycontexts" class="table-of-contents__link toc-highlight">QueryContexts</a></li><li><a href="#streaming-queries" class="table-of-contents__link toc-highlight">Streaming Queries</a></li><li><a href="#read-formats" class="table-of-contents__link toc-highlight">Read Formats</a></li><li><a href="#external-data" class="table-of-contents__link toc-highlight">External Data</a></li><li><a href="#time-zones" class="table-of-contents__link toc-highlight">Time Zones</a></li></ul></li><li><a href="#inserting-data-with-clickhouse-connect--advanced-usage" class="table-of-contents__link toc-highlight">Inserting Data with ClickHouse Connect:  Advanced Usage</a><ul><li><a href="#insertcontexts" class="table-of-contents__link toc-highlight">InsertContexts</a></li><li><a href="#write-formats" class="table-of-contents__link toc-highlight">Write Formats</a></li></ul></li><li><a href="#additional-options" class="table-of-contents__link toc-highlight">Additional Options</a><ul><li><a href="#global-settings" class="table-of-contents__link toc-highlight">Global Settings</a></li><li><a href="#compression" class="table-of-contents__link toc-highlight">Compression</a></li><li><a href="#http-proxy-support" class="table-of-contents__link toc-highlight">HTTP Proxy Support</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer_jryj"><div class="container_y1z5 container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">© 2016&ndash;2023 ClickHouse, Inc.</div></div><div><div class="footer__links text--center"><div class="footer__links"><a href="https://clickhouse.com/legal/trademark-policy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Trademark</a><span class="footer__link-separator">·</span><a href="https://clickhouse.com/legal/privacy-policy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy</a><span class="footer__link-separator">·</span><a href="https://trust.clickhouse.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Security</a><span class="footer__link-separator">·</span><a href="https://clickhouse.com/legal/agreements/terms-of-service" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Service</a></div></div></div></div><button class="colorModeButton_hk25"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.7227 0.724664C8.7227 0.330045 8.39191 0 8.0036 0C7.60809 0 7.2773 0.330045 7.2773 0.724664V2.18834C7.2773 2.57578 7.60809 2.90583 8.0036 2.90583C8.39191 2.90583 8.7227 2.57578 8.7227 2.18834V0.724664ZM11.5991 3.4009C11.3258 3.67354 11.3258 4.13274 11.6063 4.41256C11.8796 4.6852 12.347 4.69238 12.6274 4.40538L13.6629 3.3722C13.9434 3.09238 13.9362 2.62601 13.6629 2.34619C13.3897 2.07354 12.9222 2.08072 12.649 2.35336L11.5991 3.4009ZM3.37258 4.40538C3.64584 4.6852 4.11326 4.6852 4.38652 4.41256C4.66697 4.14709 4.66697 3.66637 4.4009 3.4009L3.3582 2.35336C3.09213 2.08789 2.61753 2.07354 2.34427 2.34619C2.07101 2.62601 2.06382 3.09238 2.33708 3.36502L3.37258 4.40538ZM7.9964 11.774C10.0602 11.774 11.7717 10.0664 11.7717 8C11.7717 5.93363 10.0602 4.22601 7.9964 4.22601C5.93258 4.22601 4.22112 5.93363 4.22112 8C4.22112 10.0664 5.93258 11.774 7.9964 11.774ZM7.9964 10.4395C6.65888 10.4395 5.55146 9.33453 5.55146 8C5.55146 6.66547 6.65888 5.56054 7.9964 5.56054C9.33393 5.56054 10.4413 6.66547 10.4413 8C10.4413 9.33453 9.33393 10.4395 7.9964 10.4395ZM15.2809 8.71749C15.6692 8.71749 16 8.38744 16 8C16 7.60538 15.6692 7.28251 15.2809 7.28251H13.8211C13.4328 7.28251 13.102 7.60538 13.102 8C13.102 8.38744 13.4328 8.71749 13.8211 8.71749H15.2809ZM0.719101 7.28251C0.330787 7.28251 0 7.60538 0 8C0 8.38744 0.330787 8.71749 0.719101 8.71749H2.17888C2.57438 8.71749 2.90517 8.38744 2.90517 8C2.90517 7.60538 2.57438 7.28251 2.17888 7.28251H0.719101ZM12.6202 11.5946C12.347 11.322 11.8796 11.322 11.5991 11.5946C11.3258 11.8744 11.3258 12.3336 11.6063 12.6135L12.649 13.6538C12.9294 13.9265 13.3897 13.9193 13.6701 13.6395C13.9434 13.3668 13.9434 12.9076 13.6629 12.6278L12.6202 11.5946ZM2.33708 12.6206C2.05663 12.9004 2.05663 13.3668 2.3227 13.6395C2.60315 13.9121 3.07056 13.9193 3.34382 13.6466L4.38652 12.6135C4.66697 12.3336 4.66697 11.8744 4.4009 11.6018C4.12045 11.322 3.65303 11.322 3.37258 11.5946L2.33708 12.6206ZM8.7227 13.8117C8.7227 13.4242 8.39191 13.0942 8.0036 13.0942C7.60809 13.0942 7.2773 13.4242 7.2773 13.8117V15.2753C7.2773 15.6628 7.60809 16 8.0036 16C8.39191 16 8.7227 15.6628 8.7227 15.2753V13.8117Z" fill="currentColor"></path></svg><span>light Mode</span></button></footer></div>
<script src="/docs/assets/js/runtime~main.b478ee8e.js"></script>
<script src="/docs/assets/js/main.92fcbde1.js"></script>
</body>
</html>