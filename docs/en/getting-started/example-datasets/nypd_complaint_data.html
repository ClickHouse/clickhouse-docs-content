<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-en/getting-started/example-datasets/nypd_complaint_data">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">NYPD Complaint Data | ClickHouse Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://clickhouse.com/docs/img/logo.png"><meta data-rh="true" name="twitter:image" content="https://clickhouse.com/docs/img/logo.png"><meta data-rh="true" property="og:url" content="https://clickhouse.com/docs/en/getting-started/example-datasets/nypd_complaint_data"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="NYPD Complaint Data | ClickHouse Docs"><meta data-rh="true" name="description" content="Ingest and query Tab Separated Value data in 5 steps"><meta data-rh="true" property="og:description" content="Ingest and query Tab Separated Value data in 5 steps"><link data-rh="true" rel="icon" href="/docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://clickhouse.com/docs/en/getting-started/example-datasets/nypd_complaint_data"><link data-rh="true" rel="alternate" href="https://clickhouse.com/docs/en/getting-started/example-datasets/nypd_complaint_data" hreflang="en"><link data-rh="true" rel="alternate" href="https://clickhouse.com/docs/en/getting-started/example-datasets/nypd_complaint_data" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://62VCH2MD74-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/docs/knowledgebase/rss.xml" title="ClickHouse Knowledge Base Feed RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs/knowledgebase/atom.xml" title="ClickHouse Knowledge Base Feed Atom Feed">
<link rel="alternate" type="application/json" href="/docs/knowledgebase/feed.json" title="ClickHouse Knowledge Base Feed JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KF1LLRTQ5Q"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-KF1LLRTQ5Q",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="ClickHouse Docs" href="/docs/opensearch.xml">





<script src="/docs/js/analytics.js"></script><link rel="stylesheet" href="/docs/assets/css/styles.084d673f.css">
<link rel="preload" href="/docs/assets/js/runtime~main.7d1f9eed.js" as="script">
<link rel="preload" href="/docs/assets/js/main.92fcbde1.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navBar_gvJn"><div class="navbarHeaderContainer_rccn navbar-header"><div class="navbar__inner navbarInner_W6bg"><div class="navbar__items"><a href="https://clickhouse.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/docs/img/logo_without_text.svg" alt="ClickHouse" class="themedImage_ToTc themedImage--light_HNdA"><img src="/docs/img/logo_without_text.svg" alt="ClickHouse" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">ClickHouse</b></a><div class="navbarItemsList_uIZ2 navbar-items-list"><div class="navbar__item dropdown"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link ch-menu">Product</a><ul class="dropdown__menu"><li><a href="https://clickhouse.com/cloud" target="_blank" rel="noopener noreferrer" class="dropdown__link">ClickHouse Cloud</a></li><li><a href="https://clickhouse.com/clickhouse" target="_blank" rel="noopener noreferrer" class="dropdown__link">ClickHouse Open Source</a></li></ul></div><a href="https://clickhouse.com/customer-stories" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link ch-menu">Use Cases</a><div class="navbar__item dropdown"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link ch-menu">Company</a><ul class="dropdown__menu"><li><a href="https://clickhouse.com/blog" target="_blank" rel="noopener noreferrer" class="dropdown__link">Blog</a></li><li><a href="https://clickhouse.com/company/our-story" target="_blank" rel="noopener noreferrer" class="dropdown__link">Our story</a></li><li><a href="https://clickhouse.com/company/careers" target="_blank" rel="noopener noreferrer" class="dropdown__link">Careers</a></li><li><a href="https://clickhouse.com/company/contact" target="_blank" rel="noopener noreferrer" class="dropdown__link">Contact us</a></li><li><a href="https://clickhouse.com/company/news-events" target="_blank" rel="noopener noreferrer" class="dropdown__link">News and events</a></li></ul></div><div class="navbar__item dropdown"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link ch-menu">Learn</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/en/intro">Docs</a></li><li><a href="https://clickhouse.com/learn" target="_blank" rel="noopener noreferrer" class="dropdown__link">ClickHouse Academy</a></li></ul></div><a href="https://clickhouse.com/pricing" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link ch-menu">Pricing</a></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item">
                <div class="nav-items-btns">
                  <a href="https://clickhouse.cloud/signIn" class="sign-in navbar__item navbar__link ch-menu">
                    Sign in
                  </a>
                  <a href="https://clickhouse.cloud/signUp" class="click-button-anchor">
                    <button class="click-button primary-btn">Free Trial</button>
                  </a>
                </div></div><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button></div></div><div class="secondary-nav--items secondaryMenu_iuff"><div class="scrollableElement_Qqzp secondaryMenuLeft_tFZR secondary-nav--items-left"><a aria-current="page" class="navbar__item navbar__link ch-menu navbar__link--active" href="/docs/en/intro">Docs</a><a class="navbar__item navbar__link ch-menu" href="/docs/en/cloud/overview">Cloud</a><a class="navbar__item navbar__link ch-menu" href="/docs/en/sql-reference">SQL Reference</a><a class="navbar__item navbar__link ch-menu" href="/docs/knowledgebase">Knowledge Base</a></div><div class="secondaryMenuRight__9m4 secondary-nav--items-right"><div class="navbar__item dropdown dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg width="14" height="13" viewBox="0 0 14 13" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6.95 12.6496L9.75 5.26628H11.0333L13.8333 12.6496H12.55L11.9 10.7663H8.91667L8.25 12.6496H6.95ZM9.28333 9.69961H11.5L10.4167 6.64961H10.3667L9.28333 9.69961ZM2.08333 10.7996L1.21667 9.93294L4.33333 6.83294C3.94444 6.39961 3.60556 5.95228 3.31667 5.49094C3.02778 5.03005 2.77222 4.54405 2.55 4.03294H3.83333C4.02222 4.41072 4.22222 4.74672 4.43333 5.04094C4.64444 5.33561 4.89444 5.64405 5.18333 5.96628C5.63889 5.47739 6.01667 4.97472 6.31667 4.45828C6.61667 3.94139 6.86667 3.3885 7.06667 2.79961H0.25V1.58294H4.55V0.349609H5.78333V1.58294H10.0833V2.79961H8.3C8.07778 3.53294 7.78333 4.24116 7.41667 4.92428C7.05 5.60783 6.59444 6.25516 6.05 6.86628L7.53333 8.36628L7.06667 9.63294L5.16667 7.73294L2.08333 10.7996Z" fill="currentColor"/>
</svg></a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/en/intro">English</a></li><li><a class="dropdown__link" href="/docs/ru">Russian</a></li><li><a class="dropdown__link" href="/docs/zh">Chinese</a></li></ul></div><button class="colorModeButton_hk25 navbar-color-toggle"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.7227 0.724664C8.7227 0.330045 8.39191 0 8.0036 0C7.60809 0 7.2773 0.330045 7.2773 0.724664V2.18834C7.2773 2.57578 7.60809 2.90583 8.0036 2.90583C8.39191 2.90583 8.7227 2.57578 8.7227 2.18834V0.724664ZM11.5991 3.4009C11.3258 3.67354 11.3258 4.13274 11.6063 4.41256C11.8796 4.6852 12.347 4.69238 12.6274 4.40538L13.6629 3.3722C13.9434 3.09238 13.9362 2.62601 13.6629 2.34619C13.3897 2.07354 12.9222 2.08072 12.649 2.35336L11.5991 3.4009ZM3.37258 4.40538C3.64584 4.6852 4.11326 4.6852 4.38652 4.41256C4.66697 4.14709 4.66697 3.66637 4.4009 3.4009L3.3582 2.35336C3.09213 2.08789 2.61753 2.07354 2.34427 2.34619C2.07101 2.62601 2.06382 3.09238 2.33708 3.36502L3.37258 4.40538ZM7.9964 11.774C10.0602 11.774 11.7717 10.0664 11.7717 8C11.7717 5.93363 10.0602 4.22601 7.9964 4.22601C5.93258 4.22601 4.22112 5.93363 4.22112 8C4.22112 10.0664 5.93258 11.774 7.9964 11.774ZM7.9964 10.4395C6.65888 10.4395 5.55146 9.33453 5.55146 8C5.55146 6.66547 6.65888 5.56054 7.9964 5.56054C9.33393 5.56054 10.4413 6.66547 10.4413 8C10.4413 9.33453 9.33393 10.4395 7.9964 10.4395ZM15.2809 8.71749C15.6692 8.71749 16 8.38744 16 8C16 7.60538 15.6692 7.28251 15.2809 7.28251H13.8211C13.4328 7.28251 13.102 7.60538 13.102 8C13.102 8.38744 13.4328 8.71749 13.8211 8.71749H15.2809ZM0.719101 7.28251C0.330787 7.28251 0 7.60538 0 8C0 8.38744 0.330787 8.71749 0.719101 8.71749H2.17888C2.57438 8.71749 2.90517 8.38744 2.90517 8C2.90517 7.60538 2.57438 7.28251 2.17888 7.28251H0.719101ZM12.6202 11.5946C12.347 11.322 11.8796 11.322 11.5991 11.5946C11.3258 11.8744 11.3258 12.3336 11.6063 12.6135L12.649 13.6538C12.9294 13.9265 13.3897 13.9193 13.6701 13.6395C13.9434 13.3668 13.9434 12.9076 13.6629 12.6278L12.6202 11.5946ZM2.33708 12.6206C2.05663 12.9004 2.05663 13.3668 2.3227 13.6395C2.60315 13.9121 3.07056 13.9193 3.34382 13.6466L4.38652 12.6135C4.66697 12.3336 4.66697 11.8744 4.4009 11.6018C4.12045 11.322 3.65303 11.322 3.37258 11.5946L2.33708 12.6206ZM8.7227 13.8117C8.7227 13.4242 8.39191 13.0942 8.0036 13.0942C7.60809 13.0942 7.2773 13.4242 7.2773 13.8117V15.2753C7.2773 15.6628 7.60809 16 8.0036 16C8.39191 16 8.7227 15.6628 8.7227 15.2753V13.8117Z" fill="currentColor"></path></svg><span>light Mode</span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_W2AM"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage_qMb8"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_mhZE"><div class="sidebarSearchContainer_Lwc8"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_Y1UP"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="false"><a class="menu__link">Get Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/intro">What is ClickHouse?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/getting-started/quick-start">Quick Start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/tutorial">Advanced Tutorial</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/install">Install</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item top-nav-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="false"><a class="menu__link">Concepts</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/concepts/why-clickhouse-is-so-fast">Why is ClickHouse so Fast?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/concepts/olap">What is OLAP?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/about-us/distinctive-features">Why is ClickHouse unique?</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="false"><a class="menu__link menu__link--active">Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/guides/creating-tables">Creating Tables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/guides/inserting-data">Inserting Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/guides/writing-queries">SELECT Queries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/guides/developer/mutations">Updating and Deleting Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/guides/joining-tables">Joining Tables</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/en/guides/developer/cascading-materialized-views">Advanced Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/en/optimize/sparse-primary-indexes">Best Practices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/en/getting-started/example-datasets">Example Datasets</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/getting-started/example-datasets">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/getting-started/example-datasets/github">Github Repo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/getting-started/example-datasets/uk-price-paid">UK Property Prices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/getting-started/example-datasets/nyc-taxi">New York Taxi Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/getting-started/example-datasets/cell-towers">Geo Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/getting-started/example-datasets/amazon-reviews">Amazon customer reviews</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/getting-started/example-datasets/amplab-benchmark">AMPLab Big Data Benchmark</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/getting-started/example-datasets/brown-benchmark">Brown University Benchmark</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/getting-started/example-datasets/covid19">COVID-19 Open-Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/getting-started/example-datasets/criteo">Terabyte Click Logs from Criteo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/getting-started/example-datasets/environmental-sensors">Environmental Sensors Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/getting-started/example-datasets/github-events">GitHub Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/getting-started/example-datasets/laion">Laion-400M dataset</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/getting-started/example-datasets/menus">New York Public Library &quot;What&#x27;s on the Menu?&quot; Dataset</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/getting-started/example-datasets/metrica">Web Analytics Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/en/getting-started/example-datasets/nypd_complaint_data">NYPD Complaint Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/getting-started/example-datasets/ontime">OnTime Airline Flight Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/getting-started/example-datasets/opensky">Air Traffic Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/getting-started/example-datasets/recipes">Recipes Dataset</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/getting-started/example-datasets/star-schema">Star Schema Benchmark</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/getting-started/example-datasets/wikistat">WikiStat</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/getting-started/example-datasets/youtube-dislikes">YouTube Dislikes</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="false"><a class="menu__link">Integrations</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations">View all integrations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/s3">AWS S3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/gcs">Google Cloud Storage (GCS)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/postgresql">PostgreSQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/mysql">MySQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/kafka">Kafka</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/dbt">dbt</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/redshift">Redshift</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed top-nav-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/en/integrations/airbyte">More...</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="false"><a class="menu__link">Data Formats</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/data-formats/csv-tsv">CSV and TSV</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/data-formats/json">JSON</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/data-formats/parquet">Parquet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/data-formats/arrow-avro-orc">Avro, Arrow and ORC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/interfaces/formats">View all formats...</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="false"><a class="menu__link">Clients and Drivers</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/sql-clients/clickhouse-client-local">clickhouse-client (CLI)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/sql-clients/sql-console">SQL Console</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/getting-started/playground">ClickHouse Playground</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/language-clients/nodejs">Node.js</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/java">Java</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/integrations/python">Python</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/en/integrations/language-clients/nodejs">View all languages</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/en/interfaces/overview">Drivers and Interfaces</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/en/integrations/datagrip">SQL Clients</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/en/integrations/data-visualization">Business Intelligence</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="false"><a class="menu__link">Managing ClickHouse</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/operations/access-rights">Users and Roles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/operations/backup">Backup and Restore</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/operations/monitoring">Monitoring</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/en/architecture/introduction">Deploying</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/en/guides/sre/configuring-ldap">Security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/en/operations/settings">Advanced Settings</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/en/guides/sre/scaling-clusters">Performance and Optimizations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/en/operations/utilities">Tools and Utilities</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/en/operations/update">More...</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="false"><a class="menu__link">About ClickHouse</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/about-us/adopters">Adopters</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/changelog">Changelog</a><button aria-label="Toggle the collapsible sidebar category &#x27;Changelog&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/whats-new/security-changelog">Security Changelog</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/whats-new/roadmap">Roadmap</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/en/development/developer-instruction">Contribute</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/about-us/history">ClickHouse History</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_RiV8"><div class="container padding-top--md padding-bottom--lg main-content-wrapper"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><div class="theme-doc-markdown markdown"><header><h1>NYPD Complaint Data</h1></header><p>Tab separated value, or TSV, files are common and may include field headings as the first line of the file. ClickHouse can ingest TSVs, and also can query TSVs without ingesting the files.  This guide covers both of these cases. If you need to query or ingest CSV files, the same techniques work, simply substitute <code>TSV</code> with <code>CSV</code> in your format arguments.</p><p>While working through this guide you will:</p><ul><li><strong>Investigate</strong>: Query the structure and content of the TSV file.</li><li><strong>Determine the target ClickHouse schema</strong>: Choose proper data types and map the existing data to those types.</li><li><strong>Create a ClickHouse table</strong>.</li><li><strong>Preprocess and stream</strong> the data to ClickHouse.</li><li><strong>Run some queries</strong> against ClickHouse.</li></ul><p>The dataset used in this guide comes from the NYC Open Data team, and contains data about &quot;all valid felony, misdemeanor, and violation crimes reported to the New York City Police Department (NYPD)&quot;. At the time of writing, the data file is 166MB, but it is updated regularly.</p><p><strong>Source</strong>: <a href="https://data.cityofnewyork.us/Public-Safety/NYPD-Complaint-Data-Current-Year-To-Date-/5uac-w243" target="_blank" rel="noopener noreferrer">data.cityofnewyork.us</a>
<strong>Terms of use</strong>: <a href="https://www1.nyc.gov/home/terms-of-use.page" target="_blank" rel="noopener noreferrer">https://www1.nyc.gov/home/terms-of-use.page</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h2><ul><li>Download the dataset by visiting the <a href="https://data.cityofnewyork.us/Public-Safety/NYPD-Complaint-Data-Current-Year-To-Date-/5uac-w243" target="_blank" rel="noopener noreferrer">NYPD Complaint Data Current (Year To Date)</a> page, clicking the Export button, and choosing <strong>TSV for Excel</strong>.</li><li>Install <a href="/docs/en/install">ClickHouse server and client</a>.</li><li><a href="/docs/en/install#launch">Launch</a> ClickHouse server, and connect with <code>clickhouse-client</code></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-note-about-the-commands-described-in-this-guide">A note about the commands described in this guide<a href="#a-note-about-the-commands-described-in-this-guide" class="hash-link" aria-label="Direct link to A note about the commands described in this guide" title="Direct link to A note about the commands described in this guide">​</a></h3><p>There are two types of commands in this guide:</p><ul><li>Some of the commands are querying the TSV files, these are run at the command prompt.</li><li>The rest of the commands are querying ClickHouse, and these are run in the <code>clickhouse-client</code> or Play UI.</li></ul><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="alert-icon admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div><div class="alert-content admonitionContent_vXIg"><div class="admonitionHeading_TMsN">note</div><p>The examples in this guide assume that you have saved the TSV file to <code>${HOME}/NYPD_Complaint_Data_Current__Year_To_Date_.tsv</code>, please adjust the commands if needed.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="familiarize-yourself-with-the-tsv-file">Familiarize yourself with the TSV file<a href="#familiarize-yourself-with-the-tsv-file" class="hash-link" aria-label="Direct link to Familiarize yourself with the TSV file" title="Direct link to Familiarize yourself with the TSV file">​</a></h2><p>Before starting to work with the ClickHouse database familiarize yourself with the data.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="look-at-the-fields-in-the-source-tsv-file">Look at the fields in the source TSV file<a href="#look-at-the-fields-in-the-source-tsv-file" class="hash-link" aria-label="Direct link to Look at the fields in the source TSV file" title="Direct link to Look at the fields in the source TSV file">​</a></h3><p>This is an example of a command to query a TSV file, but don&#x27;t run it yet.</p><div class="language-sh codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">clickhouse-local --query \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">&quot;describe file(&#x27;${HOME}/NYPD_Complaint_Data_Current__Year_To_Date_.tsv&#x27;, &#x27;TSVWithNames&#x27;)&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Sample response</p><div class="language-response codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-response codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">CMPLNT_NUM                  Nullable(Float64)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">ADDR_PCT_CD                 Nullable(Float64)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">BORO_NM                     Nullable(String)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">CMPLNT_FR_DT                Nullable(String)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">CMPLNT_FR_TM                Nullable(String)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-tip alert alert--success admonition_WoCw"><div class="alert-icon admonitionIcon_Ibzs"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></div><div class="alert-content admonitionContent_vXIg"><div class="admonitionHeading_TMsN">tip</div><p>Most of the time the above command will let you know which fields in the input data are numeric, and which are strings, and which are tuples.  This is not always the case.  Because ClickHouse is routineley used with datasets containing billions of records there is a default number (100) of rows examined to <a href="/docs/en/integrations/data-formats/json#relying-on-schema-inference">infer the schema</a> in order to avoid parsing billions of rows to infer the schema. The response below may not match what you see, as the dataset is updated several times each year. Looking at the Data Dictionary you can see that CMPLNT_NUM is specified as text, and not numeric.  By overriding the default of 100 rows for inference with the setting <code>SETTINGS input_format_max_rows_to_read_for_schema_inference=2000</code>
you can get a better idea of the content.</p><p>Note: as of version 22.5 the default is now 25,000 rows for inferring the schema, so only change the setting if you are on an older version or if you need more than 25,000 rows to be sampled.</p></div></div><p>Run this command at your command prompt.  You will be using <code>clickhouse-local</code> to query the data in the TSV file you downloaded.</p><div class="language-sh codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">clickhouse-local --input_format_max_rows_to_read_for_schema_inference=2000 \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">--query \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">&quot;describe file(&#x27;${HOME}/NYPD_Complaint_Data_Current__Year_To_Date_.tsv&#x27;, &#x27;TSVWithNames&#x27;)&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Result:</p><div class="language-response codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-response codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">CMPLNT_NUM        Nullable(String)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">ADDR_PCT_CD       Nullable(Float64)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">BORO_NM           Nullable(String)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">CMPLNT_FR_DT      Nullable(String)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">CMPLNT_FR_TM      Nullable(String)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">CMPLNT_TO_DT      Nullable(String)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">CMPLNT_TO_TM      Nullable(String)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">CRM_ATPT_CPTD_CD  Nullable(String)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">HADEVELOPT        Nullable(String)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">HOUSING_PSA       Nullable(Float64)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">JURISDICTION_CODE Nullable(Float64)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">JURIS_DESC        Nullable(String)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">KY_CD             Nullable(Float64)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">LAW_CAT_CD        Nullable(String)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">LOC_OF_OCCUR_DESC Nullable(String)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">OFNS_DESC         Nullable(String)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">PARKS_NM          Nullable(String)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">PATROL_BORO       Nullable(String)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">PD_CD             Nullable(Float64)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">PD_DESC           Nullable(String)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">PREM_TYP_DESC     Nullable(String)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">RPT_DT            Nullable(String)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">STATION_NAME      Nullable(String)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">SUSP_AGE_GROUP    Nullable(String)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">SUSP_RACE         Nullable(String)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">SUSP_SEX          Nullable(String)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">TRANSIT_DISTRICT  Nullable(Float64)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">VIC_AGE_GROUP     Nullable(String)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">VIC_RACE          Nullable(String)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">VIC_SEX           Nullable(String)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">X_COORD_CD        Nullable(Float64)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Y_COORD_CD        Nullable(Float64)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Latitude          Nullable(Float64)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Longitude         Nullable(Float64)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Lat_Lon           Tuple(Nullable(Float64), Nullable(Float64))</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">New Georeferenced Column Nullable(String)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>At this point you should check that the columns in the TSV file match the names and types specified in the <strong>Columns in this Dataset</strong> section of the <a href="https://data.cityofnewyork.us/Public-Safety/NYPD-Complaint-Data-Current-Year-To-Date-/5uac-w243" target="_blank" rel="noopener noreferrer">dataset web page</a>.  The data types are not very specific, all numeric fields are set to <code>Nullable(Float64)</code>, and all other fields are <code>Nullable(String)</code>.  When you create a ClickHouse table to store the data you can specify more appropriate and performant types.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="determine-the-proper-schema">Determine the proper schema<a href="#determine-the-proper-schema" class="hash-link" aria-label="Direct link to Determine the proper schema" title="Direct link to Determine the proper schema">​</a></h3><p>In order to figure out what types should be used for the fields it is necessary to know what the data looks like. For example, the field <code>JURISDICTION_CODE</code> is a numeric: should it be a <code>UInt8</code>, or an <code>Enum</code>, or is <code>Float64</code> appropriate?</p><div class="language-sql codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">clickhouse</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token keyword" style="color:rgb(86, 156, 214)">local</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)">--input_format_max_rows_to_read_for_schema_inference=2000 \</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">--query \</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token string" style="color:rgb(206, 145, 120)">&quot;select JURISDICTION_CODE, count() FROM</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)"> file(&#x27;${HOME}/NYPD_Complaint_Data_Current__Year_To_Date_.tsv&#x27;, &#x27;TSVWithNames&#x27;)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)"> GROUP BY JURISDICTION_CODE</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)"> ORDER BY JURISDICTION_CODE</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)"> FORMAT PrettyCompact&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Result:</p><div class="language-response codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-response codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">┌─JURISDICTION_CODE─┬─count()─┐</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│                 0 │  188875 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│                 1 │    4799 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│                 2 │   13833 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│                 3 │     656 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│                 4 │      51 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│                 6 │       5 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│                 7 │       2 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│                 9 │      13 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│                11 │      14 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│                12 │       5 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│                13 │       2 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│                14 │      70 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│                15 │      20 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│                72 │     159 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│                87 │       9 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│                88 │      75 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│                97 │     405 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└───────────────────┴─────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The query response shows that the <code>JURISDICTION_CODE</code> fits well in a <code>UInt8</code>.</p><p>Similarly, look at some of the <code>String</code> fields and see if they are well suited to being <code>DateTime</code> or <a href="/docs/en/sql-reference/data-types/lowcardinality"><code>LowCardinality(String)</code></a> fields.</p><p>For example, the field <code>PARKS_NM</code> is described as &quot;Name of NYC park, playground or greenspace of occurrence, if applicable (state parks are not included)&quot;.  The names of parks in New York City may be a good candidate for a <code>LowCardinality(String)</code>:</p><div class="language-sh codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">clickhouse-local --input_format_max_rows_to_read_for_schema_inference=2000 \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">--query \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">&quot;select count(distinct PARKS_NM) FROM</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> file(&#x27;${HOME}/NYPD_Complaint_Data_Current__Year_To_Date_.tsv&#x27;, &#x27;TSVWithNames&#x27;)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> FORMAT PrettyCompact&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Result:</p><div class="language-response codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-response codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">┌─uniqExact(PARKS_NM)─┐</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│                 319 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└─────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Have a look at some of the park names:</p><div class="language-sql codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">clickhouse</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token keyword" style="color:rgb(86, 156, 214)">local</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)">--input_format_max_rows_to_read_for_schema_inference=2000 \</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">--query \</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token string" style="color:rgb(206, 145, 120)">&quot;select distinct PARKS_NM FROM</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)"> file(&#x27;${HOME}/NYPD_Complaint_Data_Current__Year_To_Date_.tsv&#x27;, &#x27;TSVWithNames&#x27;)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)"> LIMIT 10</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)"> FORMAT PrettyCompact&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Result:</p><div class="language-response codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-response codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">┌─PARKS_NM───────────────────┐</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ (null)                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ ASSER LEVY PARK            │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ JAMES J WALKER PARK        │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ BELT PARKWAY/SHORE PARKWAY │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ PROSPECT PARK              │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ MONTEFIORE SQUARE          │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ SUTTON PLACE PARK          │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ JOYCE KILMER PARK          │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ ALLEY ATHLETIC PLAYGROUND  │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ ASTORIA PARK               │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The dataset in use at the time of writing has only a few hundred distinct parks and playgrounds in the <code>PARK_NM</code> column.  This is a small number based on the <a href="/docs/en/sql-reference/data-types/lowcardinality#lowcardinality-dscr">LowCardinality</a> recommendation to stay below 10,000 distinct strings in a <code>LowCardinality(String)</code> field.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="datetime-fields">DateTime fields<a href="#datetime-fields" class="hash-link" aria-label="Direct link to DateTime fields" title="Direct link to DateTime fields">​</a></h3><p>Based on the <strong>Columns in this Dataset</strong> section of the <a href="https://data.cityofnewyork.us/Public-Safety/NYPD-Complaint-Data-Current-Year-To-Date-/5uac-w243" target="_blank" rel="noopener noreferrer">dataset web page</a> there are date and time fields for the start and end of the reported event.  Looking at the min and max of the <code>CMPLNT_FR_DT</code> and <code>CMPLT_TO_DT</code> gives an idea of whether or not the fields are always populated:</p><div class="language-sh codeBlockContainer_APcc theme-code-block"><div class="codeBlockTitle_Ktv7">CMPLNT_FR_DT</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">clickhouse-local --input_format_max_rows_to_read_for_schema_inference=2000 \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">--query \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">&quot;select min(CMPLNT_FR_DT), max(CMPLNT_FR_DT) FROM</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">file(&#x27;${HOME}/NYPD_Complaint_Data_Current__Year_To_Date_.tsv&#x27;, &#x27;TSVWithNames&#x27;)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">FORMAT PrettyCompact&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Result:</p><div class="language-response codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-response codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">┌─min(CMPLNT_FR_DT)─┬─max(CMPLNT_FR_DT)─┐</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 01/01/1973        │ 12/31/2021        │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└───────────────────┴───────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_APcc theme-code-block"><div class="codeBlockTitle_Ktv7">CMPLNT_TO_DT</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">clickhouse-local --input_format_max_rows_to_read_for_schema_inference=2000 \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">--query \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">&quot;select min(CMPLNT_TO_DT), max(CMPLNT_TO_DT) FROM</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">file(&#x27;${HOME}/NYPD_Complaint_Data_Current__Year_To_Date_.tsv&#x27;, &#x27;TSVWithNames&#x27;)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">FORMAT PrettyCompact&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Result:</p><div class="language-response codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-response codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">┌─min(CMPLNT_TO_DT)─┬─max(CMPLNT_TO_DT)─┐</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│                   │ 12/31/2021        │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└───────────────────┴───────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_APcc theme-code-block"><div class="codeBlockTitle_Ktv7">CMPLNT_FR_TM</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">clickhouse-local --input_format_max_rows_to_read_for_schema_inference=2000 \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">--query \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">&quot;select min(CMPLNT_FR_TM), max(CMPLNT_FR_TM) FROM</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">file(&#x27;${HOME}/NYPD_Complaint_Data_Current__Year_To_Date_.tsv&#x27;, &#x27;TSVWithNames&#x27;)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">FORMAT PrettyCompact&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Result:</p><div class="language-response codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-response codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">┌─min(CMPLNT_FR_TM)─┬─max(CMPLNT_FR_TM)─┐</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 00:00:00          │ 23:59:00          │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└───────────────────┴───────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sh codeBlockContainer_APcc theme-code-block"><div class="codeBlockTitle_Ktv7">CMPLNT_TO_TM</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">clickhouse-local --input_format_max_rows_to_read_for_schema_inference=2000 \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">--query \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">&quot;select min(CMPLNT_TO_TM), max(CMPLNT_TO_TM) FROM</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">file(&#x27;${HOME}/NYPD_Complaint_Data_Current__Year_To_Date_.tsv&#x27;, &#x27;TSVWithNames&#x27;)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">FORMAT PrettyCompact&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Result:</p><div class="language-response codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-response codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">┌─min(CMPLNT_TO_TM)─┬─max(CMPLNT_TO_TM)─┐</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ (null)            │ 23:59:00          │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└───────────────────┴───────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="make-a-plan">Make a plan<a href="#make-a-plan" class="hash-link" aria-label="Direct link to Make a plan" title="Direct link to Make a plan">​</a></h2><p>Based on the above investigation:</p><ul><li><code>JURISDICTION_CODE</code> should be cast as <code>UInt8</code>.</li><li><code>PARKS_NM</code> should be cast to <code>LowCardinality(String)</code></li><li><code>CMPLNT_FR_DT</code> and <code>CMPLNT_FR_TM</code> are always populated (possibly with a default time of <code>00:00:00</code>)</li><li><code>CMPLNT_TO_DT</code> and <code>CMPLNT_TO_TM</code> may be empty</li><li>Dates and times are stored in separate fields in the source</li><li>Dates are <code>mm/dd/yyyy</code> format</li><li>Times are <code>hh:mm:ss</code> format</li><li>Dates and times can be concatenated into DateTime types</li><li>There are some dates before January 1st 1970, which means we need a 64 bit DateTime</li></ul><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="alert-icon admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div><div class="alert-content admonitionContent_vXIg"><div class="admonitionHeading_TMsN">note</div><p>There are many more changes to be made to the types, they all can be determined by following the same investigation steps.  Look at the number of distinct strings in a field, the min and max of the numerics, and make your decisions.  The table schema that is given later in the guide has many low cardinality strings and unsigned integer fields and very few floating point numerics.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="concatenate-the-date-and-time-fields">Concatenate the date and time fields<a href="#concatenate-the-date-and-time-fields" class="hash-link" aria-label="Direct link to Concatenate the date and time fields" title="Direct link to Concatenate the date and time fields">​</a></h2><p>To concatenate the date and time fields <code>CMPLNT_FR_DT</code> and <code>CMPLNT_FR_TM</code> into a single <code>String</code> that can be cast to a <code>DateTime</code>, select the two fields joined by the concatenation operator: <code>CMPLNT_FR_DT || &#x27; &#x27; || CMPLNT_FR_TM</code>.  The <code>CMPLNT_TO_DT</code> and <code>CMPLNT_TO_TM</code> fields are handled similarly.</p><div class="language-sh codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">clickhouse-local --input_format_max_rows_to_read_for_schema_inference=2000 \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">--query \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">&quot;select CMPLNT_FR_DT || &#x27; &#x27; || CMPLNT_FR_TM AS complaint_begin FROM</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">file(&#x27;${HOME}/NYPD_Complaint_Data_Current__Year_To_Date_.tsv&#x27;, &#x27;TSVWithNames&#x27;)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">LIMIT 10</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">FORMAT PrettyCompact&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Result:</p><div class="language-response codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-response codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">┌─complaint_begin─────┐</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 07/29/2010 00:01:00 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 12/01/2011 12:00:00 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 04/01/2017 15:00:00 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 03/26/2018 17:20:00 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 01/01/2019 00:00:00 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 06/14/2019 00:00:00 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 11/29/2021 20:00:00 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 12/04/2021 00:35:00 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 12/05/2021 12:50:00 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 12/07/2021 20:30:00 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└─────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="convert-the-date-and-time-string-to-a-datetime64-type">Convert the date and time String to a DateTime64 type<a href="#convert-the-date-and-time-string-to-a-datetime64-type" class="hash-link" aria-label="Direct link to Convert the date and time String to a DateTime64 type" title="Direct link to Convert the date and time String to a DateTime64 type">​</a></h2><p>Earlier in the guide we discovered that there are dates in the TSV file before January 1st 1970, which means that we need a 64 bit DateTime type for the dates.  The dates also need to be converted from <code>MM/DD/YYYY</code> to <code>YYYY/MM/DD</code> format.  Both of these can be done with <a href="/docs/en/sql-reference/functions/type-conversion-functions#parsedatetime64besteffort"><code>parseDateTime64BestEffort()</code></a>.</p><div class="language-sh codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">clickhouse-local --input_format_max_rows_to_read_for_schema_inference=2000 \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">--query \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">&quot;WITH (CMPLNT_FR_DT || &#x27; &#x27; || CMPLNT_FR_TM) AS CMPLNT_START,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      (CMPLNT_TO_DT || &#x27; &#x27; || CMPLNT_TO_TM) AS CMPLNT_END</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">select parseDateTime64BestEffort(CMPLNT_START) AS complaint_begin,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">       parseDateTime64BestEffortOrNull(CMPLNT_END) AS complaint_end</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">FROM file(&#x27;${HOME}/NYPD_Complaint_Data_Current__Year_To_Date_.tsv&#x27;, &#x27;TSVWithNames&#x27;)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">ORDER BY complaint_begin ASC</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">LIMIT 25</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">FORMAT PrettyCompact&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Lines 2 and 3 above contain the concatenation from the previous step, and lines 4 and 5 above parse the strings into <code>DateTime64</code>.  As the complaint end time is not guaranteed to exist <code>parseDateTime64BestEffortOrNull</code> is used.</p><p>Result:</p><div class="language-response codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-response codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">┌─────────complaint_begin─┬───────────complaint_end─┐</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1925-01-01 10:00:00.000 │ 2021-02-12 09:30:00.000 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1925-01-01 11:37:00.000 │ 2022-01-16 11:49:00.000 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1925-01-01 15:00:00.000 │ 2021-12-31 00:00:00.000 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1925-01-01 15:00:00.000 │ 2022-02-02 22:00:00.000 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1925-01-01 19:00:00.000 │ 2022-04-14 05:00:00.000 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1955-09-01 19:55:00.000 │ 2022-08-01 00:45:00.000 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1972-03-17 11:40:00.000 │ 2022-03-17 11:43:00.000 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1972-05-23 22:00:00.000 │ 2022-05-24 09:00:00.000 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1972-05-30 23:37:00.000 │ 2022-05-30 23:50:00.000 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1972-07-04 02:17:00.000 │                    ᴺᵁᴸᴸ │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1973-01-01 00:00:00.000 │                    ᴺᵁᴸᴸ │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1975-01-01 00:00:00.000 │                    ᴺᵁᴸᴸ │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1976-11-05 00:01:00.000 │ 1988-10-05 23:59:00.000 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1977-01-01 00:00:00.000 │ 1977-01-01 23:59:00.000 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1977-12-20 00:01:00.000 │                    ᴺᵁᴸᴸ │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1981-01-01 00:01:00.000 │                    ᴺᵁᴸᴸ │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1981-08-14 00:00:00.000 │ 1987-08-13 23:59:00.000 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1983-01-07 00:00:00.000 │ 1990-01-06 00:00:00.000 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1984-01-01 00:01:00.000 │ 1984-12-31 23:59:00.000 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1985-01-01 12:00:00.000 │ 1987-12-31 15:00:00.000 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1985-01-11 09:00:00.000 │ 1985-12-31 12:00:00.000 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1986-03-16 00:05:00.000 │ 2022-03-16 00:45:00.000 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1987-01-07 00:00:00.000 │ 1987-01-09 00:00:00.000 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1988-04-03 18:30:00.000 │ 2022-08-03 09:45:00.000 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1988-07-29 12:00:00.000 │ 1990-07-27 22:00:00.000 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└─────────────────────────┴─────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="alert-icon admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div><div class="alert-content admonitionContent_vXIg"><div class="admonitionHeading_TMsN">note</div><p>The dates shown as <code>1925</code> above are from errors in the data.  There are several records in the original data with dates in the years <code>1019</code> - <code>1022</code> that should be <code>2019</code> - <code>2022</code>.  They are being stored as Jan 1st 1925 as that is the earliest date with a 64 bit DateTime.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-table">Create a table<a href="#create-a-table" class="hash-link" aria-label="Direct link to Create a table" title="Direct link to Create a table">​</a></h2><p>The decisions made above on the data types used for the columns are reflected in the table schema
below. We also need to decide on the <code>ORDER BY</code> and <code>PRIMARY KEY</code> used for the table.  At least one
of <code>ORDER BY</code> or <code>PRIMARY KEY</code> must be specified.  Here are some guidelines on deciding on the
columns to includes in <code>ORDER BY</code>, and more information is in the <em>Next Steps</em> section at the end
of this document.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="order-by-and-primary-key-clauses">Order By and Primary Key clauses<a href="#order-by-and-primary-key-clauses" class="hash-link" aria-label="Direct link to Order By and Primary Key clauses" title="Direct link to Order By and Primary Key clauses">​</a></h3><ul><li>The <code>ORDER BY</code> tuple should include fields that are used in query filters</li><li>To maximize compression on disk the <code>ORDER BY</code> tuple should be ordered by ascending cardinality</li><li>If it exists, the <code>PRIMARY KEY</code> tuple must be a subset of the <code>ORDER BY</code> tuple</li><li>If only <code>ORDER BY</code> is specified, then the same tuple will be used as <code>PRIMARY KEY</code></li><li>The primary key index is created using the <code>PRIMARY KEY</code> tuple if specified, otherwise the <code>ORDER BY</code> tuple</li><li>The <code>PRIMARY KEY</code> index is kept in main memory</li></ul><p>Looking at the dataset and the questions that might be answered by querying it we might
decide that we would look at the types of crimes reported over time in the five boroughs of
New York City.  These fields might be then included in the <code>ORDER BY</code>:</p><table><thead><tr><th>Column</th><th>Description (from the data dictionary)</th></tr></thead><tbody><tr><td>OFNS_DESC</td><td>Description of offense corresponding with key code</td></tr><tr><td>RPT_DT</td><td>Date event was reported to police</td></tr><tr><td>BORO_NM</td><td>The name of the borough in which the incident occurred</td></tr></tbody></table><p>Querying the TSV file for the cardinality of the three candidate columns:</p><div class="language-bash codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">clickhouse-local --input_format_max_rows_to_read_for_schema_inference</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token number" style="color:rgb(181, 206, 168)">2000</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">--query </span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token string" style="color:rgb(206, 145, 120)">&quot;select formatReadableQuantity(uniq(OFNS_DESC)) as cardinality_OFNS_DESC,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">        formatReadableQuantity(uniq(RPT_DT)) as cardinality_RPT_DT,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">        formatReadableQuantity(uniq(BORO_NM)) as cardinality_BORO_NM</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">  FROM</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">  file(&#x27;</span><span class="token string variable" style="color:rgb(156, 220, 254)">${</span><span class="token string variable environment constant" style="color:rgb(100, 102, 149)">HOME</span><span class="token string variable" style="color:rgb(156, 220, 254)">}</span><span class="token string" style="color:rgb(206, 145, 120)">/NYPD_Complaint_Data_Current__Year_To_Date_.tsv&#x27;, &#x27;TSVWithNames&#x27;)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">  FORMAT PrettyCompact&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Result:</p><div class="language-response codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-response codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">┌─cardinality_OFNS_DESC─┬─cardinality_RPT_DT─┬─cardinality_BORO_NM─┐</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 60.00                 │ 306.00             │ 6.00                │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└───────────────────────┴────────────────────┴─────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Ordering by cardinality, the <code>ORDER BY</code> becomes:</p><div class="codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">ORDER BY ( BORO_NM, OFNS_DESC, RPT_DT )</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="alert-icon admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div><div class="alert-content admonitionContent_vXIg"><div class="admonitionHeading_TMsN">note</div><p>The table below will use more easily read column names, the above names will be mapped to</p><div class="codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">ORDER BY ( borough, offense_description, date_reported )</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><p>Putting together the changes to data types and the <code>ORDER BY</code> tuple gives this table structure:</p><div class="language-sql codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">TABLE</span><span class="token plain"> NYPD_Complaint </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    complaint_number     String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    precinct             UInt8</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    borough              LowCardinality</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    complaint_begin      DateTime64</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;America/New_York&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    complaint_end        DateTime64</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;America/New_York&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    was_crime_completed  String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    housing_authority    String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    housing_level_code   UInt32</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    jurisdiction_code    UInt8</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    jurisdiction         LowCardinality</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    offense_code         UInt8</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    offense_level        LowCardinality</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    location_descriptor  LowCardinality</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    offense_description  LowCardinality</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    park_name            LowCardinality</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    patrol_borough       LowCardinality</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    PD_CD                UInt16</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    PD_DESC              String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    location_type        LowCardinality</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    date_reported        </span><span class="token keyword" style="color:rgb(86, 156, 214)">Date</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    transit_station      LowCardinality</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    suspect_age_group    LowCardinality</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    suspect_race         LowCardinality</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    suspect_sex          LowCardinality</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    transit_district     UInt8</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    victim_age_group     LowCardinality</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    victim_race          LowCardinality</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    victim_sex           LowCardinality</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    NY_x_coordinate      UInt32</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    NY_y_coordinate      UInt32</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    Latitude             Float64</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    Longitude            Float64</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">ENGINE</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> MergeTree</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token keyword" style="color:rgb(86, 156, 214)">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">BY</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain"> borough</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> offense_description</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> date_reported </span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="finding-the-primary-key-of-a-table">Finding the primary key of a table<a href="#finding-the-primary-key-of-a-table" class="hash-link" aria-label="Direct link to Finding the primary key of a table" title="Direct link to Finding the primary key of a table">​</a></h3><p>The ClickHouse <code>system</code> database, specifically <code>system.table</code> has all of the information about the table you
just created.  This query shows the <code>ORDER BY</code> (sorting key), and the <code>PRIMARY KEY</code>:</p><div class="language-sql codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    partition_key</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    sorting_key</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    primary_key</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">FROM</span><span class="token plain"> system</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">tables</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">WHERE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">table</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;NYPD_Complaint&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">FORMAT Vertical</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Response</p><div class="language-response codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-response codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">Query id: 6a5b10bf-9333-4090-b36e-c7f08b1d9e01</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Row 1:</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">──────</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">partition_key:</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">sorting_key:   borough, offense_description, date_reported</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">primary_key:   borough, offense_description, date_reported</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">table:         NYPD_Complaint</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">1 row in set. Elapsed: 0.001 sec.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="preprocess-import-data">Preprocess and Import Data<a href="#preprocess-import-data" class="hash-link" aria-label="Direct link to Preprocess and Import Data" title="Direct link to Preprocess and Import Data">​</a></h2><p>We will use <code>clickhouse-local</code> tool for data preprocessing and <code>clickhouse-client</code> to upload it.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="clickhouse-local-arguments-used"><code>clickhouse-local</code> arguments used<a href="#clickhouse-local-arguments-used" class="hash-link" aria-label="Direct link to clickhouse-local-arguments-used" title="Direct link to clickhouse-local-arguments-used">​</a></h3><div class="theme-admonition theme-admonition-tip alert alert--success admonition_WoCw"><div class="alert-icon admonitionIcon_Ibzs"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></div><div class="alert-content admonitionContent_vXIg"><div class="admonitionHeading_TMsN">tip</div><p><code>table=&#x27;input&#x27;</code> appears in the arguments to clickhouse-local below.  clickhouse-local takes the provided input (<code>cat ${HOME}/NYPD_Complaint_Data_Current__Year_To_Date_.tsv</code>) and inserts the input into a table.  By default the table is named <code>table</code>.  In this guide the name of the table is set to <code>input</code> to make the data flow clearer. The final argument to clickhouse-local is a query that selects from the table (<code>FROM input</code>) which is then piped to <code>clickhouse-client</code> to populate the table <code>NYPD_Complaint</code>.</p></div></div><div class="language-sql codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">cat ${HOME}</span><span class="token operator" style="color:rgb(212, 212, 212)">/</span><span class="token plain">NYPD_Complaint_Data_Current__Year_To_Date_</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">tsv \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> clickhouse</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token keyword" style="color:rgb(86, 156, 214)">local</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)">--table=&#x27;input&#x27; --input-format=&#x27;TSVWithNames&#x27; \</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">--input_format_max_rows_to_read_for_schema_inference=2000 \</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)">--query &quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">WITH</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">CMPLNT_FR_DT </span><span class="token operator" style="color:rgb(212, 212, 212)">||</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27; &#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">||</span><span class="token plain"> CMPLNT_FR_TM</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> CMPLNT_START</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">     </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">CMPLNT_TO_DT </span><span class="token operator" style="color:rgb(212, 212, 212)">||</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27; &#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">||</span><span class="token plain"> CMPLNT_TO_TM</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> CMPLNT_END</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      CMPLNT_NUM                                  </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> complaint_number</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      ADDR_PCT_CD                                 </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> precinct</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      BORO_NM                                     </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> borough</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      parseDateTime64BestEffort</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">CMPLNT_START</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">     </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> complaint_begin</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      parseDateTime64BestEffortOrNull</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">CMPLNT_END</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> complaint_end</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      CRM_ATPT_CPTD_CD                            </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> was_crime_completed</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      HADEVELOPT                                  </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> housing_authority_development</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      HOUSING_PSA                                 </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> housing_level_code</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      JURISDICTION_CODE                           </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> jurisdiction_code</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      JURIS_DESC                                  </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> jurisdiction</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      KY_CD                                       </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> offense_code</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      LAW_CAT_CD                                  </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> offense_level</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      LOC_OF_OCCUR_DESC                           </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> location_descriptor</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      OFNS_DESC                                   </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> offense_description</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      PARKS_NM                                    </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> park_name</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      PATROL_BORO                                 </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> patrol_borough</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      PD_CD</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      PD_DESC</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      PREM_TYP_DESC                               </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> location_type</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      toDate</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">parseDateTimeBestEffort</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">RPT_DT</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain">     </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> date_reported</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      STATION_NAME                                </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> transit_station</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      SUSP_AGE_GROUP                              </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> suspect_age_group</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      SUSP_RACE                                   </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> suspect_race</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      SUSP_SEX                                    </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> suspect_sex</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      TRANSIT_DISTRICT                            </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> transit_district</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      VIC_AGE_GROUP                               </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> victim_age_group</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      VIC_RACE                                    </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> victim_race</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      VIC_SEX                                     </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> victim_sex</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      X_COORD_CD                                  </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> NY_x_coordinate</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      Y_COORD_CD                                  </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> NY_y_coordinate</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      Latitude</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">      Longitude</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">FROM</span><span class="token plain"> input&quot; \</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> clickhouse</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">client </span><span class="token comment" style="color:rgb(106, 153, 85)">--query=&#x27;INSERT INTO NYPD_Complaint FORMAT TSV&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="validate-data">Validate the Data<a href="#validate-data" class="hash-link" aria-label="Direct link to Validate the Data" title="Direct link to Validate the Data">​</a></h2><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="alert-icon admonitionIcon_Ibzs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div><div class="alert-content admonitionContent_vXIg"><div class="admonitionHeading_TMsN">note</div><p>The dataset changes once or more per year, your counts may not match what is in this document.</p></div></div><p>Query:</p><div class="language-sql codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">SELECT</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">count</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">FROM</span><span class="token plain"> NYPD_Complaint</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Result:</p><div class="language-text codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">┌─count()─┐</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│  208993 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└─────────┘</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">1 row in set. Elapsed: 0.001 sec.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The size of the dataset in ClickHouse is just 12% of the original TSV file, compare the size of the original TSV file with the size of the table:</p><p>Query:</p><div class="language-sql codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">SELECT</span><span class="token plain"> formatReadableSize</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">total_bytes</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">FROM</span><span class="token plain"> system</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">tables</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">WHERE</span><span class="token plain"> name </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;NYPD_Complaint&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Result:</p><div class="language-text codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">┌─formatReadableSize(total_bytes)─┐</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 8.63 MiB                        │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└─────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="run-queries">Run Some Queries<a href="#run-queries" class="hash-link" aria-label="Direct link to Run Some Queries" title="Direct link to Run Some Queries">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-1-compare-the-number-of-complaints-by-month">Query 1. Compare the number of complaints by month<a href="#query-1-compare-the-number-of-complaints-by-month" class="hash-link" aria-label="Direct link to Query 1. Compare the number of complaints by month" title="Direct link to Query 1. Compare the number of complaints by month">​</a></h3><p>Query:</p><div class="language-sql codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    dateName</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;month&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> date_reported</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">month</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token function" style="color:rgb(220, 220, 170)">count</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> complaints</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    bar</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">complaints</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">50000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">80</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">FROM</span><span class="token plain"> NYPD_Complaint</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">month</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">BY</span><span class="token plain"> complaints </span><span class="token keyword" style="color:rgb(86, 156, 214)">DESC</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Result:</p><div class="language-response codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-response codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">Query id: 7fbd4244-b32a-4acf-b1f3-c3aa198e74d9</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">┌─month─────┬─complaints─┬─bar(count(), 0, 50000, 80)───────────────────────────────┐</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ March     │      34536 │ ███████████████████████████████████████████████████████▎ │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ May       │      34250 │ ██████████████████████████████████████████████████████▋  │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ April     │      32541 │ ████████████████████████████████████████████████████     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ January   │      30806 │ █████████████████████████████████████████████████▎       │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ February  │      28118 │ ████████████████████████████████████████████▊            │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ November  │       7474 │ ███████████▊                                             │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ December  │       7223 │ ███████████▌                                             │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ October   │       7070 │ ███████████▎                                             │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ September │       6910 │ ███████████                                              │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ August    │       6801 │ ██████████▊                                              │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ June      │       6779 │ ██████████▋                                              │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ July      │       6485 │ ██████████▍                                              │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└───────────┴────────────┴──────────────────────────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">12 rows in set. Elapsed: 0.006 sec. Processed 208.99 thousand rows, 417.99 KB (37.48 million rows/s., 74.96 MB/s.)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="query-2-compare-total-number-of-complaints-by-borough">Query 2. Compare total number of complaints by Borough<a href="#query-2-compare-total-number-of-complaints-by-borough" class="hash-link" aria-label="Direct link to Query 2. Compare total number of complaints by Borough" title="Direct link to Query 2. Compare total number of complaints by Borough">​</a></h3><p>Query:</p><div class="language-sql codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    borough</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token function" style="color:rgb(220, 220, 170)">count</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> complaints</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    bar</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">complaints</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">125000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">60</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">FROM</span><span class="token plain"> NYPD_Complaint</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">BY</span><span class="token plain"> borough</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">BY</span><span class="token plain"> complaints </span><span class="token keyword" style="color:rgb(86, 156, 214)">DESC</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Result:</p><div class="language-response codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-response codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">Query id: 8cdcdfd4-908f-4be0-99e3-265722a2ab8d</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">┌─borough───────┬─complaints─┬─bar(count(), 0, 125000, 60)──┐</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ BROOKLYN      │      57947 │ ███████████████████████████▋ │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ MANHATTAN     │      53025 │ █████████████████████████▍   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ QUEENS        │      44875 │ █████████████████████▌       │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ BRONX         │      44260 │ █████████████████████▏       │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ STATEN ISLAND │       8503 │ ████                         │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ (null)        │        383 │ ▏                            │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└───────────────┴────────────┴──────────────────────────────┘</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">6 rows in set. Elapsed: 0.008 sec. Processed 208.99 thousand rows, 209.43 KB (27.14 million rows/s., 27.20 MB/s.)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="next-steps">Next Steps<a href="#next-steps" class="hash-link" aria-label="Direct link to Next Steps" title="Direct link to Next Steps">​</a></h2><p><a href="/docs/en/optimize/sparse-primary-indexes">A Practical Introduction to Sparse Primary Indexes in ClickHouse</a> discusses the differences in ClickHouse indexing compared to traditional relational databases, how ClickHouse builds and uses a sparse primary index, and indexing best practices.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ClickHouse/ClickHouse/tree/master/docs/en/getting-started/example-datasets/nypd_complaint_data.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev paginationNavLink_UdUv" href="/docs/en/getting-started/example-datasets/metrica"><svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.2751 19.175L10.3251 18.125L5.4501 13.25H21.6001V11.75H5.4501L10.3251 6.87501L9.2751 5.82501L2.5751 12.5L9.2751 19.175Z" fill="currentColor"></path></svg><div class="paginationNavContent__3xr"><div class="pagination-nav__sublabel">Previous</div><div class="paginationNavLabel_YPzM pagination-nav__label">Web Analytics Data</div></div></a><a class="pagination-nav__link pagination-nav__link--next paginationNavLink_UdUv" href="/docs/en/getting-started/example-datasets/ontime"><div class="paginationNavContent__3xr"><div class="pagination-nav__sublabel">Next</div><div class="paginationNavLabel_YPzM pagination-nav__label">OnTime Airline Flight Data</div></div><svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.7249 19.175L13.6749 18.125L18.5499 13.25H2.3999V11.75H18.5499L13.6749 6.87501L14.7249 5.82501L21.4249 12.5L14.7249 19.175Z" fill="currentColor"></path></svg></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a><ul><li><a href="#a-note-about-the-commands-described-in-this-guide" class="table-of-contents__link toc-highlight">A note about the commands described in this guide</a></li></ul></li><li><a href="#familiarize-yourself-with-the-tsv-file" class="table-of-contents__link toc-highlight">Familiarize yourself with the TSV file</a><ul><li><a href="#look-at-the-fields-in-the-source-tsv-file" class="table-of-contents__link toc-highlight">Look at the fields in the source TSV file</a></li><li><a href="#determine-the-proper-schema" class="table-of-contents__link toc-highlight">Determine the proper schema</a></li><li><a href="#datetime-fields" class="table-of-contents__link toc-highlight">DateTime fields</a></li></ul></li><li><a href="#make-a-plan" class="table-of-contents__link toc-highlight">Make a plan</a></li><li><a href="#concatenate-the-date-and-time-fields" class="table-of-contents__link toc-highlight">Concatenate the date and time fields</a></li><li><a href="#convert-the-date-and-time-string-to-a-datetime64-type" class="table-of-contents__link toc-highlight">Convert the date and time String to a DateTime64 type</a></li><li><a href="#create-a-table" class="table-of-contents__link toc-highlight">Create a table</a><ul><li><a href="#order-by-and-primary-key-clauses" class="table-of-contents__link toc-highlight">Order By and Primary Key clauses</a></li><li><a href="#finding-the-primary-key-of-a-table" class="table-of-contents__link toc-highlight">Finding the primary key of a table</a></li></ul></li><li><a href="#preprocess-import-data" class="table-of-contents__link toc-highlight">Preprocess and Import Data</a><ul><li><a href="#clickhouse-local-arguments-used" class="table-of-contents__link toc-highlight"><code>clickhouse-local</code> arguments used</a></li></ul></li><li><a href="#validate-data" class="table-of-contents__link toc-highlight">Validate the Data</a></li><li><a href="#run-queries" class="table-of-contents__link toc-highlight">Run Some Queries</a><ul><li><a href="#query-1-compare-the-number-of-complaints-by-month" class="table-of-contents__link toc-highlight">Query 1. Compare the number of complaints by month</a></li><li><a href="#query-2-compare-total-number-of-complaints-by-borough" class="table-of-contents__link toc-highlight">Query 2. Compare total number of complaints by Borough</a></li></ul></li><li><a href="#next-steps" class="table-of-contents__link toc-highlight">Next Steps</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer_jryj"><div class="container_y1z5 container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">© 2016&ndash;2023 ClickHouse, Inc.</div></div><div><div class="footer__links text--center"><div class="footer__links"><a href="https://clickhouse.com/legal/trademark-policy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Trademark</a><span class="footer__link-separator">·</span><a href="https://clickhouse.com/legal/privacy-policy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy</a><span class="footer__link-separator">·</span><a href="https://trust.clickhouse.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Security</a><span class="footer__link-separator">·</span><a href="https://clickhouse.com/legal/agreements/terms-of-service" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Service</a></div></div></div></div><button class="colorModeButton_hk25"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.7227 0.724664C8.7227 0.330045 8.39191 0 8.0036 0C7.60809 0 7.2773 0.330045 7.2773 0.724664V2.18834C7.2773 2.57578 7.60809 2.90583 8.0036 2.90583C8.39191 2.90583 8.7227 2.57578 8.7227 2.18834V0.724664ZM11.5991 3.4009C11.3258 3.67354 11.3258 4.13274 11.6063 4.41256C11.8796 4.6852 12.347 4.69238 12.6274 4.40538L13.6629 3.3722C13.9434 3.09238 13.9362 2.62601 13.6629 2.34619C13.3897 2.07354 12.9222 2.08072 12.649 2.35336L11.5991 3.4009ZM3.37258 4.40538C3.64584 4.6852 4.11326 4.6852 4.38652 4.41256C4.66697 4.14709 4.66697 3.66637 4.4009 3.4009L3.3582 2.35336C3.09213 2.08789 2.61753 2.07354 2.34427 2.34619C2.07101 2.62601 2.06382 3.09238 2.33708 3.36502L3.37258 4.40538ZM7.9964 11.774C10.0602 11.774 11.7717 10.0664 11.7717 8C11.7717 5.93363 10.0602 4.22601 7.9964 4.22601C5.93258 4.22601 4.22112 5.93363 4.22112 8C4.22112 10.0664 5.93258 11.774 7.9964 11.774ZM7.9964 10.4395C6.65888 10.4395 5.55146 9.33453 5.55146 8C5.55146 6.66547 6.65888 5.56054 7.9964 5.56054C9.33393 5.56054 10.4413 6.66547 10.4413 8C10.4413 9.33453 9.33393 10.4395 7.9964 10.4395ZM15.2809 8.71749C15.6692 8.71749 16 8.38744 16 8C16 7.60538 15.6692 7.28251 15.2809 7.28251H13.8211C13.4328 7.28251 13.102 7.60538 13.102 8C13.102 8.38744 13.4328 8.71749 13.8211 8.71749H15.2809ZM0.719101 7.28251C0.330787 7.28251 0 7.60538 0 8C0 8.38744 0.330787 8.71749 0.719101 8.71749H2.17888C2.57438 8.71749 2.90517 8.38744 2.90517 8C2.90517 7.60538 2.57438 7.28251 2.17888 7.28251H0.719101ZM12.6202 11.5946C12.347 11.322 11.8796 11.322 11.5991 11.5946C11.3258 11.8744 11.3258 12.3336 11.6063 12.6135L12.649 13.6538C12.9294 13.9265 13.3897 13.9193 13.6701 13.6395C13.9434 13.3668 13.9434 12.9076 13.6629 12.6278L12.6202 11.5946ZM2.33708 12.6206C2.05663 12.9004 2.05663 13.3668 2.3227 13.6395C2.60315 13.9121 3.07056 13.9193 3.34382 13.6466L4.38652 12.6135C4.66697 12.3336 4.66697 11.8744 4.4009 11.6018C4.12045 11.322 3.65303 11.322 3.37258 11.5946L2.33708 12.6206ZM8.7227 13.8117C8.7227 13.4242 8.39191 13.0942 8.0036 13.0942C7.60809 13.0942 7.2773 13.4242 7.2773 13.8117V15.2753C7.2773 15.6628 7.60809 16 8.0036 16C8.39191 16 8.7227 15.6628 8.7227 15.2753V13.8117Z" fill="currentColor"></path></svg><span>light Mode</span></button></footer></div>
<script src="/docs/assets/js/runtime~main.7d1f9eed.js"></script>
<script src="/docs/assets/js/main.92fcbde1.js"></script>
</body>
</html>