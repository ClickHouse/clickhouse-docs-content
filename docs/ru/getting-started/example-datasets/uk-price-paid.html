<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-ru/getting-started/example-datasets/uk-price-paid">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Набор данных о стоимости недвижимости в Великобритании | ClickHouse Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://clickhouse.com/docs/img/logo.png"><meta data-rh="true" name="twitter:image" content="https://clickhouse.com/docs/img/logo.png"><meta data-rh="true" property="og:url" content="https://clickhouse.com/docs/ru/getting-started/example-datasets/uk-price-paid"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Набор данных о стоимости недвижимости в Великобритании | ClickHouse Docs"><meta data-rh="true" name="description" content="uk-property-price-paid}"><meta data-rh="true" property="og:description" content="uk-property-price-paid}"><link data-rh="true" rel="icon" href="/docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://clickhouse.com/docs/ru/getting-started/example-datasets/uk-price-paid"><link data-rh="true" rel="alternate" href="https://clickhouse.com/docs/ru/getting-started/example-datasets/uk-price-paid" hreflang="en"><link data-rh="true" rel="alternate" href="https://clickhouse.com/docs/ru/getting-started/example-datasets/uk-price-paid" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://62VCH2MD74-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/docs/knowledgebase/rss.xml" title="ClickHouse Knowledge Base Feed RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs/knowledgebase/atom.xml" title="ClickHouse Knowledge Base Feed Atom Feed">
<link rel="alternate" type="application/json" href="/docs/knowledgebase/feed.json" title="ClickHouse Knowledge Base Feed JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KF1LLRTQ5Q"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-KF1LLRTQ5Q",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="ClickHouse Docs" href="/docs/opensearch.xml">





<script src="/docs/js/analytics.js"></script><link rel="stylesheet" href="/docs/assets/css/styles.d4633d58.css">
<link rel="preload" href="/docs/assets/js/runtime~main.7711f5d4.js" as="script">
<link rel="preload" href="/docs/assets/js/main.ff0025b5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navBar_gvJn"><div class="navbarHeaderContainer_rccn navbar-header"><div class="navbar__inner navbarInner_W6bg"><div class="navbar__items"><a href="https://clickhouse.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/docs/img/logo_without_text.svg" alt="ClickHouse" class="themedImage_ToTc themedImage--light_HNdA"><img src="/docs/img/logo_without_text.svg" alt="ClickHouse" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">ClickHouse</b></a><div class="navbarItemsList_uIZ2 navbar-items-list"><div class="navbar__item dropdown"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link ch-menu">Product</a><ul class="dropdown__menu"><li><a href="https://clickhouse.com/cloud" target="_blank" rel="noopener noreferrer" class="dropdown__link">ClickHouse Cloud</a></li><li><a href="https://clickhouse.com/clickhouse" target="_blank" rel="noopener noreferrer" class="dropdown__link">ClickHouse Open Source</a></li></ul></div><a href="https://clickhouse.com/customer-stories" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link ch-menu">Use Cases</a><div class="navbar__item dropdown"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link ch-menu">Company</a><ul class="dropdown__menu"><li><a href="https://clickhouse.com/blog" target="_blank" rel="noopener noreferrer" class="dropdown__link">Blog</a></li><li><a href="https://clickhouse.com/company/our-story" target="_blank" rel="noopener noreferrer" class="dropdown__link">Our story</a></li><li><a href="https://clickhouse.com/company/careers" target="_blank" rel="noopener noreferrer" class="dropdown__link">Careers</a></li><li><a href="https://clickhouse.com/company/contact" target="_blank" rel="noopener noreferrer" class="dropdown__link">Contact us</a></li><li><a href="https://clickhouse.com/company/news-events" target="_blank" rel="noopener noreferrer" class="dropdown__link">News and events</a></li></ul></div><div class="navbar__item dropdown"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link ch-menu">Learn</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/en/intro">Docs</a></li><li><a href="https://clickhouse.com/learn" target="_blank" rel="noopener noreferrer" class="dropdown__link">ClickHouse Academy</a></li></ul></div><a href="https://clickhouse.com/pricing" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link ch-menu">Pricing</a></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item">
                <div class="nav-items-btns">
                  <a href="https://clickhouse.cloud/signIn" class="sign-in navbar__item navbar__link ch-menu">
                    Sign in
                  </a>
                  <a href="https://clickhouse.cloud/signUp" class="click-button-anchor">
                    <button class="click-button primary-btn">Free Trial</button>
                  </a>
                </div></div><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button></div></div><div class="secondary-nav--items secondaryMenu_iuff"><div class="scrollableElement_Qqzp secondaryMenuLeft_tFZR secondary-nav--items-left"><a class="navbar__item navbar__link ch-menu" href="/docs/en/intro">Docs</a><a class="navbar__item navbar__link ch-menu" href="/docs/en/cloud/overview">Cloud</a><a class="navbar__item navbar__link ch-menu" href="/docs/en/sql-reference">SQL Reference</a><a class="navbar__item navbar__link ch-menu" href="/docs/knowledgebase">Knowledge Base</a></div><div class="secondaryMenuRight__9m4 secondary-nav--items-right"><div class="navbar__item dropdown dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg width="14" height="13" viewBox="0 0 14 13" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6.95 12.6496L9.75 5.26628H11.0333L13.8333 12.6496H12.55L11.9 10.7663H8.91667L8.25 12.6496H6.95ZM9.28333 9.69961H11.5L10.4167 6.64961H10.3667L9.28333 9.69961ZM2.08333 10.7996L1.21667 9.93294L4.33333 6.83294C3.94444 6.39961 3.60556 5.95228 3.31667 5.49094C3.02778 5.03005 2.77222 4.54405 2.55 4.03294H3.83333C4.02222 4.41072 4.22222 4.74672 4.43333 5.04094C4.64444 5.33561 4.89444 5.64405 5.18333 5.96628C5.63889 5.47739 6.01667 4.97472 6.31667 4.45828C6.61667 3.94139 6.86667 3.3885 7.06667 2.79961H0.25V1.58294H4.55V0.349609H5.78333V1.58294H10.0833V2.79961H8.3C8.07778 3.53294 7.78333 4.24116 7.41667 4.92428C7.05 5.60783 6.59444 6.25516 6.05 6.86628L7.53333 8.36628L7.06667 9.63294L5.16667 7.73294L2.08333 10.7996Z" fill="currentColor"/>
</svg></a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/en/intro">English</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/ru">Russian</a></li><li><a class="dropdown__link" href="/docs/zh">Chinese</a></li></ul></div><button class="colorModeButton_hk25 navbar-color-toggle"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.7227 0.724664C8.7227 0.330045 8.39191 0 8.0036 0C7.60809 0 7.2773 0.330045 7.2773 0.724664V2.18834C7.2773 2.57578 7.60809 2.90583 8.0036 2.90583C8.39191 2.90583 8.7227 2.57578 8.7227 2.18834V0.724664ZM11.5991 3.4009C11.3258 3.67354 11.3258 4.13274 11.6063 4.41256C11.8796 4.6852 12.347 4.69238 12.6274 4.40538L13.6629 3.3722C13.9434 3.09238 13.9362 2.62601 13.6629 2.34619C13.3897 2.07354 12.9222 2.08072 12.649 2.35336L11.5991 3.4009ZM3.37258 4.40538C3.64584 4.6852 4.11326 4.6852 4.38652 4.41256C4.66697 4.14709 4.66697 3.66637 4.4009 3.4009L3.3582 2.35336C3.09213 2.08789 2.61753 2.07354 2.34427 2.34619C2.07101 2.62601 2.06382 3.09238 2.33708 3.36502L3.37258 4.40538ZM7.9964 11.774C10.0602 11.774 11.7717 10.0664 11.7717 8C11.7717 5.93363 10.0602 4.22601 7.9964 4.22601C5.93258 4.22601 4.22112 5.93363 4.22112 8C4.22112 10.0664 5.93258 11.774 7.9964 11.774ZM7.9964 10.4395C6.65888 10.4395 5.55146 9.33453 5.55146 8C5.55146 6.66547 6.65888 5.56054 7.9964 5.56054C9.33393 5.56054 10.4413 6.66547 10.4413 8C10.4413 9.33453 9.33393 10.4395 7.9964 10.4395ZM15.2809 8.71749C15.6692 8.71749 16 8.38744 16 8C16 7.60538 15.6692 7.28251 15.2809 7.28251H13.8211C13.4328 7.28251 13.102 7.60538 13.102 8C13.102 8.38744 13.4328 8.71749 13.8211 8.71749H15.2809ZM0.719101 7.28251C0.330787 7.28251 0 7.60538 0 8C0 8.38744 0.330787 8.71749 0.719101 8.71749H2.17888C2.57438 8.71749 2.90517 8.38744 2.90517 8C2.90517 7.60538 2.57438 7.28251 2.17888 7.28251H0.719101ZM12.6202 11.5946C12.347 11.322 11.8796 11.322 11.5991 11.5946C11.3258 11.8744 11.3258 12.3336 11.6063 12.6135L12.649 13.6538C12.9294 13.9265 13.3897 13.9193 13.6701 13.6395C13.9434 13.3668 13.9434 12.9076 13.6629 12.6278L12.6202 11.5946ZM2.33708 12.6206C2.05663 12.9004 2.05663 13.3668 2.3227 13.6395C2.60315 13.9121 3.07056 13.9193 3.34382 13.6466L4.38652 12.6135C4.66697 12.3336 4.66697 11.8744 4.4009 11.6018C4.12045 11.322 3.65303 11.322 3.37258 11.5946L2.33708 12.6206ZM8.7227 13.8117C8.7227 13.4242 8.39191 13.0942 8.0036 13.0942C7.60809 13.0942 7.2773 13.4242 7.2773 13.8117V15.2753C7.2773 15.6628 7.60809 16 8.0036 16C8.39191 16 8.7227 15.6628 8.7227 15.2753V13.8117Z" fill="currentColor"></path></svg><span>light Mode</span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_W2AM"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage_qMb8"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_mhZE"><div class="sidebarSearchContainer_Lwc8"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_Y1UP"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/ru">Что такое ClickHouse</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/введение">Введение</a><button aria-label="Toggle the collapsible sidebar category &#x27;Введение&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/ru/getting-started">Начало работы</a><button aria-label="Toggle the collapsible sidebar category &#x27;Начало работы&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/getting-started/install">Установка</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/getting-started/tutorial">Tutorial</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/ru/getting-started/example-datasets">Тестовые массивы данных</a><button aria-label="Toggle the collapsible sidebar category &#x27;Тестовые массивы данных&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/getting-started/example-datasets/metrica">Анонимизированные данные Яндекс.Метрики</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/getting-started/example-datasets/recipes">Набор данных кулинарных рецептов</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/getting-started/example-datasets/star-schema">Star Schema Benchmark</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/getting-started/example-datasets/wikistat">WikiStat</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/getting-started/example-datasets/criteo">Терабайт логов кликов от Criteo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/getting-started/example-datasets/amplab-benchmark">AMPLab Big Data Benchmark</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/getting-started/example-datasets/brown-benchmark">Brown University Benchmark</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/getting-started/example-datasets/nyc-taxi">Данные о такси в Нью-Йорке</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/getting-started/example-datasets/opensky">Набор данных о воздушном движении OpenSky Network 2020</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/ru/getting-started/example-datasets/uk-price-paid">Набор данных о стоимости недвижимости в Великобритании</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/getting-started/example-datasets/cell-towers">Вышки сотовой связи</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/getting-started/example-datasets/menus">Меню</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/getting-started/example-datasets/ontime">OnTime</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/getting-started/example-datasets/github-events">GitHub Events</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/getting-started/playground">Playground</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ru/interfaces">Интерфейсы</a><button aria-label="Toggle the collapsible sidebar category &#x27;Интерфейсы&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/engines">Engines</a><button aria-label="Toggle the collapsible sidebar category &#x27;Engines&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ru/sql-reference">Справка по SQL</a><button aria-label="Toggle the collapsible sidebar category &#x27;Справка по SQL&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/ru/guides">Руководства</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ru/operations">Эксплуатация</a><button aria-label="Toggle the collapsible sidebar category &#x27;Эксплуатация&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/инструкция-для-разработчиков">Инструкция для разработчиков</a><button aria-label="Toggle the collapsible sidebar category &#x27;Инструкция для разработчиков&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ru/commercial">Коммерческие услуги</a><button aria-label="Toggle the collapsible sidebar category &#x27;Коммерческие услуги&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ru/whats-new">What&#x27;s New</a><button aria-label="Toggle the collapsible sidebar category &#x27;What&#x27;s New&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ru/faq">F.A.Q.</a><button aria-label="Toggle the collapsible sidebar category &#x27;F.A.Q.&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ru/about-us">About Us</a><button aria-label="Toggle the collapsible sidebar category &#x27;About Us&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_RiV8"><div class="container padding-top--md padding-bottom--lg main-content-wrapper"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><div class="theme-doc-markdown markdown"><h1>Набор данных о стоимости недвижимости в Великобритании</h1><p>Набор содержит данные о стоимости недвижимости в Англии и Уэльсе. Данные доступны с 1995 года.
Размер набора данных в несжатом виде составляет около 4 GiB, а в ClickHouse он займет около 278 MiB.</p><p>Источник: <a href="https://www.gov.uk/government/statistical-data-sets/price-paid-data-downloads" target="_blank" rel="noopener noreferrer">https://www.gov.uk/government/statistical-data-sets/price-paid-data-downloads</a>
Описание полей таблицы: <a href="https://www.gov.uk/guidance/about-the-price-paid-data" target="_blank" rel="noopener noreferrer">https://www.gov.uk/guidance/about-the-price-paid-data</a></p><p>Набор содержит данные HM Land Registry data © Crown copyright and database right 2021. Эти данные лицензированы в соответствии с Open Government Licence v3.0.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="download-dataset">Загрузите набор данных<a href="#download-dataset" class="hash-link" aria-label="Direct link to Загрузите набор данных" title="Direct link to Загрузите набор данных">​</a></h2><p>Выполните команду:</p><div class="language-bash codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token function" style="color:rgb(220, 220, 170)">wget</span><span class="token plain"> http://prod.publicdata.landregistry.gov.uk.s3-website-eu-west-1.amazonaws.com/pp-complete.csv</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Загрузка займет около 2 минут при хорошем подключении к интернету.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-table">Создайте таблицу<a href="#create-table" class="hash-link" aria-label="Direct link to Создайте таблицу" title="Direct link to Создайте таблицу">​</a></h2><div class="language-sql codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">TABLE</span><span class="token plain"> uk_price_paid</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    price UInt32</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">date</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">Date</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    postcode1 LowCardinality</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    postcode2 LowCardinality</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">type</span><span class="token plain"> Enum8</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;terraced&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;semi-detached&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;detached&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;flat&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">4</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;other&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    is_new UInt8</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    duration Enum8</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;freehold&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;leasehold&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;unknown&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    addr1 String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    addr2 String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    street LowCardinality</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    locality LowCardinality</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    town LowCardinality</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    district LowCardinality</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    county LowCardinality</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">String</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    category UInt8</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">ENGINE</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> MergeTree </span><span class="token keyword" style="color:rgb(86, 156, 214)">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">BY</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">postcode1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> postcode2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> addr1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> addr2</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="preprocess-import-data">Обработайте и импортируйте данные<a href="#preprocess-import-data" class="hash-link" aria-label="Direct link to Обработайте и импортируйте данные" title="Direct link to Обработайте и импортируйте данные">​</a></h2><p>В этом примере используется <code>clickhouse-local</code> для предварительной обработки данных и <code>clickhouse-client</code> для импорта данных.</p><p>Указывается структура исходных данных CSV-файла и запрос для предварительной обработки данных с помощью <code>clickhouse-local</code>.</p><p>Предварительная обработка включает:</p><ul><li>разделение почтового индекса на два разных столбца <code>postcode1</code> и <code>postcode2</code>, что лучше подходит для хранения данных и выполнения запросов к ним;</li><li>преобразование поля <code>time</code> в дату, поскольку оно содержит только время 00:00;</li><li>поле <a href="/docs/ru/sql-reference/data-types/uuid">UUid</a> игнорируется, потому что оно не будет использовано для анализа;</li><li>преобразование полей <code>type</code> и <code>duration</code> в более читаемые поля типа <code>Enum</code> с помощью функции <a href="/docs/ru/sql-reference/functions/other-functions#transform">transform</a>;</li><li>преобразование полей <code>is_new</code> и <code>category</code> из односимвольной строки (<code>Y</code>/<code>N</code> и <code>A</code>/<code>B</code>) в поле <a href="/docs/ru/sql-reference/data-types/int-uint#uint8-uint16-uint32-uint64-uint256-int8-int16-int32-int64-int128-int256">UInt8</a> со значениями 0 и 1 соответственно.</li></ul><p>Обработанные данные передаются в <code>clickhouse-client</code> и импортируются в таблицу ClickHouse потоковым способом.</p><div class="language-bash codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">clickhouse-local --input-format CSV --structure </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">    uuid String,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">    price UInt32,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">    time DateTime,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">    postcode String,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">    a String,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">    b String,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">    c String,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">    addr1 String,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">    addr2 String,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">    street String,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">    locality String,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">    town String,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">    district String,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">    county String,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">    d String,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">    e String</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">&#x27;</span><span class="token plain"> --query </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">    WITH splitByChar(&#x27; &#x27;, postcode) AS p</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">    SELECT</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">        price,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">        toDate(time) AS date,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">        p[1] AS postcode1,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">        p[2] AS postcode2,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">        transform(a, [&#x27;T&#x27;, &#x27;S&#x27;, &#x27;D&#x27;, &#x27;F&#x27;, &#x27;O&#x27;], [&#x27;terraced&#x27;, &#x27;semi-detached&#x27;, &#x27;detached&#x27;, &#x27;flat&#x27;, &#x27;other&#x27;]) AS type,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">        b = &#x27;Y&#x27; AS is_new,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">        transform(c, [&#x27;F&#x27;, &#x27;L&#x27;, &#x27;U&#x27;], [&#x27;freehold&#x27;, &#x27;leasehold&#x27;, &#x27;unknown&#x27;]) AS duration,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">        addr1,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">        addr2,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">        street,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">        locality,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">        town,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">        district,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">        county,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">        d = &#x27;B&#x27; AS category</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token string" style="color:rgb(206, 145, 120)">    FROM table&quot;</span><span class="token plain"> --date_time_input_format best_effort </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain"> pp-complete.csv </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> clickhouse-client --query </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;INSERT INTO uk_price_paid FORMAT TSV&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Выполнение запроса займет около 40 секунд.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="validate-data">Проверьте импортированные данные<a href="#validate-data" class="hash-link" aria-label="Direct link to Проверьте импортированные данные" title="Direct link to Проверьте импортированные данные">​</a></h2><p>Запрос:</p><div class="language-sql codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">SELECT</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">count</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">FROM</span><span class="token plain"> uk_price_paid</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Результат:</p><div class="language-text codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">┌──count()─┐</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 26321785 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└──────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Размер набора данных в ClickHouse составляет всего 278 MiB, проверьте это.</p><p>Запрос:</p><div class="language-sql codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">SELECT</span><span class="token plain"> formatReadableSize</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">total_bytes</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">FROM</span><span class="token plain"> system</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token keyword" style="color:rgb(86, 156, 214)">tables</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">WHERE</span><span class="token plain"> name </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;uk_price_paid&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Результат:</p><div class="language-text codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">┌─formatReadableSize(total_bytes)─┐</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 278.80 MiB                      │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└─────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="run-queries">Примеры запросов<a href="#run-queries" class="hash-link" aria-label="Direct link to Примеры запросов" title="Direct link to Примеры запросов">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="average-price">Запрос 1. Средняя цена за год<a href="#average-price" class="hash-link" aria-label="Direct link to Запрос 1. Средняя цена за год" title="Direct link to Запрос 1. Средняя цена за год">​</a></h3><p>Запрос:</p><div class="language-sql codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">SELECT</span><span class="token plain"> toYear</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token keyword" style="color:rgb(86, 156, 214)">date</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">year</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">round</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token function" style="color:rgb(220, 220, 170)">avg</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">price</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> price</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> bar</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">price</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1000000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">80</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">FROM</span><span class="token plain"> uk_price_paid </span><span class="token keyword" style="color:rgb(86, 156, 214)">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">year</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">year</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Результат:</p><div class="language-text codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">┌─year─┬──price─┬─bar(round(avg(price)), 0, 1000000, 80)─┐</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1995 │  67932 │ █████▍                                 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1996 │  71505 │ █████▋                                 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1997 │  78532 │ ██████▎                                │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1998 │  85436 │ ██████▋                                │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1999 │  96037 │ ███████▋                               │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2000 │ 107479 │ ████████▌                              │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2001 │ 118885 │ █████████▌                             │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2002 │ 137941 │ ███████████                            │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2003 │ 155889 │ ████████████▍                          │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2004 │ 178885 │ ██████████████▎                        │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2005 │ 189351 │ ███████████████▏                       │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2006 │ 203528 │ ████████████████▎                      │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2007 │ 219378 │ █████████████████▌                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2008 │ 217056 │ █████████████████▎                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2009 │ 213419 │ █████████████████                      │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2010 │ 236109 │ ██████████████████▊                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2011 │ 232805 │ ██████████████████▌                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2012 │ 238367 │ ███████████████████                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2013 │ 256931 │ ████████████████████▌                  │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2014 │ 279915 │ ██████████████████████▍                │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2015 │ 297266 │ ███████████████████████▋               │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2016 │ 313201 │ █████████████████████████              │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2017 │ 346097 │ ███████████████████████████▋           │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2018 │ 350116 │ ████████████████████████████           │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2019 │ 351013 │ ████████████████████████████           │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2020 │ 369420 │ █████████████████████████████▌         │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2021 │ 386903 │ ██████████████████████████████▊        │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└──────┴────────┴────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="average-price-london">Запрос 2. Средняя цена за год в Лондоне<a href="#average-price-london" class="hash-link" aria-label="Direct link to Запрос 2. Средняя цена за год в Лондоне" title="Direct link to Запрос 2. Средняя цена за год в Лондоне">​</a></h3><p>Запрос:</p><div class="language-sql codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">SELECT</span><span class="token plain"> toYear</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token keyword" style="color:rgb(86, 156, 214)">date</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">year</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">round</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token function" style="color:rgb(220, 220, 170)">avg</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">price</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> price</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> bar</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">price</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2000000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">100</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">FROM</span><span class="token plain"> uk_price_paid </span><span class="token keyword" style="color:rgb(86, 156, 214)">WHERE</span><span class="token plain"> town </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;LONDON&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">year</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">year</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Результат:</p><div class="language-text codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">┌─year─┬───price─┬─bar(round(avg(price)), 0, 2000000, 100)───────────────┐</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1995 │  109116 │ █████▍                                                │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1996 │  118667 │ █████▊                                                │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1997 │  136518 │ ██████▋                                               │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1998 │  152983 │ ███████▋                                              │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1999 │  180637 │ █████████                                             │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2000 │  215838 │ ██████████▋                                           │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2001 │  232994 │ ███████████▋                                          │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2002 │  263670 │ █████████████▏                                        │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2003 │  278394 │ █████████████▊                                        │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2004 │  304666 │ ███████████████▏                                      │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2005 │  322875 │ ████████████████▏                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2006 │  356191 │ █████████████████▋                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2007 │  404054 │ ████████████████████▏                                 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2008 │  420741 │ █████████████████████                                 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2009 │  427753 │ █████████████████████▍                                │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2010 │  480306 │ ████████████████████████                              │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2011 │  496274 │ ████████████████████████▋                             │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2012 │  519442 │ █████████████████████████▊                            │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2013 │  616212 │ ██████████████████████████████▋                       │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2014 │  724154 │ ████████████████████████████████████▏                 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2015 │  792129 │ ███████████████████████████████████████▌              │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2016 │  843655 │ ██████████████████████████████████████████▏           │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2017 │  982642 │ █████████████████████████████████████████████████▏    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2018 │ 1016835 │ ██████████████████████████████████████████████████▋   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2019 │ 1042849 │ ████████████████████████████████████████████████████▏ │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2020 │ 1011889 │ ██████████████████████████████████████████████████▌   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2021 │  960343 │ ████████████████████████████████████████████████      │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└──────┴─────────┴───────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Что-то случилось в 2013 году. Я понятия не имею. Может быть, вы имеете представление о том, что произошло в 2020 году?</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="most-expensive-neighborhoods">Запрос 3. Самые дорогие районы<a href="#most-expensive-neighborhoods" class="hash-link" aria-label="Direct link to Запрос 3. Самые дорогие районы" title="Direct link to Запрос 3. Самые дорогие районы">​</a></h3><p>Запрос:</p><div class="language-sql codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    town</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    district</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token function" style="color:rgb(220, 220, 170)">count</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token function" style="color:rgb(220, 220, 170)">round</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token function" style="color:rgb(220, 220, 170)">avg</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">price</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> price</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    bar</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">price</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5000000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">100</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">FROM</span><span class="token plain"> uk_price_paid</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">WHERE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">date</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;2020-01-01&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">BY</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    town</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    district</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">HAVING</span><span class="token plain"> c </span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">BY</span><span class="token plain"> price </span><span class="token keyword" style="color:rgb(86, 156, 214)">DESC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">LIMIT</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">100</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Результат:</p><div class="language-text codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">┌─town─────────────────┬─district───────────────┬────c─┬───price─┬─bar(round(avg(price)), 0, 5000000, 100)────────────────────────────┐</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ CITY OF WESTMINSTER    │ 3606 │ 3280239 │ █████████████████████████████████████████████████████████████████▌ │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ CITY OF LONDON         │  274 │ 3160502 │ ███████████████████████████████████████████████████████████████▏   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ KENSINGTON AND CHELSEA │ 2550 │ 2308478 │ ██████████████████████████████████████████████▏                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LEATHERHEAD          │ ELMBRIDGE              │  114 │ 1897407 │ █████████████████████████████████████▊                             │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ CAMDEN                 │ 3033 │ 1805404 │ ████████████████████████████████████                               │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ VIRGINIA WATER       │ RUNNYMEDE              │  156 │ 1753247 │ ███████████████████████████████████                                │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ WINDLESHAM           │ SURREY HEATH           │  108 │ 1677613 │ █████████████████████████████████▌                                 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ THORNTON HEATH       │ CROYDON                │  546 │ 1671721 │ █████████████████████████████████▍                                 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ BARNET               │ ENFIELD                │  124 │ 1505840 │ ██████████████████████████████                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ COBHAM               │ ELMBRIDGE              │  387 │ 1237250 │ ████████████████████████▋                                          │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ ISLINGTON              │ 2668 │ 1236980 │ ████████████████████████▋                                          │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ OXFORD               │ SOUTH OXFORDSHIRE      │  321 │ 1220907 │ ████████████████████████▍                                          │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ RICHMOND UPON THAMES   │  704 │ 1215551 │ ████████████████████████▎                                          │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ HOUNSLOW               │  671 │ 1207493 │ ████████████████████████▏                                          │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ ASCOT                │ WINDSOR AND MAIDENHEAD │  407 │ 1183299 │ ███████████████████████▋                                           │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ BEACONSFIELD         │ BUCKINGHAMSHIRE        │  330 │ 1175615 │ ███████████████████████▌                                           │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ RICHMOND             │ RICHMOND UPON THAMES   │  874 │ 1110444 │ ██████████████████████▏                                            │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ HAMMERSMITH AND FULHAM │ 3086 │ 1053983 │ █████████████████████                                              │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ SURBITON             │ ELMBRIDGE              │  100 │ 1011800 │ ████████████████████▏                                              │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ RADLETT              │ HERTSMERE              │  283 │ 1011712 │ ████████████████████▏                                              │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ SALCOMBE             │ SOUTH HAMS             │  127 │ 1011624 │ ████████████████████▏                                              │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ WEYBRIDGE            │ ELMBRIDGE              │  655 │ 1007265 │ ████████████████████▏                                              │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ ESHER                │ ELMBRIDGE              │  485 │  986581 │ ███████████████████▋                                               │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LEATHERHEAD          │ GUILDFORD              │  202 │  977320 │ ███████████████████▌                                               │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ BURFORD              │ WEST OXFORDSHIRE       │  111 │  966893 │ ███████████████████▎                                               │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ BROCKENHURST         │ NEW FOREST             │  129 │  956675 │ ███████████████████▏                                               │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ HINDHEAD             │ WAVERLEY               │  137 │  953753 │ ███████████████████                                                │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ GERRARDS CROSS       │ BUCKINGHAMSHIRE        │  419 │  951121 │ ███████████████████                                                │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ EAST MOLESEY         │ ELMBRIDGE              │  192 │  936769 │ ██████████████████▋                                                │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ CHALFONT ST GILES    │ BUCKINGHAMSHIRE        │  146 │  925515 │ ██████████████████▌                                                │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ TOWER HAMLETS          │ 4388 │  918304 │ ██████████████████▎                                                │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ OLNEY                │ MILTON KEYNES          │  235 │  910646 │ ██████████████████▏                                                │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ HENLEY-ON-THAMES     │ SOUTH OXFORDSHIRE      │  540 │  902418 │ ██████████████████                                                 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ SOUTHWARK              │ 3885 │  892997 │ █████████████████▋                                                 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ KINGSTON UPON THAMES │ KINGSTON UPON THAMES   │  960 │  885969 │ █████████████████▋                                                 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ EALING                 │ 2658 │  871755 │ █████████████████▍                                                 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ CRANBROOK            │ TUNBRIDGE WELLS        │  431 │  862348 │ █████████████████▏                                                 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ MERTON                 │ 2099 │  859118 │ █████████████████▏                                                 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ BELVEDERE            │ BEXLEY                 │  346 │  842423 │ ████████████████▋                                                  │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ GUILDFORD            │ WAVERLEY               │  143 │  841277 │ ████████████████▋                                                  │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ HARPENDEN            │ ST ALBANS              │  657 │  841216 │ ████████████████▋                                                  │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ HACKNEY                │ 3307 │  837090 │ ████████████████▋                                                  │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ WANDSWORTH             │ 6566 │  832663 │ ████████████████▋                                                  │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ MAIDENHEAD           │ BUCKINGHAMSHIRE        │  123 │  824299 │ ████████████████▍                                                  │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ KINGS LANGLEY        │ DACORUM                │  145 │  821331 │ ████████████████▍                                                  │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ BERKHAMSTED          │ DACORUM                │  543 │  818415 │ ████████████████▎                                                  │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ GREAT MISSENDEN      │ BUCKINGHAMSHIRE        │  226 │  802807 │ ████████████████                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ BILLINGSHURST        │ CHICHESTER             │  144 │  797829 │ ███████████████▊                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ WOKING               │ GUILDFORD              │  176 │  793494 │ ███████████████▋                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ STOCKBRIDGE          │ TEST VALLEY            │  178 │  793269 │ ███████████████▋                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ EPSOM                │ REIGATE AND BANSTEAD   │  172 │  791862 │ ███████████████▋                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ TONBRIDGE            │ TUNBRIDGE WELLS        │  360 │  787876 │ ███████████████▋                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ TEDDINGTON           │ RICHMOND UPON THAMES   │  595 │  786492 │ ███████████████▋                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ TWICKENHAM           │ RICHMOND UPON THAMES   │ 1155 │  786193 │ ███████████████▋                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LYNDHURST            │ NEW FOREST             │  102 │  785593 │ ███████████████▋                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ LAMBETH                │ 5228 │  774574 │ ███████████████▍                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ BARNET                 │ 3955 │  773259 │ ███████████████▍                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ OXFORD               │ VALE OF WHITE HORSE    │  353 │  772088 │ ███████████████▍                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ TONBRIDGE            │ MAIDSTONE              │  305 │  770740 │ ███████████████▍                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LUTTERWORTH          │ HARBOROUGH             │  538 │  768634 │ ███████████████▎                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ WOODSTOCK            │ WEST OXFORDSHIRE       │  140 │  766037 │ ███████████████▎                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ MIDHURST             │ CHICHESTER             │  257 │  764815 │ ███████████████▎                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ MARLOW               │ BUCKINGHAMSHIRE        │  327 │  761876 │ ███████████████▏                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ NEWHAM                 │ 3237 │  761784 │ ███████████████▏                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ ALDERLEY EDGE        │ CHESHIRE EAST          │  178 │  757318 │ ███████████████▏                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LUTON                │ CENTRAL BEDFORDSHIRE   │  212 │  754283 │ ███████████████                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ PETWORTH             │ CHICHESTER             │  154 │  754220 │ ███████████████                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ ALRESFORD            │ WINCHESTER             │  219 │  752718 │ ███████████████                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ POTTERS BAR          │ WELWYN HATFIELD        │  174 │  748465 │ ██████████████▊                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ HASLEMERE            │ CHICHESTER             │  128 │  746907 │ ██████████████▊                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ TADWORTH             │ REIGATE AND BANSTEAD   │  502 │  743252 │ ██████████████▋                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ THAMES DITTON        │ ELMBRIDGE              │  244 │  741913 │ ██████████████▋                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ REIGATE              │ REIGATE AND BANSTEAD   │  581 │  738198 │ ██████████████▋                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ BOURNE END           │ BUCKINGHAMSHIRE        │  138 │  735190 │ ██████████████▋                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ SEVENOAKS            │ SEVENOAKS              │ 1156 │  730018 │ ██████████████▌                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ OXTED                │ TANDRIDGE              │  336 │  729123 │ ██████████████▌                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ INGATESTONE          │ BRENTWOOD              │  166 │  728103 │ ██████████████▌                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ BRENT                  │ 2079 │  720605 │ ██████████████▍                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ HARINGEY               │ 3216 │  717780 │ ██████████████▎                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ PURLEY               │ CROYDON                │  575 │  716108 │ ██████████████▎                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ WELWYN               │ WELWYN HATFIELD        │  222 │  710603 │ ██████████████▏                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ RICKMANSWORTH        │ THREE RIVERS           │  798 │  704571 │ ██████████████                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ BANSTEAD             │ REIGATE AND BANSTEAD   │  401 │  701293 │ ██████████████                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ CHIGWELL             │ EPPING FOREST          │  261 │  701203 │ ██████████████                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ PINNER               │ HARROW                 │  528 │  698885 │ █████████████▊                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ HASLEMERE            │ WAVERLEY               │  280 │  696659 │ █████████████▊                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ SLOUGH               │ BUCKINGHAMSHIRE        │  396 │  694917 │ █████████████▊                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ WALTON-ON-THAMES     │ ELMBRIDGE              │  946 │  692395 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ READING              │ SOUTH OXFORDSHIRE      │  318 │  691988 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ NORTHWOOD            │ HILLINGDON             │  271 │  690643 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ FELTHAM              │ HOUNSLOW               │  763 │  688595 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ ASHTEAD              │ MOLE VALLEY            │  303 │  687923 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ BARNET               │ BARNET                 │  975 │  686980 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ WOKING               │ SURREY HEATH           │  283 │  686669 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ MALMESBURY           │ WILTSHIRE              │  323 │  683324 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ AMERSHAM             │ BUCKINGHAMSHIRE        │  496 │  680962 │ █████████████▌                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ CHISLEHURST          │ BROMLEY                │  430 │  680209 │ █████████████▌                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ HYTHE                │ FOLKESTONE AND HYTHE   │  490 │  676908 │ █████████████▌                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ MAYFIELD             │ WEALDEN                │  101 │  676210 │ █████████████▌                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ ASCOT                │ BRACKNELL FOREST       │  168 │  676004 │ █████████████▌                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└──────────────────────┴────────────────────────┴──────┴─────────┴────────────────────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="speedup-with-projections">Ускорьте запросы с помощью проекций<a href="#speedup-with-projections" class="hash-link" aria-label="Direct link to Ускорьте запросы с помощью проекций" title="Direct link to Ускорьте запросы с помощью проекций">​</a></h2><p><a href="/docs/ru/sql-reference/statements/alter/projection">Проекции</a> позволяют повысить скорость запросов за счет хранения предварительно агрегированных данных.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="build-projection">Создайте проекцию<a href="#build-projection" class="hash-link" aria-label="Direct link to Создайте проекцию" title="Direct link to Создайте проекцию">​</a></h3><p>Создайте агрегирующую проекцию по параметрам <code>toYear(date)</code>, <code>district</code>, <code>town</code>:</p><div class="language-sql codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">ALTER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">TABLE</span><span class="token plain"> uk_price_paid</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token keyword" style="color:rgb(86, 156, 214)">ADD</span><span class="token plain"> PROJECTION projection_by_year_district_town</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            toYear</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token keyword" style="color:rgb(86, 156, 214)">date</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            district</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            town</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            </span><span class="token function" style="color:rgb(220, 220, 170)">avg</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">price</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            </span><span class="token function" style="color:rgb(220, 220, 170)">sum</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">price</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            </span><span class="token function" style="color:rgb(220, 220, 170)">count</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token keyword" style="color:rgb(86, 156, 214)">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">BY</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            toYear</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token keyword" style="color:rgb(86, 156, 214)">date</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            district</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            town</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Заполните проекцию для текущих данных (иначе проекция будет создана только для добавляемых данных):</p><div class="language-sql codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">ALTER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">TABLE</span><span class="token plain"> uk_price_paid</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    MATERIALIZE PROJECTION projection_by_year_district_town</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">SETTINGS mutations_sync </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="test-performance">Проверьте производительность<a href="#test-performance" class="hash-link" aria-label="Direct link to Проверьте производительность" title="Direct link to Проверьте производительность">​</a></h2><p>Давайте выполним те же 3 запроса.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="average-price-projections">Запрос 1. Средняя цена за год<a href="#average-price-projections" class="hash-link" aria-label="Direct link to Запрос 1. Средняя цена за год" title="Direct link to Запрос 1. Средняя цена за год">​</a></h3><p>Запрос:</p><div class="language-sql codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    toYear</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token keyword" style="color:rgb(86, 156, 214)">date</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">year</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token function" style="color:rgb(220, 220, 170)">round</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token function" style="color:rgb(220, 220, 170)">avg</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">price</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> price</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    bar</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">price</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1000000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">80</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">FROM</span><span class="token plain"> uk_price_paid</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">year</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">year</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">ASC</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Результат:</p><div class="language-text codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">┌─year─┬──price─┬─bar(round(avg(price)), 0, 1000000, 80)─┐</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1995 │  67932 │ █████▍                                 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1996 │  71505 │ █████▋                                 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1997 │  78532 │ ██████▎                                │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1998 │  85436 │ ██████▋                                │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1999 │  96037 │ ███████▋                               │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2000 │ 107479 │ ████████▌                              │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2001 │ 118885 │ █████████▌                             │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2002 │ 137941 │ ███████████                            │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2003 │ 155889 │ ████████████▍                          │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2004 │ 178885 │ ██████████████▎                        │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2005 │ 189351 │ ███████████████▏                       │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2006 │ 203528 │ ████████████████▎                      │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2007 │ 219378 │ █████████████████▌                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2008 │ 217056 │ █████████████████▎                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2009 │ 213419 │ █████████████████                      │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2010 │ 236109 │ ██████████████████▊                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2011 │ 232805 │ ██████████████████▌                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2012 │ 238367 │ ███████████████████                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2013 │ 256931 │ ████████████████████▌                  │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2014 │ 279915 │ ██████████████████████▍                │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2015 │ 297266 │ ███████████████████████▋               │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2016 │ 313201 │ █████████████████████████              │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2017 │ 346097 │ ███████████████████████████▋           │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2018 │ 350116 │ ████████████████████████████           │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2019 │ 351013 │ ████████████████████████████           │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2020 │ 369420 │ █████████████████████████████▌         │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2021 │ 386903 │ ██████████████████████████████▊        │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└──────┴────────┴────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="average-price-london-projections">Запрос 2. Средняя цена за год в Лондоне<a href="#average-price-london-projections" class="hash-link" aria-label="Direct link to Запрос 2. Средняя цена за год в Лондоне" title="Direct link to Запрос 2. Средняя цена за год в Лондоне">​</a></h3><p>Запрос:</p><div class="language-sql codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    toYear</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token keyword" style="color:rgb(86, 156, 214)">date</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">year</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token function" style="color:rgb(220, 220, 170)">round</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token function" style="color:rgb(220, 220, 170)">avg</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">price</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> price</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    bar</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">price</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2000000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">100</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">FROM</span><span class="token plain"> uk_price_paid</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">WHERE</span><span class="token plain"> town </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;LONDON&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">year</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">BY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">year</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">ASC</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Результат:</p><div class="language-text codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">┌─year─┬───price─┬─bar(round(avg(price)), 0, 2000000, 100)───────────────┐</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1995 │  109116 │ █████▍                                                │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1996 │  118667 │ █████▊                                                │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1997 │  136518 │ ██████▋                                               │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1998 │  152983 │ ███████▋                                              │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 1999 │  180637 │ █████████                                             │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2000 │  215838 │ ██████████▋                                           │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2001 │  232994 │ ███████████▋                                          │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2002 │  263670 │ █████████████▏                                        │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2003 │  278394 │ █████████████▊                                        │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2004 │  304666 │ ███████████████▏                                      │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2005 │  322875 │ ████████████████▏                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2006 │  356191 │ █████████████████▋                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2007 │  404054 │ ████████████████████▏                                 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2008 │  420741 │ █████████████████████                                 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2009 │  427753 │ █████████████████████▍                                │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2010 │  480306 │ ████████████████████████                              │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2011 │  496274 │ ████████████████████████▋                             │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2012 │  519442 │ █████████████████████████▊                            │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2013 │  616212 │ ██████████████████████████████▋                       │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2014 │  724154 │ ████████████████████████████████████▏                 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2015 │  792129 │ ███████████████████████████████████████▌              │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2016 │  843655 │ ██████████████████████████████████████████▏           │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2017 │  982642 │ █████████████████████████████████████████████████▏    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2018 │ 1016835 │ ██████████████████████████████████████████████████▋   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2019 │ 1042849 │ ████████████████████████████████████████████████████▏ │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2020 │ 1011889 │ ██████████████████████████████████████████████████▌   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ 2021 │  960343 │ ████████████████████████████████████████████████      │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└──────┴─────────┴───────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="most-expensive-neighborhoods-projections">Запрос 3. Самые дорогие районы<a href="#most-expensive-neighborhoods-projections" class="hash-link" aria-label="Direct link to Запрос 3. Самые дорогие районы" title="Direct link to Запрос 3. Самые дорогие районы">​</a></h3><p>Условие (date &gt;= &#x27;2020-01-01&#x27;) необходимо изменить, чтобы оно соответствовало проекции (toYear(date) &gt;= 2020).</p><p>Запрос:</p><div class="language-sql codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    town</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    district</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token function" style="color:rgb(220, 220, 170)">count</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token function" style="color:rgb(220, 220, 170)">round</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token function" style="color:rgb(220, 220, 170)">avg</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">price</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">AS</span><span class="token plain"> price</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    bar</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">price</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">0</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">5000000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">100</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">FROM</span><span class="token plain"> uk_price_paid</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">WHERE</span><span class="token plain"> toYear</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token keyword" style="color:rgb(86, 156, 214)">date</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">2020</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">BY</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    town</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    district</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">HAVING</span><span class="token plain"> c </span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">BY</span><span class="token plain"> price </span><span class="token keyword" style="color:rgb(86, 156, 214)">DESC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">LIMIT</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">100</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Результат:</p><div class="language-text codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">┌─town─────────────────┬─district───────────────┬────c─┬───price─┬─bar(round(avg(price)), 0, 5000000, 100)────────────────────────────┐</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ CITY OF WESTMINSTER    │ 3606 │ 3280239 │ █████████████████████████████████████████████████████████████████▌ │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ CITY OF LONDON         │  274 │ 3160502 │ ███████████████████████████████████████████████████████████████▏   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ KENSINGTON AND CHELSEA │ 2550 │ 2308478 │ ██████████████████████████████████████████████▏                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LEATHERHEAD          │ ELMBRIDGE              │  114 │ 1897407 │ █████████████████████████████████████▊                             │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ CAMDEN                 │ 3033 │ 1805404 │ ████████████████████████████████████                               │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ VIRGINIA WATER       │ RUNNYMEDE              │  156 │ 1753247 │ ███████████████████████████████████                                │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ WINDLESHAM           │ SURREY HEATH           │  108 │ 1677613 │ █████████████████████████████████▌                                 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ THORNTON HEATH       │ CROYDON                │  546 │ 1671721 │ █████████████████████████████████▍                                 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ BARNET               │ ENFIELD                │  124 │ 1505840 │ ██████████████████████████████                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ COBHAM               │ ELMBRIDGE              │  387 │ 1237250 │ ████████████████████████▋                                          │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ ISLINGTON              │ 2668 │ 1236980 │ ████████████████████████▋                                          │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ OXFORD               │ SOUTH OXFORDSHIRE      │  321 │ 1220907 │ ████████████████████████▍                                          │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ RICHMOND UPON THAMES   │  704 │ 1215551 │ ████████████████████████▎                                          │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ HOUNSLOW               │  671 │ 1207493 │ ████████████████████████▏                                          │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ ASCOT                │ WINDSOR AND MAIDENHEAD │  407 │ 1183299 │ ███████████████████████▋                                           │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ BEACONSFIELD         │ BUCKINGHAMSHIRE        │  330 │ 1175615 │ ███████████████████████▌                                           │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ RICHMOND             │ RICHMOND UPON THAMES   │  874 │ 1110444 │ ██████████████████████▏                                            │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ HAMMERSMITH AND FULHAM │ 3086 │ 1053983 │ █████████████████████                                              │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ SURBITON             │ ELMBRIDGE              │  100 │ 1011800 │ ████████████████████▏                                              │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ RADLETT              │ HERTSMERE              │  283 │ 1011712 │ ████████████████████▏                                              │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ SALCOMBE             │ SOUTH HAMS             │  127 │ 1011624 │ ████████████████████▏                                              │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ WEYBRIDGE            │ ELMBRIDGE              │  655 │ 1007265 │ ████████████████████▏                                              │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ ESHER                │ ELMBRIDGE              │  485 │  986581 │ ███████████████████▋                                               │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LEATHERHEAD          │ GUILDFORD              │  202 │  977320 │ ███████████████████▌                                               │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ BURFORD              │ WEST OXFORDSHIRE       │  111 │  966893 │ ███████████████████▎                                               │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ BROCKENHURST         │ NEW FOREST             │  129 │  956675 │ ███████████████████▏                                               │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ HINDHEAD             │ WAVERLEY               │  137 │  953753 │ ███████████████████                                                │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ GERRARDS CROSS       │ BUCKINGHAMSHIRE        │  419 │  951121 │ ███████████████████                                                │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ EAST MOLESEY         │ ELMBRIDGE              │  192 │  936769 │ ██████████████████▋                                                │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ CHALFONT ST GILES    │ BUCKINGHAMSHIRE        │  146 │  925515 │ ██████████████████▌                                                │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ TOWER HAMLETS          │ 4388 │  918304 │ ██████████████████▎                                                │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ OLNEY                │ MILTON KEYNES          │  235 │  910646 │ ██████████████████▏                                                │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ HENLEY-ON-THAMES     │ SOUTH OXFORDSHIRE      │  540 │  902418 │ ██████████████████                                                 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ SOUTHWARK              │ 3885 │  892997 │ █████████████████▋                                                 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ KINGSTON UPON THAMES │ KINGSTON UPON THAMES   │  960 │  885969 │ █████████████████▋                                                 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ EALING                 │ 2658 │  871755 │ █████████████████▍                                                 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ CRANBROOK            │ TUNBRIDGE WELLS        │  431 │  862348 │ █████████████████▏                                                 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ MERTON                 │ 2099 │  859118 │ █████████████████▏                                                 │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ BELVEDERE            │ BEXLEY                 │  346 │  842423 │ ████████████████▋                                                  │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ GUILDFORD            │ WAVERLEY               │  143 │  841277 │ ████████████████▋                                                  │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ HARPENDEN            │ ST ALBANS              │  657 │  841216 │ ████████████████▋                                                  │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ HACKNEY                │ 3307 │  837090 │ ████████████████▋                                                  │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ WANDSWORTH             │ 6566 │  832663 │ ████████████████▋                                                  │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ MAIDENHEAD           │ BUCKINGHAMSHIRE        │  123 │  824299 │ ████████████████▍                                                  │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ KINGS LANGLEY        │ DACORUM                │  145 │  821331 │ ████████████████▍                                                  │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ BERKHAMSTED          │ DACORUM                │  543 │  818415 │ ████████████████▎                                                  │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ GREAT MISSENDEN      │ BUCKINGHAMSHIRE        │  226 │  802807 │ ████████████████                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ BILLINGSHURST        │ CHICHESTER             │  144 │  797829 │ ███████████████▊                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ WOKING               │ GUILDFORD              │  176 │  793494 │ ███████████████▋                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ STOCKBRIDGE          │ TEST VALLEY            │  178 │  793269 │ ███████████████▋                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ EPSOM                │ REIGATE AND BANSTEAD   │  172 │  791862 │ ███████████████▋                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ TONBRIDGE            │ TUNBRIDGE WELLS        │  360 │  787876 │ ███████████████▋                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ TEDDINGTON           │ RICHMOND UPON THAMES   │  595 │  786492 │ ███████████████▋                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ TWICKENHAM           │ RICHMOND UPON THAMES   │ 1155 │  786193 │ ███████████████▋                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LYNDHURST            │ NEW FOREST             │  102 │  785593 │ ███████████████▋                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ LAMBETH                │ 5228 │  774574 │ ███████████████▍                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ BARNET                 │ 3955 │  773259 │ ███████████████▍                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ OXFORD               │ VALE OF WHITE HORSE    │  353 │  772088 │ ███████████████▍                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ TONBRIDGE            │ MAIDSTONE              │  305 │  770740 │ ███████████████▍                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LUTTERWORTH          │ HARBOROUGH             │  538 │  768634 │ ███████████████▎                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ WOODSTOCK            │ WEST OXFORDSHIRE       │  140 │  766037 │ ███████████████▎                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ MIDHURST             │ CHICHESTER             │  257 │  764815 │ ███████████████▎                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ MARLOW               │ BUCKINGHAMSHIRE        │  327 │  761876 │ ███████████████▏                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ NEWHAM                 │ 3237 │  761784 │ ███████████████▏                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ ALDERLEY EDGE        │ CHESHIRE EAST          │  178 │  757318 │ ███████████████▏                                                   │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LUTON                │ CENTRAL BEDFORDSHIRE   │  212 │  754283 │ ███████████████                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ PETWORTH             │ CHICHESTER             │  154 │  754220 │ ███████████████                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ ALRESFORD            │ WINCHESTER             │  219 │  752718 │ ███████████████                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ POTTERS BAR          │ WELWYN HATFIELD        │  174 │  748465 │ ██████████████▊                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ HASLEMERE            │ CHICHESTER             │  128 │  746907 │ ██████████████▊                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ TADWORTH             │ REIGATE AND BANSTEAD   │  502 │  743252 │ ██████████████▋                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ THAMES DITTON        │ ELMBRIDGE              │  244 │  741913 │ ██████████████▋                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ REIGATE              │ REIGATE AND BANSTEAD   │  581 │  738198 │ ██████████████▋                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ BOURNE END           │ BUCKINGHAMSHIRE        │  138 │  735190 │ ██████████████▋                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ SEVENOAKS            │ SEVENOAKS              │ 1156 │  730018 │ ██████████████▌                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ OXTED                │ TANDRIDGE              │  336 │  729123 │ ██████████████▌                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ INGATESTONE          │ BRENTWOOD              │  166 │  728103 │ ██████████████▌                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ BRENT                  │ 2079 │  720605 │ ██████████████▍                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ LONDON               │ HARINGEY               │ 3216 │  717780 │ ██████████████▎                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ PURLEY               │ CROYDON                │  575 │  716108 │ ██████████████▎                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ WELWYN               │ WELWYN HATFIELD        │  222 │  710603 │ ██████████████▏                                                    │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ RICKMANSWORTH        │ THREE RIVERS           │  798 │  704571 │ ██████████████                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ BANSTEAD             │ REIGATE AND BANSTEAD   │  401 │  701293 │ ██████████████                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ CHIGWELL             │ EPPING FOREST          │  261 │  701203 │ ██████████████                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ PINNER               │ HARROW                 │  528 │  698885 │ █████████████▊                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ HASLEMERE            │ WAVERLEY               │  280 │  696659 │ █████████████▊                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ SLOUGH               │ BUCKINGHAMSHIRE        │  396 │  694917 │ █████████████▊                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ WALTON-ON-THAMES     │ ELMBRIDGE              │  946 │  692395 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ READING              │ SOUTH OXFORDSHIRE      │  318 │  691988 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ NORTHWOOD            │ HILLINGDON             │  271 │  690643 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ FELTHAM              │ HOUNSLOW               │  763 │  688595 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ ASHTEAD              │ MOLE VALLEY            │  303 │  687923 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ BARNET               │ BARNET                 │  975 │  686980 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ WOKING               │ SURREY HEATH           │  283 │  686669 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ MALMESBURY           │ WILTSHIRE              │  323 │  683324 │ █████████████▋                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ AMERSHAM             │ BUCKINGHAMSHIRE        │  496 │  680962 │ █████████████▌                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ CHISLEHURST          │ BROMLEY                │  430 │  680209 │ █████████████▌                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ HYTHE                │ FOLKESTONE AND HYTHE   │  490 │  676908 │ █████████████▌                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ MAYFIELD             │ WEALDEN                │  101 │  676210 │ █████████████▌                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">│ ASCOT                │ BRACKNELL FOREST       │  168 │  676004 │ █████████████▌                                                     │</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">└──────────────────────┴────────────────────────┴──────┴─────────┴────────────────────────────────────────────────────────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Резюме<a href="#summary" class="hash-link" aria-label="Direct link to Резюме" title="Direct link to Резюме">​</a></h3><p>Все три запроса работают намного быстрее и читают меньшее количество строк.</p><div class="language-text codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">Query 1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">no projection: 27 rows in set. Elapsed: 0.158 sec. Processed 26.32 million rows, 157.93 MB (166.57 million rows/s., 999.39 MB/s.)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">   projection: 27 rows in set. Elapsed: 0.007 sec. Processed 105.96 thousand rows, 3.33 MB (14.58 million rows/s., 458.13 MB/s.)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Query 2</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">no projection: 27 rows in set. Elapsed: 0.163 sec. Processed 26.32 million rows, 80.01 MB (161.75 million rows/s., 491.64 MB/s.)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">   projection: 27 rows in set. Elapsed: 0.008 sec. Processed 105.96 thousand rows, 3.67 MB (13.29 million rows/s., 459.89 MB/s.)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Query 3</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">no projection: 100 rows in set. Elapsed: 0.069 sec. Processed 26.32 million rows, 62.47 MB (382.13 million rows/s., 906.93 MB/s.)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">   projection: 100 rows in set. Elapsed: 0.029 sec. Processed 8.08 thousand rows, 511.08 KB (276.06 thousand rows/s., 17.47 MB/s.)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="playground">Online Playground<a href="#playground" class="hash-link" aria-label="Direct link to Online Playground" title="Direct link to Online Playground">​</a></h3><p>Этот набор данных доступен в <a href="https://gh-api.clickhouse.tech/play?user=play#U0VMRUNUIHRvd24sIGRpc3RyaWN0LCBjb3VudCgpIEFTIGMsIHJvdW5kKGF2ZyhwcmljZSkpIEFTIHByaWNlLCBiYXIocHJpY2UsIDAsIDUwMDAwMDAsIDEwMCkgRlJPTSB1a19wcmljZV9wYWlkIFdIRVJFIGRhdGUgPj0gJzIwMjAtMDEtMDEnIEdST1VQIEJZIHRvd24sIGRpc3RyaWN0IEhBVklORyBjID49IDEwMCBPUkRFUiBCWSBwcmljZSBERVNDIExJTUlUIDEwMA==" target="_blank" rel="noopener noreferrer">Online Playground</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ClickHouse/ClickHouse/tree/master/docs/ru/getting-started/example-datasets/uk-price-paid.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev paginationNavLink_UdUv" href="/docs/ru/getting-started/example-datasets/opensky"><svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.2751 19.175L10.3251 18.125L5.4501 13.25H21.6001V11.75H5.4501L10.3251 6.87501L9.2751 5.82501L2.5751 12.5L9.2751 19.175Z" fill="currentColor"></path></svg><div class="paginationNavContent__3xr"><div class="pagination-nav__sublabel">Previous</div><div class="paginationNavLabel_YPzM pagination-nav__label">Набор данных о воздушном движении OpenSky Network 2020</div></div></a><a class="pagination-nav__link pagination-nav__link--next paginationNavLink_UdUv" href="/docs/ru/getting-started/example-datasets/cell-towers"><div class="paginationNavContent__3xr"><div class="pagination-nav__sublabel">Next</div><div class="paginationNavLabel_YPzM pagination-nav__label">Вышки сотовой связи</div></div><svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.7249 19.175L13.6749 18.125L18.5499 13.25H2.3999V11.75H18.5499L13.6749 6.87501L14.7249 5.82501L21.4249 12.5L14.7249 19.175Z" fill="currentColor"></path></svg></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#download-dataset" class="table-of-contents__link toc-highlight">Загрузите набор данных</a></li><li><a href="#create-table" class="table-of-contents__link toc-highlight">Создайте таблицу</a></li><li><a href="#preprocess-import-data" class="table-of-contents__link toc-highlight">Обработайте и импортируйте данные</a></li><li><a href="#validate-data" class="table-of-contents__link toc-highlight">Проверьте импортированные данные</a></li><li><a href="#run-queries" class="table-of-contents__link toc-highlight">Примеры запросов</a><ul><li><a href="#average-price" class="table-of-contents__link toc-highlight">Запрос 1. Средняя цена за год</a></li><li><a href="#average-price-london" class="table-of-contents__link toc-highlight">Запрос 2. Средняя цена за год в Лондоне</a></li><li><a href="#most-expensive-neighborhoods" class="table-of-contents__link toc-highlight">Запрос 3. Самые дорогие районы</a></li></ul></li><li><a href="#speedup-with-projections" class="table-of-contents__link toc-highlight">Ускорьте запросы с помощью проекций</a><ul><li><a href="#build-projection" class="table-of-contents__link toc-highlight">Создайте проекцию</a></li></ul></li><li><a href="#test-performance" class="table-of-contents__link toc-highlight">Проверьте производительность</a><ul><li><a href="#average-price-projections" class="table-of-contents__link toc-highlight">Запрос 1. Средняя цена за год</a></li><li><a href="#average-price-london-projections" class="table-of-contents__link toc-highlight">Запрос 2. Средняя цена за год в Лондоне</a></li><li><a href="#most-expensive-neighborhoods-projections" class="table-of-contents__link toc-highlight">Запрос 3. Самые дорогие районы</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Резюме</a></li><li><a href="#playground" class="table-of-contents__link toc-highlight">Online Playground</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer_jryj"><div class="container_y1z5 container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">© 2016&ndash;2023 ClickHouse, Inc.</div></div><div><div class="footer__links text--center"><div class="footer__links"><a href="https://clickhouse.com/legal/trademark-policy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Trademark</a><span class="footer__link-separator">·</span><a href="https://clickhouse.com/legal/privacy-policy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy</a><span class="footer__link-separator">·</span><a href="https://trust.clickhouse.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Security</a><span class="footer__link-separator">·</span><a href="https://clickhouse.com/legal/agreements/terms-of-service" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Service</a></div></div></div></div><button class="colorModeButton_hk25"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.7227 0.724664C8.7227 0.330045 8.39191 0 8.0036 0C7.60809 0 7.2773 0.330045 7.2773 0.724664V2.18834C7.2773 2.57578 7.60809 2.90583 8.0036 2.90583C8.39191 2.90583 8.7227 2.57578 8.7227 2.18834V0.724664ZM11.5991 3.4009C11.3258 3.67354 11.3258 4.13274 11.6063 4.41256C11.8796 4.6852 12.347 4.69238 12.6274 4.40538L13.6629 3.3722C13.9434 3.09238 13.9362 2.62601 13.6629 2.34619C13.3897 2.07354 12.9222 2.08072 12.649 2.35336L11.5991 3.4009ZM3.37258 4.40538C3.64584 4.6852 4.11326 4.6852 4.38652 4.41256C4.66697 4.14709 4.66697 3.66637 4.4009 3.4009L3.3582 2.35336C3.09213 2.08789 2.61753 2.07354 2.34427 2.34619C2.07101 2.62601 2.06382 3.09238 2.33708 3.36502L3.37258 4.40538ZM7.9964 11.774C10.0602 11.774 11.7717 10.0664 11.7717 8C11.7717 5.93363 10.0602 4.22601 7.9964 4.22601C5.93258 4.22601 4.22112 5.93363 4.22112 8C4.22112 10.0664 5.93258 11.774 7.9964 11.774ZM7.9964 10.4395C6.65888 10.4395 5.55146 9.33453 5.55146 8C5.55146 6.66547 6.65888 5.56054 7.9964 5.56054C9.33393 5.56054 10.4413 6.66547 10.4413 8C10.4413 9.33453 9.33393 10.4395 7.9964 10.4395ZM15.2809 8.71749C15.6692 8.71749 16 8.38744 16 8C16 7.60538 15.6692 7.28251 15.2809 7.28251H13.8211C13.4328 7.28251 13.102 7.60538 13.102 8C13.102 8.38744 13.4328 8.71749 13.8211 8.71749H15.2809ZM0.719101 7.28251C0.330787 7.28251 0 7.60538 0 8C0 8.38744 0.330787 8.71749 0.719101 8.71749H2.17888C2.57438 8.71749 2.90517 8.38744 2.90517 8C2.90517 7.60538 2.57438 7.28251 2.17888 7.28251H0.719101ZM12.6202 11.5946C12.347 11.322 11.8796 11.322 11.5991 11.5946C11.3258 11.8744 11.3258 12.3336 11.6063 12.6135L12.649 13.6538C12.9294 13.9265 13.3897 13.9193 13.6701 13.6395C13.9434 13.3668 13.9434 12.9076 13.6629 12.6278L12.6202 11.5946ZM2.33708 12.6206C2.05663 12.9004 2.05663 13.3668 2.3227 13.6395C2.60315 13.9121 3.07056 13.9193 3.34382 13.6466L4.38652 12.6135C4.66697 12.3336 4.66697 11.8744 4.4009 11.6018C4.12045 11.322 3.65303 11.322 3.37258 11.5946L2.33708 12.6206ZM8.7227 13.8117C8.7227 13.4242 8.39191 13.0942 8.0036 13.0942C7.60809 13.0942 7.2773 13.4242 7.2773 13.8117V15.2753C7.2773 15.6628 7.60809 16 8.0036 16C8.39191 16 8.7227 15.6628 8.7227 15.2753V13.8117Z" fill="currentColor"></path></svg><span>light Mode</span></button></footer></div>
<script src="/docs/assets/js/runtime~main.7711f5d4.js"></script>
<script src="/docs/assets/js/main.ff0025b5.js"></script>
</body>
</html>