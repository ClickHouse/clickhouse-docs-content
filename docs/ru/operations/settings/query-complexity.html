<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-ru/operations/settings/query-complexity">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Ограничения на сложность запроса | ClickHouse Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://clickhouse.com/docs/img/logo.png"><meta data-rh="true" name="twitter:image" content="https://clickhouse.com/docs/img/logo.png"><meta data-rh="true" property="og:url" content="https://clickhouse.com/docs/ru/operations/settings/query-complexity"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Ограничения на сложность запроса | ClickHouse Docs"><meta data-rh="true" name="description" content="restrictions-on-query-complexity}"><meta data-rh="true" property="og:description" content="restrictions-on-query-complexity}"><link data-rh="true" rel="icon" href="/docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://clickhouse.com/docs/ru/operations/settings/query-complexity"><link data-rh="true" rel="alternate" href="https://clickhouse.com/docs/ru/operations/settings/query-complexity" hreflang="en"><link data-rh="true" rel="alternate" href="https://clickhouse.com/docs/ru/operations/settings/query-complexity" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://62VCH2MD74-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/docs/knowledgebase/rss.xml" title="ClickHouse Knowledge Base Feed RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs/knowledgebase/atom.xml" title="ClickHouse Knowledge Base Feed Atom Feed">
<link rel="alternate" type="application/json" href="/docs/knowledgebase/feed.json" title="ClickHouse Knowledge Base Feed JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KF1LLRTQ5Q"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-KF1LLRTQ5Q",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="ClickHouse Docs" href="/docs/opensearch.xml">





<script src="/docs/js/analytics.js"></script><link rel="stylesheet" href="/docs/assets/css/styles.d4633d58.css">
<link rel="preload" href="/docs/assets/js/runtime~main.d057d825.js" as="script">
<link rel="preload" href="/docs/assets/js/main.ff0025b5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navBar_gvJn"><div class="navbarHeaderContainer_rccn navbar-header"><div class="navbar__inner navbarInner_W6bg"><div class="navbar__items"><a href="https://clickhouse.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/docs/img/logo_without_text.svg" alt="ClickHouse" class="themedImage_ToTc themedImage--light_HNdA"><img src="/docs/img/logo_without_text.svg" alt="ClickHouse" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">ClickHouse</b></a><div class="navbarItemsList_uIZ2 navbar-items-list"><div class="navbar__item dropdown"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link ch-menu">Product</a><ul class="dropdown__menu"><li><a href="https://clickhouse.com/cloud" target="_blank" rel="noopener noreferrer" class="dropdown__link">ClickHouse Cloud</a></li><li><a href="https://clickhouse.com/clickhouse" target="_blank" rel="noopener noreferrer" class="dropdown__link">ClickHouse Open Source</a></li></ul></div><a href="https://clickhouse.com/customer-stories" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link ch-menu">Use Cases</a><div class="navbar__item dropdown"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link ch-menu">Company</a><ul class="dropdown__menu"><li><a href="https://clickhouse.com/blog" target="_blank" rel="noopener noreferrer" class="dropdown__link">Blog</a></li><li><a href="https://clickhouse.com/company/our-story" target="_blank" rel="noopener noreferrer" class="dropdown__link">Our story</a></li><li><a href="https://clickhouse.com/company/careers" target="_blank" rel="noopener noreferrer" class="dropdown__link">Careers</a></li><li><a href="https://clickhouse.com/company/contact" target="_blank" rel="noopener noreferrer" class="dropdown__link">Contact us</a></li><li><a href="https://clickhouse.com/company/news-events" target="_blank" rel="noopener noreferrer" class="dropdown__link">News and events</a></li></ul></div><div class="navbar__item dropdown"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link ch-menu">Learn</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/en/intro">Docs</a></li><li><a href="https://clickhouse.com/learn" target="_blank" rel="noopener noreferrer" class="dropdown__link">ClickHouse Academy</a></li></ul></div><a href="https://clickhouse.com/pricing" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link ch-menu">Pricing</a></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item">
                <div class="nav-items-btns">
                  <a href="https://clickhouse.cloud/signIn" class="sign-in navbar__item navbar__link ch-menu">
                    Sign in
                  </a>
                  <a href="https://clickhouse.cloud/signUp" class="click-button-anchor">
                    <button class="click-button primary-btn">Free Trial</button>
                  </a>
                </div></div><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button></div></div><div class="secondary-nav--items secondaryMenu_iuff"><div class="scrollableElement_Qqzp secondaryMenuLeft_tFZR secondary-nav--items-left"><a class="navbar__item navbar__link ch-menu" href="/docs/en/intro">Docs</a><a class="navbar__item navbar__link ch-menu" href="/docs/en/cloud/overview">Cloud</a><a class="navbar__item navbar__link ch-menu" href="/docs/en/sql-reference">SQL Reference</a><a class="navbar__item navbar__link ch-menu" href="/docs/knowledgebase">Knowledge Base</a></div><div class="secondaryMenuRight__9m4 secondary-nav--items-right"><div class="navbar__item dropdown dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg width="14" height="13" viewBox="0 0 14 13" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6.95 12.6496L9.75 5.26628H11.0333L13.8333 12.6496H12.55L11.9 10.7663H8.91667L8.25 12.6496H6.95ZM9.28333 9.69961H11.5L10.4167 6.64961H10.3667L9.28333 9.69961ZM2.08333 10.7996L1.21667 9.93294L4.33333 6.83294C3.94444 6.39961 3.60556 5.95228 3.31667 5.49094C3.02778 5.03005 2.77222 4.54405 2.55 4.03294H3.83333C4.02222 4.41072 4.22222 4.74672 4.43333 5.04094C4.64444 5.33561 4.89444 5.64405 5.18333 5.96628C5.63889 5.47739 6.01667 4.97472 6.31667 4.45828C6.61667 3.94139 6.86667 3.3885 7.06667 2.79961H0.25V1.58294H4.55V0.349609H5.78333V1.58294H10.0833V2.79961H8.3C8.07778 3.53294 7.78333 4.24116 7.41667 4.92428C7.05 5.60783 6.59444 6.25516 6.05 6.86628L7.53333 8.36628L7.06667 9.63294L5.16667 7.73294L2.08333 10.7996Z" fill="currentColor"/>
</svg></a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/en/intro">English</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/ru">Russian</a></li><li><a class="dropdown__link" href="/docs/zh">Chinese</a></li></ul></div><button class="colorModeButton_hk25 navbar-color-toggle"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.7227 0.724664C8.7227 0.330045 8.39191 0 8.0036 0C7.60809 0 7.2773 0.330045 7.2773 0.724664V2.18834C7.2773 2.57578 7.60809 2.90583 8.0036 2.90583C8.39191 2.90583 8.7227 2.57578 8.7227 2.18834V0.724664ZM11.5991 3.4009C11.3258 3.67354 11.3258 4.13274 11.6063 4.41256C11.8796 4.6852 12.347 4.69238 12.6274 4.40538L13.6629 3.3722C13.9434 3.09238 13.9362 2.62601 13.6629 2.34619C13.3897 2.07354 12.9222 2.08072 12.649 2.35336L11.5991 3.4009ZM3.37258 4.40538C3.64584 4.6852 4.11326 4.6852 4.38652 4.41256C4.66697 4.14709 4.66697 3.66637 4.4009 3.4009L3.3582 2.35336C3.09213 2.08789 2.61753 2.07354 2.34427 2.34619C2.07101 2.62601 2.06382 3.09238 2.33708 3.36502L3.37258 4.40538ZM7.9964 11.774C10.0602 11.774 11.7717 10.0664 11.7717 8C11.7717 5.93363 10.0602 4.22601 7.9964 4.22601C5.93258 4.22601 4.22112 5.93363 4.22112 8C4.22112 10.0664 5.93258 11.774 7.9964 11.774ZM7.9964 10.4395C6.65888 10.4395 5.55146 9.33453 5.55146 8C5.55146 6.66547 6.65888 5.56054 7.9964 5.56054C9.33393 5.56054 10.4413 6.66547 10.4413 8C10.4413 9.33453 9.33393 10.4395 7.9964 10.4395ZM15.2809 8.71749C15.6692 8.71749 16 8.38744 16 8C16 7.60538 15.6692 7.28251 15.2809 7.28251H13.8211C13.4328 7.28251 13.102 7.60538 13.102 8C13.102 8.38744 13.4328 8.71749 13.8211 8.71749H15.2809ZM0.719101 7.28251C0.330787 7.28251 0 7.60538 0 8C0 8.38744 0.330787 8.71749 0.719101 8.71749H2.17888C2.57438 8.71749 2.90517 8.38744 2.90517 8C2.90517 7.60538 2.57438 7.28251 2.17888 7.28251H0.719101ZM12.6202 11.5946C12.347 11.322 11.8796 11.322 11.5991 11.5946C11.3258 11.8744 11.3258 12.3336 11.6063 12.6135L12.649 13.6538C12.9294 13.9265 13.3897 13.9193 13.6701 13.6395C13.9434 13.3668 13.9434 12.9076 13.6629 12.6278L12.6202 11.5946ZM2.33708 12.6206C2.05663 12.9004 2.05663 13.3668 2.3227 13.6395C2.60315 13.9121 3.07056 13.9193 3.34382 13.6466L4.38652 12.6135C4.66697 12.3336 4.66697 11.8744 4.4009 11.6018C4.12045 11.322 3.65303 11.322 3.37258 11.5946L2.33708 12.6206ZM8.7227 13.8117C8.7227 13.4242 8.39191 13.0942 8.0036 13.0942C7.60809 13.0942 7.2773 13.4242 7.2773 13.8117V15.2753C7.2773 15.6628 7.60809 16 8.0036 16C8.39191 16 8.7227 15.6628 8.7227 15.2753V13.8117Z" fill="currentColor"></path></svg><span>light Mode</span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_W2AM"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage_qMb8"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_mhZE"><div class="sidebarSearchContainer_Lwc8"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_Y1UP"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/ru">Что такое ClickHouse</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/введение">Введение</a><button aria-label="Toggle the collapsible sidebar category &#x27;Введение&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ru/getting-started">Начало работы</a><button aria-label="Toggle the collapsible sidebar category &#x27;Начало работы&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ru/interfaces">Интерфейсы</a><button aria-label="Toggle the collapsible sidebar category &#x27;Интерфейсы&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/engines">Engines</a><button aria-label="Toggle the collapsible sidebar category &#x27;Engines&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ru/sql-reference">Справка по SQL</a><button aria-label="Toggle the collapsible sidebar category &#x27;Справка по SQL&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/ru/guides">Руководства</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/ru/operations">Эксплуатация</a><button aria-label="Toggle the collapsible sidebar category &#x27;Эксплуатация&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/requirements">Требования</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/monitoring">Мониторинг</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/troubleshooting">Устранение неисправностей</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/update">Обновление ClickHouse</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/access-rights">Управление доступом</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/ru/operations/external-authenticators">Внешние аутентификаторы пользователей и каталоги</a><button aria-label="Toggle the collapsible sidebar category &#x27;Внешние аутентификаторы пользователей и каталоги&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/backup">Резервное копирование данных</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/configuration-files">Конфигурационные файлы</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/quotas">Квоты</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/ru/operations/optimizing-performance">Optimizing Performance</a><button aria-label="Toggle the collapsible sidebar category &#x27;Optimizing Performance&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/ru/operations/system-tables">Системные таблицы</a><button aria-label="Toggle the collapsible sidebar category &#x27;Системные таблицы&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/performance-test">Testing Hardware</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/ru/operations/server-configuration-parameters">Конфигурационные параметры сервера</a><button aria-label="Toggle the collapsible sidebar category &#x27;Конфигурационные параметры сервера&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/ru/operations/settings">Settings</a><button aria-label="Toggle the collapsible sidebar category &#x27;Settings&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/settings/permissions-for-queries">Разрешения для запросов</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/ru/operations/settings/query-complexity">Ограничения на сложность запроса</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/settings/settings">Настройки</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/settings/settings-profiles">Профили настроек</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/settings/constraints-on-settings">Ограничения на изменение настроек</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/settings/settings-users">Настройки пользователей</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/settings/merge-tree-settings">Настройки MergeTree таблиц</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/ru/operations/utilities">Утилиты</a><button aria-label="Toggle the collapsible sidebar category &#x27;Утилиты&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/tips">Usage Recommendations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/opentelemetry">Поддержка OpenTelemetry</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/caches">Кеши</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/clickhouse-keeper">ClickHouse Keeper</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/storing-data">Хранение данных на внешних дисках</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/named-collections">Именованные соединения</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/инструкция-для-разработчиков">Инструкция для разработчиков</a><button aria-label="Toggle the collapsible sidebar category &#x27;Инструкция для разработчиков&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ru/commercial">Коммерческие услуги</a><button aria-label="Toggle the collapsible sidebar category &#x27;Коммерческие услуги&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ru/whats-new">What&#x27;s New</a><button aria-label="Toggle the collapsible sidebar category &#x27;What&#x27;s New&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ru/faq">F.A.Q.</a><button aria-label="Toggle the collapsible sidebar category &#x27;F.A.Q.&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ru/about-us">About Us</a><button aria-label="Toggle the collapsible sidebar category &#x27;About Us&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_RiV8"><div class="container padding-top--md padding-bottom--lg main-content-wrapper"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><div class="theme-doc-markdown markdown"><h1>Ограничения на сложность запроса</h1><p>Ограничения на сложность запроса - часть настроек.
Используются, чтобы обеспечить более безопасное исполнение запросов из пользовательского интерфейса.
Почти все ограничения действуют только на SELECT-ы.
При распределённой обработке запроса, ограничения действуют на каждом сервере по отдельности.</p><p>Ограничения проверяются на каждый блок обработанных данных, а не на каждую строку. В связи с этим, ограничения могут быть превышены на размер блока.</p><p>Ограничения вида «максимальное количество чего-нибудь» могут принимать значение 0, которое обозначает «не ограничено».
Для большинства ограничений также присутствует настройка вида overflow_mode - что делать, когда ограничение превышено.
Оно может принимать одно из двух значений: <code>throw</code> или <code>break</code>; а для ограничения на агрегацию (group_by_overflow_mode) есть ещё значение <code>any</code>.</p><p><code>throw</code> - кинуть исключение (по умолчанию).</p><p><code>break</code> - прервать выполнение запроса и вернуть неполный результат, как будто исходные данные закончились.</p><p><code>any (только для group_by_overflow_mode)</code> - продолжить агрегацию по ключам, которые успели войти в набор, но не добавлять новые ключи в набор.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="settings_max_memory_usage">max_memory_usage<a href="#settings_max_memory_usage" class="hash-link" aria-label="Direct link to max_memory_usage" title="Direct link to max_memory_usage">​</a></h2><p>Максимальный возможный объём оперативной памяти для выполнения запроса на одном сервере.</p><p>В конфигурационном файле по умолчанию, ограничение равно 10 ГБ.</p><p>Настройка не учитывает объём свободной памяти или общий объём памяти на машине.
Ограничение действует на один запрос, в пределах одного сервера.
Текущее потребление памяти для каждого запроса можно посмотреть с помощью <code>SHOW PROCESSLIST</code>.
Также отслеживается и выводится в лог пиковое потребление памяти для каждого запроса.</p><p>Потребление памяти не отслеживается для состояний некоторых агрегатных функций.</p><p>Потребление памяти не полностью учитывается для состояний агрегатных функций <code>min</code>, <code>max</code>, <code>any</code>, <code>anyLast</code>, <code>argMin</code>, <code>argMax</code> от аргументов <code>String</code> и <code>Array</code>.</p><p>Потребление памяти ограничивается также параметрами <code>max_memory_usage_for_user</code> и <a href="/docs/ru/operations/server-configuration-parameters/settings#max_server_memory_usage">max_server_memory_usage</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="max-memory-usage-for-user">max_memory_usage_for_user<a href="#max-memory-usage-for-user" class="hash-link" aria-label="Direct link to max_memory_usage_for_user" title="Direct link to max_memory_usage_for_user">​</a></h2><p>Максимальный возможный объём оперативной памяти для запросов пользователя на одном сервере.</p><p>Значения по умолчанию определены в файле <a href="https://github.com/ClickHouse/ClickHouse/blob/master/src/Core/Settings.h#L288" target="_blank" rel="noopener noreferrer">Settings.h</a>. По умолчанию размер не ограничен (<code>max_memory_usage_for_user = 0</code>).</p><p>Смотрите также описание настройки <a href="#settings_max_memory_usage">max_memory_usage</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="max-rows-to-read">max_rows_to_read<a href="#max-rows-to-read" class="hash-link" aria-label="Direct link to max_rows_to_read" title="Direct link to max_rows_to_read">​</a></h2><p>Следующие ограничения могут проверяться на каждый блок (а не на каждую строку). То есть, ограничения могут быть немного нарушены.</p><p>Максимальное количество строчек, которое можно прочитать из таблицы при выполнении запроса.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="max-bytes-to-read">max_bytes_to_read<a href="#max-bytes-to-read" class="hash-link" aria-label="Direct link to max_bytes_to_read" title="Direct link to max_bytes_to_read">​</a></h2><p>Максимальное количество байт (несжатых данных), которое можно прочитать из таблицы при выполнении запроса.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="read-overflow-mode">read_overflow_mode<a href="#read-overflow-mode" class="hash-link" aria-label="Direct link to read_overflow_mode" title="Direct link to read_overflow_mode">​</a></h2><p>Что делать, когда количество прочитанных данных превысило одно из ограничений: throw или break. По умолчанию: throw.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="max-rows-to-read-leaf">max_rows_to_read_leaf<a href="#max-rows-to-read-leaf" class="hash-link" aria-label="Direct link to max_rows_to_read_leaf" title="Direct link to max_rows_to_read_leaf">​</a></h2><p>Следующие ограничения могут проверяться на каждый блок (а не на каждую строку). То есть, ограничения могут быть немного нарушены.</p><p>Максимальное количество строчек, которое можно прочитать из таблицы на удалённом сервере при выполнении
распределенного запроса. Распределенные запросы могут создавать несколько подзапросов к каждому из шардов в кластере и
тогда этот лимит будет применен при выполнении чтения на удаленных серверах (включая и сервер-инициатор) и проигнорирован
на сервере-инициаторе запроса во время обьединения полученных результатов. Например, кластер состоит из 2 шард и каждый
из них хранит таблицу с 100 строк. Тогда распределнный запрос для получения всех данных из этих таблиц и установленной
настройкой <code>max_rows_to_read=150</code> выбросит исключение, т.к. в общем он прочитает 200 строк. Но запрос
с настройкой  <code>max_rows_to_read_leaf=150</code> завершится успешно, потому что каждый из шардов прочитает максимум 100 строк.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="max-bytes-to-read-leaf">max_bytes_to_read_leaf<a href="#max-bytes-to-read-leaf" class="hash-link" aria-label="Direct link to max_bytes_to_read_leaf" title="Direct link to max_bytes_to_read_leaf">​</a></h2><p>Максимальное количество байт (несжатых данных), которое можно прочитать из таблицы на удалённом сервере при
выполнении распределенного запроса. Распределенные запросы могут создавать несколько подзапросов к каждому из шардов в
кластере и тогда этот лимит будет применен при выполнении чтения на удаленных серверах (включая и сервер-инициатор)
и проигнорирован на сервере-инициаторе запроса во время обьединения полученных результатов. Например, кластер состоит
из 2 шард и каждый из них хранит таблицу со 100 байтами. Тогда распределнный запрос для получения всех данных из этих таблиц
и установленной настройкой <code>max_bytes_to_read=150</code> выбросит исключение, т.к. в общем он прочитает 200 байт. Но запрос
с настройкой  <code>max_bytes_to_read_leaf=150</code> завершится успешно, потому что каждый из шардов прочитает максимум 100 байт.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="read-overflow-mode-leaf">read_overflow_mode_leaf<a href="#read-overflow-mode-leaf" class="hash-link" aria-label="Direct link to read_overflow_mode_leaf" title="Direct link to read_overflow_mode_leaf">​</a></h2><p>Что делать, когда количество прочитанных данных на удаленном сервере превысило одно из ограничений: throw или break. По умолчанию: throw.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="settings-max-rows-to-group-by">max_rows_to_group_by<a href="#settings-max-rows-to-group-by" class="hash-link" aria-label="Direct link to max_rows_to_group_by" title="Direct link to max_rows_to_group_by">​</a></h2><p>Максимальное количество уникальных ключей, получаемых в процессе агрегации. Позволяет ограничить потребление оперативки при агрегации.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="group-by-overflow-mode">group_by_overflow_mode<a href="#group-by-overflow-mode" class="hash-link" aria-label="Direct link to group_by_overflow_mode" title="Direct link to group_by_overflow_mode">​</a></h2><p>Что делать, когда количество уникальных ключей при агрегации превысило ограничение: throw, break или any. По умолчанию: throw.
Использование значения any позволяет выполнить GROUP BY приближённо. Качество такого приближённого вычисления сильно зависит от статистических свойств данных.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="settings-max_bytes_before_external_group_by">max_bytes_before_external_group_by<a href="#settings-max_bytes_before_external_group_by" class="hash-link" aria-label="Direct link to max_bytes_before_external_group_by" title="Direct link to max_bytes_before_external_group_by">​</a></h2><p>Включает или отключает выполнение секций <code>GROUP BY</code> во внешней памяти. Смотрите <a href="/docs/ru/sql-reference/statements/select/group-by#select-group-by-in-external-memory">GROUP BY во внешней памяти</a>.</p><p>Возможные значения:</p><ul><li>Максимальный объём RAM (в байтах), который может использовать отдельная операция <a href="/docs/ru/sql-reference/statements/select/group-by#select-group-by-clause">GROUP BY</a>.</li><li>0 — <code>GROUP BY</code> во внешней памяти отключен.</li></ul><p>Значение по умолчанию — 0.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="max-rows-to-sort">max_rows_to_sort<a href="#max-rows-to-sort" class="hash-link" aria-label="Direct link to max_rows_to_sort" title="Direct link to max_rows_to_sort">​</a></h2><p>Максимальное количество строк до сортировки. Позволяет ограничить потребление оперативки при сортировке.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="max-bytes-to-sort">max_bytes_to_sort<a href="#max-bytes-to-sort" class="hash-link" aria-label="Direct link to max_bytes_to_sort" title="Direct link to max_bytes_to_sort">​</a></h2><p>Максимальное количество байт до сортировки.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sort-overflow-mode">sort_overflow_mode<a href="#sort-overflow-mode" class="hash-link" aria-label="Direct link to sort_overflow_mode" title="Direct link to sort_overflow_mode">​</a></h2><p>Что делать, если количество строк, полученное перед сортировкой, превысило одно из ограничений: throw или break. По умолчанию: throw.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="setting-max_result_rows">max_result_rows<a href="#setting-max_result_rows" class="hash-link" aria-label="Direct link to max_result_rows" title="Direct link to max_result_rows">​</a></h2><p>Ограничение на количество строк результата. Проверяются также для подзапросов и на удалённых серверах при выполнении части распределённого запроса.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="max-result-bytes">max_result_bytes<a href="#max-result-bytes" class="hash-link" aria-label="Direct link to max_result_bytes" title="Direct link to max_result_bytes">​</a></h2><p>Ограничение на количество байт результата. Аналогично.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="result-overflow-mode">result_overflow_mode<a href="#result-overflow-mode" class="hash-link" aria-label="Direct link to result_overflow_mode" title="Direct link to result_overflow_mode">​</a></h2><p>Что делать, если объём результата превысил одно из ограничений: throw или break. По умолчанию: throw.</p><p>Использование break по смыслу похоже на LIMIT. Break прерывает выполнение только на уровне блока. Т.е. число строк которые вернет запрос будет больше чем ограничение <a href="#setting-max_result_rows">max_result_rows</a>, кратно <a href="/docs/ru/operations/settings/settings#setting-max_block_size">max_block_size</a> и зависит от <a href="/docs/ru/operations/settings/settings#settings-max_threads">max_threads</a>.</p><p>Пример:</p><div class="language-sql codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">SET</span><span class="token plain"> max_threads </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> max_block_size </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3333</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">SET</span><span class="token plain"> max_result_rows </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">3334</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> result_overflow_mode </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;break&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">FROM</span><span class="token plain"> numbers_mt</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token number" style="color:rgb(181, 206, 168)">100000</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">FORMAT </span><span class="token boolean">Null</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Результат:</p><div class="language-text codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">6666 rows in set. ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="max-execution-time">max_execution_time<a href="#max-execution-time" class="hash-link" aria-label="Direct link to max_execution_time" title="Direct link to max_execution_time">​</a></h2><p>Максимальное время выполнения запроса в секундах.
На данный момент не проверяется при одной из стадий сортировки а также при слиянии и финализации агрегатных функций.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="timeout-overflow-mode">timeout_overflow_mode<a href="#timeout-overflow-mode" class="hash-link" aria-label="Direct link to timeout_overflow_mode" title="Direct link to timeout_overflow_mode">​</a></h2><p>Что делать, если запрос выполняется дольше max_execution_time: throw или break. По умолчанию: throw.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="min-execution-speed">min_execution_speed<a href="#min-execution-speed" class="hash-link" aria-label="Direct link to min_execution_speed" title="Direct link to min_execution_speed">​</a></h2><p>Минимальная скорость выполнения запроса в строчках в секунду. Проверяется на каждый блок данных по истечении timeout_before_checking_execution_speed. Если скорость выполнения запроса оказывается меньше, то кидается исключение.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="min-execution-speed-bytes">min_execution_speed_bytes<a href="#min-execution-speed-bytes" class="hash-link" aria-label="Direct link to min_execution_speed_bytes" title="Direct link to min_execution_speed_bytes">​</a></h2><p>Минимальная скорость выполнения запроса в строках на байт. Он проверяется для каждого блока данных после timeout_before_checking_execution_speed. Если скорость выполнения запроса меньше, исключение.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="max-execution-speed">max_execution_speed<a href="#max-execution-speed" class="hash-link" aria-label="Direct link to max_execution_speed" title="Direct link to max_execution_speed">​</a></h2><p>Максимальная скорость выполнения запроса в строках в секунду. Он проверяется для каждого блока данных после timeout_before_checking_execution_speed. Если скорость выполнения запроса выше, скорость будет снижена.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="max-execution-speed-bytes">max_execution_speed_bytes<a href="#max-execution-speed-bytes" class="hash-link" aria-label="Direct link to max_execution_speed_bytes" title="Direct link to max_execution_speed_bytes">​</a></h2><p>Максимальная скорость выполнения запроса в байтах в секунду. Он проверяется для каждого блока данных после timeout_before_checking_execution_speed. Если скорость выполнения запроса выше, скорость будет снижена.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="timeout-before-checking-execution-speed">timeout_before_checking_execution_speed<a href="#timeout-before-checking-execution-speed" class="hash-link" aria-label="Direct link to timeout_before_checking_execution_speed" title="Direct link to timeout_before_checking_execution_speed">​</a></h2><p>Проверять, что скорость выполнения запроса не слишком низкая (не меньше min_execution_speed), после прошествия указанного времени в секундах.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="max-columns-to-read">max_columns_to_read<a href="#max-columns-to-read" class="hash-link" aria-label="Direct link to max_columns_to_read" title="Direct link to max_columns_to_read">​</a></h2><p>Максимальное количество столбцов, которых можно читать из таблицы в одном запросе. Если запрос требует чтения большего количества столбцов - кинуть исключение.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="max-temporary-columns">max_temporary_columns<a href="#max-temporary-columns" class="hash-link" aria-label="Direct link to max_temporary_columns" title="Direct link to max_temporary_columns">​</a></h2><p>Максимальное количество временных столбцов, которых необходимо одновременно держать в оперативке, в процессе выполнения запроса, включая константные столбцы. Если временных столбцов оказалось больше - кидается исключение.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="max-temporary-non-const-columns">max_temporary_non_const_columns<a href="#max-temporary-non-const-columns" class="hash-link" aria-label="Direct link to max_temporary_non_const_columns" title="Direct link to max_temporary_non_const_columns">​</a></h2><p>То же самое, что и max_temporary_columns, но без учёта столбцов-констант.
Стоит заметить, что столбцы-константы довольно часто образуются в процессе выполнения запроса, но расходуют примерно нулевое количество вычислительных ресурсов.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="max-subquery-depth">max_subquery_depth<a href="#max-subquery-depth" class="hash-link" aria-label="Direct link to max_subquery_depth" title="Direct link to max_subquery_depth">​</a></h2><p>Максимальная вложенность подзапросов. Если подзапросы более глубокие - кидается исключение. По умолчанию: 100.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="max-pipeline-depth">max_pipeline_depth<a href="#max-pipeline-depth" class="hash-link" aria-label="Direct link to max_pipeline_depth" title="Direct link to max_pipeline_depth">​</a></h2><p>Максимальная глубина конвейера выполнения запроса. Соответствует количеству преобразований, которое проходит каждый блок данных в процессе выполнения запроса. Считается в пределах одного сервера. Если глубина конвейера больше - кидается исключение. По умолчанию: 1000.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="max-ast-depth">max_ast_depth<a href="#max-ast-depth" class="hash-link" aria-label="Direct link to max_ast_depth" title="Direct link to max_ast_depth">​</a></h2><p>Максимальная вложенность синтаксического дерева запроса. Если превышена - кидается исключение.
На данный момент, проверяются не во время парсинга а уже после парсинга запроса. То есть, во время парсинга может быть создано слишком глубокое синтаксическое дерево, но запрос не будет выполнен. По умолчанию: 1000.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="max-ast-elements">max_ast_elements<a href="#max-ast-elements" class="hash-link" aria-label="Direct link to max_ast_elements" title="Direct link to max_ast_elements">​</a></h2><p>Максимальное количество элементов синтаксического дерева запроса. Если превышено - кидается исключение.
Аналогично, проверяется уже после парсинга запроса. По умолчанию: 50 000.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="max-rows-in-set">max_rows_in_set<a href="#max-rows-in-set" class="hash-link" aria-label="Direct link to max_rows_in_set" title="Direct link to max_rows_in_set">​</a></h2><p>Максимальное количество строчек для множества в секции IN, создаваемого из подзапроса.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="max-bytes-in-set">max_bytes_in_set<a href="#max-bytes-in-set" class="hash-link" aria-label="Direct link to max_bytes_in_set" title="Direct link to max_bytes_in_set">​</a></h2><p>Максимальное количество байт (несжатых данных), занимаемое множеством в секции IN, создаваемым из подзапроса.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="set-overflow-mode">set_overflow_mode<a href="#set-overflow-mode" class="hash-link" aria-label="Direct link to set_overflow_mode" title="Direct link to set_overflow_mode">​</a></h2><p>Что делать, когда количество данных превысило одно из ограничений: throw или break. По умолчанию: throw.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="max-rows-in-distinct">max_rows_in_distinct<a href="#max-rows-in-distinct" class="hash-link" aria-label="Direct link to max_rows_in_distinct" title="Direct link to max_rows_in_distinct">​</a></h2><p>Максимальное количество различных строчек при использовании DISTINCT.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="max-bytes-in-distinct">max_bytes_in_distinct<a href="#max-bytes-in-distinct" class="hash-link" aria-label="Direct link to max_bytes_in_distinct" title="Direct link to max_bytes_in_distinct">​</a></h2><p>Максимальное количество байт, занимаемых хэш-таблицей, при использовании DISTINCT.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="distinct-overflow-mode">distinct_overflow_mode<a href="#distinct-overflow-mode" class="hash-link" aria-label="Direct link to distinct_overflow_mode" title="Direct link to distinct_overflow_mode">​</a></h2><p>Что делать, когда количество данных превысило одно из ограничений: throw или break. По умолчанию: throw.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="max-rows-to-transfer">max_rows_to_transfer<a href="#max-rows-to-transfer" class="hash-link" aria-label="Direct link to max_rows_to_transfer" title="Direct link to max_rows_to_transfer">​</a></h2><p>Максимальное количество строчек, которых можно передать на удалённый сервер или сохранить во временную таблицу, при использовании GLOBAL IN.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="max-bytes-to-transfer">max_bytes_to_transfer<a href="#max-bytes-to-transfer" class="hash-link" aria-label="Direct link to max_bytes_to_transfer" title="Direct link to max_bytes_to_transfer">​</a></h2><p>Максимальное количество байт (несжатых данных), которых можно передать на удалённый сервер или сохранить во временную таблицу, при использовании GLOBAL IN.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="transfer-overflow-mode">transfer_overflow_mode<a href="#transfer-overflow-mode" class="hash-link" aria-label="Direct link to transfer_overflow_mode" title="Direct link to transfer_overflow_mode">​</a></h2><p>Что делать, когда количество данных превысило одно из ограничений: throw или break. По умолчанию: throw.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="settings-max_rows_in_join">max_rows_in_join<a href="#settings-max_rows_in_join" class="hash-link" aria-label="Direct link to max_rows_in_join" title="Direct link to max_rows_in_join">​</a></h2><p>Ограничивает количество строк в хэш-таблице, используемой при соединении таблиц.</p><p>Параметр применяется к операциям <a href="/docs/ru/sql-reference/statements/select/join#select-join">SELECT… JOIN</a> и к движку таблиц <a href="/docs/ru/engines/table-engines/special/join">Join</a>.</p><p>Если запрос содержит несколько <code>JOIN</code>, то ClickHouse проверяет значение настройки для каждого промежуточного результата.</p><p>При достижении предела ClickHouse может выполнять различные действия. Используйте настройку <a href="#settings-join_overflow_mode">join_overflow_mode</a> для выбора действия.</p><p>Возможные значения:</p><ul><li>Положительное целое число.</li><li>0 — неограниченное количество строк.</li></ul><p>Значение по умолчанию — 0.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="settings-max_bytes_in_join">max_bytes_in_join<a href="#settings-max_bytes_in_join" class="hash-link" aria-label="Direct link to max_bytes_in_join" title="Direct link to max_bytes_in_join">​</a></h2><p>Ограничивает размер (в байтах) хэш-таблицы, используемой при объединении таблиц.</p><p>Параметр применяется к операциям <a href="/docs/ru/sql-reference/statements/select/join#select-join">SELECT… JOIN</a> и к движку таблиц <a href="/docs/ru/engines/table-engines/special/join">Join</a>.</p><p>Если запрос содержит несколько <code>JOIN</code>, то ClickHouse проверяет значение настройки для каждого промежуточного результата.</p><p>При достижении предела ClickHouse может выполнять различные действия. Используйте настройку <a href="#settings-join_overflow_mode">join_overflow_mode</a> для выбора действия.</p><p>Возможные значения:</p><ul><li>Положительное целое число.</li><li>0 — контроль памяти отключен.</li></ul><p>Значение по умолчанию — 0.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="settings-join_overflow_mode">join_overflow_mode<a href="#settings-join_overflow_mode" class="hash-link" aria-label="Direct link to join_overflow_mode" title="Direct link to join_overflow_mode">​</a></h2><p>Определяет, какое действие ClickHouse выполняет при достижении любого из следующих ограничений для <code>JOIN</code>:</p><ul><li><a href="#settings-max_bytes_in_join">max_bytes_in_join</a></li><li><a href="#settings-max_rows_in_join">max_rows_in_join</a></li></ul><p>Возможные значения:</p><ul><li><code>THROW</code> — ClickHouse генерирует исключение и прерывает операцию.</li><li><code>BREAK</code> — ClickHouse прерывает операцию, но не генерирует исключение.</li></ul><p>Значение по умолчанию — <code>THROW</code>.</p><p><strong>Смотрите также</strong></p><ul><li><a href="/docs/ru/sql-reference/statements/select/join#select-join">Секция JOIN</a></li><li><a href="/docs/ru/engines/table-engines/special/join">Движок таблиц Join</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="max-partitions-per-insert-block">max_partitions_per_insert_block<a href="#max-partitions-per-insert-block" class="hash-link" aria-label="Direct link to max_partitions_per_insert_block" title="Direct link to max_partitions_per_insert_block">​</a></h2><p>Ограничивает максимальное количество партиций в одном вставленном блоке.</p><ul><li>Положительное целое число.</li><li>0 — неограниченное количество разделов.</li></ul><p>Значение по умолчанию: 100.</p><p><strong>Подробности</strong></p><p>При вставке данных, ClickHouse вычисляет количество партиций во вставленном блоке. Если число партиций больше, чем <code>max_partitions_per_insert_block</code>, ClickHouse генерирует исключение со следующим текстом:</p><blockquote><p>«Too many partitions for single INSERT block (more than» + toString(max_parts) + «). The limit is controlled by ‘max_partitions_per_insert_block’ setting. Large number of partitions is a common misconception. It will lead to severe negative performance impact, including slow server startup, slow INSERT queries and slow SELECT queries. Recommended total number of partitions for a table is under 1000..10000. Please note, that partitioning is not intended to speed up SELECT queries (ORDER BY key is sufficient to make range queries fast). Partitions are intended for data manipulation (DROP PARTITION, etc).»</p></blockquote></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ClickHouse/ClickHouse/tree/master/docs/ru/operations/settings/query-complexity.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev paginationNavLink_UdUv" href="/docs/ru/operations/settings/permissions-for-queries"><svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.2751 19.175L10.3251 18.125L5.4501 13.25H21.6001V11.75H5.4501L10.3251 6.87501L9.2751 5.82501L2.5751 12.5L9.2751 19.175Z" fill="currentColor"></path></svg><div class="paginationNavContent__3xr"><div class="pagination-nav__sublabel">Previous</div><div class="paginationNavLabel_YPzM pagination-nav__label">Разрешения для запросов</div></div></a><a class="pagination-nav__link pagination-nav__link--next paginationNavLink_UdUv" href="/docs/ru/operations/settings/settings"><div class="paginationNavContent__3xr"><div class="pagination-nav__sublabel">Next</div><div class="paginationNavLabel_YPzM pagination-nav__label">Настройки</div></div><svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.7249 19.175L13.6749 18.125L18.5499 13.25H2.3999V11.75H18.5499L13.6749 6.87501L14.7249 5.82501L21.4249 12.5L14.7249 19.175Z" fill="currentColor"></path></svg></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#settings_max_memory_usage" class="table-of-contents__link toc-highlight">max_memory_usage</a></li><li><a href="#max-memory-usage-for-user" class="table-of-contents__link toc-highlight">max_memory_usage_for_user</a></li><li><a href="#max-rows-to-read" class="table-of-contents__link toc-highlight">max_rows_to_read</a></li><li><a href="#max-bytes-to-read" class="table-of-contents__link toc-highlight">max_bytes_to_read</a></li><li><a href="#read-overflow-mode" class="table-of-contents__link toc-highlight">read_overflow_mode</a></li><li><a href="#max-rows-to-read-leaf" class="table-of-contents__link toc-highlight">max_rows_to_read_leaf</a></li><li><a href="#max-bytes-to-read-leaf" class="table-of-contents__link toc-highlight">max_bytes_to_read_leaf</a></li><li><a href="#read-overflow-mode-leaf" class="table-of-contents__link toc-highlight">read_overflow_mode_leaf</a></li><li><a href="#settings-max-rows-to-group-by" class="table-of-contents__link toc-highlight">max_rows_to_group_by</a></li><li><a href="#group-by-overflow-mode" class="table-of-contents__link toc-highlight">group_by_overflow_mode</a></li><li><a href="#settings-max_bytes_before_external_group_by" class="table-of-contents__link toc-highlight">max_bytes_before_external_group_by</a></li><li><a href="#max-rows-to-sort" class="table-of-contents__link toc-highlight">max_rows_to_sort</a></li><li><a href="#max-bytes-to-sort" class="table-of-contents__link toc-highlight">max_bytes_to_sort</a></li><li><a href="#sort-overflow-mode" class="table-of-contents__link toc-highlight">sort_overflow_mode</a></li><li><a href="#setting-max_result_rows" class="table-of-contents__link toc-highlight">max_result_rows</a></li><li><a href="#max-result-bytes" class="table-of-contents__link toc-highlight">max_result_bytes</a></li><li><a href="#result-overflow-mode" class="table-of-contents__link toc-highlight">result_overflow_mode</a></li><li><a href="#max-execution-time" class="table-of-contents__link toc-highlight">max_execution_time</a></li><li><a href="#timeout-overflow-mode" class="table-of-contents__link toc-highlight">timeout_overflow_mode</a></li><li><a href="#min-execution-speed" class="table-of-contents__link toc-highlight">min_execution_speed</a></li><li><a href="#min-execution-speed-bytes" class="table-of-contents__link toc-highlight">min_execution_speed_bytes</a></li><li><a href="#max-execution-speed" class="table-of-contents__link toc-highlight">max_execution_speed</a></li><li><a href="#max-execution-speed-bytes" class="table-of-contents__link toc-highlight">max_execution_speed_bytes</a></li><li><a href="#timeout-before-checking-execution-speed" class="table-of-contents__link toc-highlight">timeout_before_checking_execution_speed</a></li><li><a href="#max-columns-to-read" class="table-of-contents__link toc-highlight">max_columns_to_read</a></li><li><a href="#max-temporary-columns" class="table-of-contents__link toc-highlight">max_temporary_columns</a></li><li><a href="#max-temporary-non-const-columns" class="table-of-contents__link toc-highlight">max_temporary_non_const_columns</a></li><li><a href="#max-subquery-depth" class="table-of-contents__link toc-highlight">max_subquery_depth</a></li><li><a href="#max-pipeline-depth" class="table-of-contents__link toc-highlight">max_pipeline_depth</a></li><li><a href="#max-ast-depth" class="table-of-contents__link toc-highlight">max_ast_depth</a></li><li><a href="#max-ast-elements" class="table-of-contents__link toc-highlight">max_ast_elements</a></li><li><a href="#max-rows-in-set" class="table-of-contents__link toc-highlight">max_rows_in_set</a></li><li><a href="#max-bytes-in-set" class="table-of-contents__link toc-highlight">max_bytes_in_set</a></li><li><a href="#set-overflow-mode" class="table-of-contents__link toc-highlight">set_overflow_mode</a></li><li><a href="#max-rows-in-distinct" class="table-of-contents__link toc-highlight">max_rows_in_distinct</a></li><li><a href="#max-bytes-in-distinct" class="table-of-contents__link toc-highlight">max_bytes_in_distinct</a></li><li><a href="#distinct-overflow-mode" class="table-of-contents__link toc-highlight">distinct_overflow_mode</a></li><li><a href="#max-rows-to-transfer" class="table-of-contents__link toc-highlight">max_rows_to_transfer</a></li><li><a href="#max-bytes-to-transfer" class="table-of-contents__link toc-highlight">max_bytes_to_transfer</a></li><li><a href="#transfer-overflow-mode" class="table-of-contents__link toc-highlight">transfer_overflow_mode</a></li><li><a href="#settings-max_rows_in_join" class="table-of-contents__link toc-highlight">max_rows_in_join</a></li><li><a href="#settings-max_bytes_in_join" class="table-of-contents__link toc-highlight">max_bytes_in_join</a></li><li><a href="#settings-join_overflow_mode" class="table-of-contents__link toc-highlight">join_overflow_mode</a></li><li><a href="#max-partitions-per-insert-block" class="table-of-contents__link toc-highlight">max_partitions_per_insert_block</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer_jryj"><div class="container_y1z5 container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">© 2016&ndash;2023 ClickHouse, Inc.</div></div><div><div class="footer__links text--center"><div class="footer__links"><a href="https://clickhouse.com/legal/trademark-policy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Trademark</a><span class="footer__link-separator">·</span><a href="https://clickhouse.com/legal/privacy-policy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy</a><span class="footer__link-separator">·</span><a href="https://trust.clickhouse.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Security</a><span class="footer__link-separator">·</span><a href="https://clickhouse.com/legal/agreements/terms-of-service" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Service</a></div></div></div></div><button class="colorModeButton_hk25"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.7227 0.724664C8.7227 0.330045 8.39191 0 8.0036 0C7.60809 0 7.2773 0.330045 7.2773 0.724664V2.18834C7.2773 2.57578 7.60809 2.90583 8.0036 2.90583C8.39191 2.90583 8.7227 2.57578 8.7227 2.18834V0.724664ZM11.5991 3.4009C11.3258 3.67354 11.3258 4.13274 11.6063 4.41256C11.8796 4.6852 12.347 4.69238 12.6274 4.40538L13.6629 3.3722C13.9434 3.09238 13.9362 2.62601 13.6629 2.34619C13.3897 2.07354 12.9222 2.08072 12.649 2.35336L11.5991 3.4009ZM3.37258 4.40538C3.64584 4.6852 4.11326 4.6852 4.38652 4.41256C4.66697 4.14709 4.66697 3.66637 4.4009 3.4009L3.3582 2.35336C3.09213 2.08789 2.61753 2.07354 2.34427 2.34619C2.07101 2.62601 2.06382 3.09238 2.33708 3.36502L3.37258 4.40538ZM7.9964 11.774C10.0602 11.774 11.7717 10.0664 11.7717 8C11.7717 5.93363 10.0602 4.22601 7.9964 4.22601C5.93258 4.22601 4.22112 5.93363 4.22112 8C4.22112 10.0664 5.93258 11.774 7.9964 11.774ZM7.9964 10.4395C6.65888 10.4395 5.55146 9.33453 5.55146 8C5.55146 6.66547 6.65888 5.56054 7.9964 5.56054C9.33393 5.56054 10.4413 6.66547 10.4413 8C10.4413 9.33453 9.33393 10.4395 7.9964 10.4395ZM15.2809 8.71749C15.6692 8.71749 16 8.38744 16 8C16 7.60538 15.6692 7.28251 15.2809 7.28251H13.8211C13.4328 7.28251 13.102 7.60538 13.102 8C13.102 8.38744 13.4328 8.71749 13.8211 8.71749H15.2809ZM0.719101 7.28251C0.330787 7.28251 0 7.60538 0 8C0 8.38744 0.330787 8.71749 0.719101 8.71749H2.17888C2.57438 8.71749 2.90517 8.38744 2.90517 8C2.90517 7.60538 2.57438 7.28251 2.17888 7.28251H0.719101ZM12.6202 11.5946C12.347 11.322 11.8796 11.322 11.5991 11.5946C11.3258 11.8744 11.3258 12.3336 11.6063 12.6135L12.649 13.6538C12.9294 13.9265 13.3897 13.9193 13.6701 13.6395C13.9434 13.3668 13.9434 12.9076 13.6629 12.6278L12.6202 11.5946ZM2.33708 12.6206C2.05663 12.9004 2.05663 13.3668 2.3227 13.6395C2.60315 13.9121 3.07056 13.9193 3.34382 13.6466L4.38652 12.6135C4.66697 12.3336 4.66697 11.8744 4.4009 11.6018C4.12045 11.322 3.65303 11.322 3.37258 11.5946L2.33708 12.6206ZM8.7227 13.8117C8.7227 13.4242 8.39191 13.0942 8.0036 13.0942C7.60809 13.0942 7.2773 13.4242 7.2773 13.8117V15.2753C7.2773 15.6628 7.60809 16 8.0036 16C8.39191 16 8.7227 15.6628 8.7227 15.2753V13.8117Z" fill="currentColor"></path></svg><span>light Mode</span></button></footer></div>
<script src="/docs/assets/js/runtime~main.d057d825.js"></script>
<script src="/docs/assets/js/main.ff0025b5.js"></script>
</body>
</html>