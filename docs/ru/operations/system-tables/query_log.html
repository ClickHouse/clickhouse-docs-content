<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-ru/operations/system-tables/query_log">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">system.query_log | ClickHouse Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://clickhouse.com/docs/img/logo.png"><meta data-rh="true" name="twitter:image" content="https://clickhouse.com/docs/img/logo.png"><meta data-rh="true" property="og:url" content="https://clickhouse.com/docs/ru/operations/system-tables/query_log"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="system.query_log | ClickHouse Docs"><meta data-rh="true" name="description" content="systemtables-querylog}"><meta data-rh="true" property="og:description" content="systemtables-querylog}"><link data-rh="true" rel="icon" href="/docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://clickhouse.com/docs/ru/operations/system-tables/query_log"><link data-rh="true" rel="alternate" href="https://clickhouse.com/docs/ru/operations/system-tables/query_log" hreflang="en"><link data-rh="true" rel="alternate" href="https://clickhouse.com/docs/ru/operations/system-tables/query_log" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://62VCH2MD74-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/docs/knowledgebase/rss.xml" title="ClickHouse Knowledge Base Feed RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs/knowledgebase/atom.xml" title="ClickHouse Knowledge Base Feed Atom Feed">
<link rel="alternate" type="application/json" href="/docs/knowledgebase/feed.json" title="ClickHouse Knowledge Base Feed JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KF1LLRTQ5Q"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-KF1LLRTQ5Q",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="ClickHouse Docs" href="/docs/opensearch.xml">





<script src="/docs/js/analytics.js"></script><link rel="stylesheet" href="/docs/assets/css/styles.babd5c95.css">
<link rel="preload" href="/docs/assets/js/runtime~main.1f09f757.js" as="script">
<link rel="preload" href="/docs/assets/js/main.299dbf94.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navBar_gvJn"><div class="navbarHeaderContainer_rccn navbar-header"><div class="navbar__inner navbarInner_W6bg"><div class="navbar__items"><a href="https://clickhouse.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/docs/img/ch_logo_docs.svg" alt="ClickHouse" class="themedImage_ToTc themedImage--light_HNdA"><img src="/docs/img/ch_logo_docs_dark.svg" alt="ClickHouse" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><div class="navbarItemsList_uIZ2 navbar-items-list"><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link ch-menu">Product</a><ul class="dropdown__menu"><li><a href="https://clickhouse.com/clickhouse" target="_blank" rel="noopener noreferrer" class="dropdown__link">ClickHouse</a></li><li><a href="https://clickhouse.com/cloud" target="_blank" rel="noopener noreferrer" class="dropdown__link">ClickHouse Cloud</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link ch-menu">Resources</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/en/intro">Docs</a></li><li><a href="https://clickhouse.com/learn" target="_blank" rel="noopener noreferrer" class="dropdown__link">ClickHouse Academy</a></li><li><a href="https://clickhouse.com/company/news-events" target="_blank" rel="noopener noreferrer" class="dropdown__link">Upcoming training</a></li><li><a href="https://clickhouse.com/blog" target="_blank" rel="noopener noreferrer" class="dropdown__link">Blog</a></li><li><a href="https://clickhouse.com/support/program" target="_blank" rel="noopener noreferrer" class="dropdown__link">Support Program</a></li></ul></div><a href="https://clickhouse.com/customer-stories" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link ch-menu">Use Cases</a><a href="https://clickhouse.com/pricing" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link ch-menu">Pricing</a></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item">
                <div class="nav-items-btns">
                  <a href="https://clickhouse.cloud/signIn" class="sign-in navbar__item navbar__link ch-menu">
                    Sign in
                  </a>
                  <a href="https://clickhouse.cloud/signUp" class="click-button-anchor">
                    <button class="click-button primary-btn">Get started</button>
                  </a>
                </div></div><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button></div></div><div class="secondary-nav--items secondaryMenu_iuff"><div class="scrollableElement_Qqzp secondaryMenuLeft_tFZR secondary-nav--items-left"><a class="navbar__item navbar__link ch-menu" href="/docs/en/intro">Docs</a><a class="navbar__item navbar__link ch-menu" href="/docs/en/cloud/overview">Cloud</a><a class="navbar__item navbar__link ch-menu" href="/docs/en/sql-reference">SQL Reference</a><a class="navbar__item navbar__link ch-menu" href="/docs/knowledgebase">Knowledge Base</a></div><div class="secondaryMenuRight__9m4 secondary-nav--items-right"><div class="navbar__item dropdown dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg width="14" height="13" viewBox="0 0 14 13" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6.95 12.6496L9.75 5.26628H11.0333L13.8333 12.6496H12.55L11.9 10.7663H8.91667L8.25 12.6496H6.95ZM9.28333 9.69961H11.5L10.4167 6.64961H10.3667L9.28333 9.69961ZM2.08333 10.7996L1.21667 9.93294L4.33333 6.83294C3.94444 6.39961 3.60556 5.95228 3.31667 5.49094C3.02778 5.03005 2.77222 4.54405 2.55 4.03294H3.83333C4.02222 4.41072 4.22222 4.74672 4.43333 5.04094C4.64444 5.33561 4.89444 5.64405 5.18333 5.96628C5.63889 5.47739 6.01667 4.97472 6.31667 4.45828C6.61667 3.94139 6.86667 3.3885 7.06667 2.79961H0.25V1.58294H4.55V0.349609H5.78333V1.58294H10.0833V2.79961H8.3C8.07778 3.53294 7.78333 4.24116 7.41667 4.92428C7.05 5.60783 6.59444 6.25516 6.05 6.86628L7.53333 8.36628L7.06667 9.63294L5.16667 7.73294L2.08333 10.7996Z" fill="currentColor"/>
</svg></a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/en/intro">English</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/ru">Russian</a></li><li><a class="dropdown__link" href="/docs/zh">Chinese</a></li></ul></div><button class="colorModeButton_hk25 navbar-color-toggle"><svg xmlns="http://www.w3.org/2000/svg" fill="none" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"></path></svg><span>dark Mode</span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_W2AM"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage_qMb8"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_mhZE"><div class="sidebarSearchContainer_Lwc8"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_Y1UP"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/ru">Что такое ClickHouse</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/введение">Введение</a><button aria-label="Toggle the collapsible sidebar category &#x27;Введение&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ru/getting-started">Начало работы</a><button aria-label="Toggle the collapsible sidebar category &#x27;Начало работы&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ru/interfaces">Интерфейсы</a><button aria-label="Toggle the collapsible sidebar category &#x27;Интерфейсы&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/engines">Engines</a><button aria-label="Toggle the collapsible sidebar category &#x27;Engines&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ru/sql-reference">Справка по SQL</a><button aria-label="Toggle the collapsible sidebar category &#x27;Справка по SQL&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/ru/guides">Руководства</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/ru/operations">Эксплуатация</a><button aria-label="Toggle the collapsible sidebar category &#x27;Эксплуатация&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/requirements">Требования</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/monitoring">Мониторинг</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/troubleshooting">Устранение неисправностей</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/update">Обновление ClickHouse</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/access-rights">Управление доступом</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/ru/operations/external-authenticators">Внешние аутентификаторы пользователей и каталоги</a><button aria-label="Toggle the collapsible sidebar category &#x27;Внешние аутентификаторы пользователей и каталоги&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/backup">Резервное копирование данных</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/configuration-files">Конфигурационные файлы</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/quotas">Квоты</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/ru/operations/optimizing-performance">Optimizing Performance</a><button aria-label="Toggle the collapsible sidebar category &#x27;Optimizing Performance&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/ru/operations/system-tables">Системные таблицы</a><button aria-label="Toggle the collapsible sidebar category &#x27;Системные таблицы&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/asynchronous_metric_log">asynchronous_metric_log</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/asynchronous_metrics">system.asynchronous_metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/clusters">system.clusters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/columns">system.columns</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/contributors">system.contributors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/crash-log">system.crash_log</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/current-roles">system.current_roles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/data_skipping_indices">system.data_skipping_indices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/data_type_families">system.data_type_families</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/databases">system.databases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/detached_parts">system.detached_parts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/dictionaries">system.dictionaries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/disks">system.disks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/distributed_ddl_queue">system.distributed_ddl_queue</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/distribution_queue">system.distribution_queue</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/enabled-roles">system.enabled_roles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/errors">system.errors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/events">system.events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/functions">system.functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/grants">system.grants</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/graphite_retentions">system.graphite_retentions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/information_schema">INFORMATION_SCHEMA</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/licenses">system.licenses {#system-tables_system.licenses}</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/merge_tree_settings">MergeTree settings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/merges">system.merges</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/metric_log">system.metric_log</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/metrics">system.metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/mutations">system.mutations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/numbers">system.numbers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/numbers_mt">system.numbers_mt</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/one">system.one</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/opentelemetry_span_log">system.opentelemetry_span_log</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/part_log">system.part_log</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/parts">system.parts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/parts_columns">system.parts_columns</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/processes">system.processes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/ru/operations/system-tables/query_log">system.query_log</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/query_thread_log">system.query_thread_log</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/query_views_log">system.query_views_log</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/quota_limits">system.quota_limits</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/quota_usage">system.quota_usage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/quotas">system.quotas</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/quotas_usage">system.quotas_usage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/replicas">system.replicas</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/replicated_fetches">system.replicated_fetches</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/replication_queue">system.replication_queue</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/role-grants">system.role_grants</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/roles">system.roles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/row_policies">system.row_policies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/server_settings">system.server_settings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/session_log">system.session_log</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/settings">system.settings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/settings_profile_elements">system.settings_profile_elements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/settings_profiles">system.settings_profiles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/stack_trace">system.stack_trace</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/storage_policies">system.storage_policies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/table_engines">system.table_engines</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/tables">system.tables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/text_log">system.text_log</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/time_zones">time_zones</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/trace_log">system.trace_log</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/users">system.users</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/zookeeper">system.zookeeper</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/system-tables/zookeeper_log">system.zookeeper_log</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/performance-test">Testing Hardware</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/ru/operations/server-configuration-parameters">Конфигурационные параметры сервера</a><button aria-label="Toggle the collapsible sidebar category &#x27;Конфигурационные параметры сервера&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/ru/operations/settings">Settings</a><button aria-label="Toggle the collapsible sidebar category &#x27;Settings&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/ru/operations/utilities">Утилиты</a><button aria-label="Toggle the collapsible sidebar category &#x27;Утилиты&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/tips">Usage Recommendations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/opentelemetry">Поддержка OpenTelemetry</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/caches">Кеши</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/clickhouse-keeper">ClickHouse Keeper</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/storing-data">Хранение данных на внешних дисках</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ru/operations/named-collections">Именованные соединения</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/инструкция-для-разработчиков">Инструкция для разработчиков</a><button aria-label="Toggle the collapsible sidebar category &#x27;Инструкция для разработчиков&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ru/commercial">Коммерческие услуги</a><button aria-label="Toggle the collapsible sidebar category &#x27;Коммерческие услуги&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ru/whats-new">What&#x27;s New</a><button aria-label="Toggle the collapsible sidebar category &#x27;What&#x27;s New&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ru/faq">F.A.Q.</a><button aria-label="Toggle the collapsible sidebar category &#x27;F.A.Q.&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menuListItemCollapsed_i9wL menu__list-item-collapsible" data-link="true"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ru/about-us">About Us</a><button aria-label="Toggle the collapsible sidebar category &#x27;About Us&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_RiV8"><div class="container padding-top--md padding-bottom--lg main-content-wrapper"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><div class="theme-doc-markdown markdown"><h1>system.query_log</h1><p>Содержит информацию о выполняемых запросах, например, время начала обработки, продолжительность обработки, сообщения об ошибках.</p><div class="codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">:::note &quot;Внимание&quot;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Таблица не содержит входных данных для запросов `INSERT`.</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">:::</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Настойки логгирования можно изменить в секции серверной конфигурации <a href="/docs/ru/operations/server-configuration-parameters/settings#server_configuration_parameters-query-log">query_log</a>.</p><p>Можно отключить логгирование настройкой <a href="/docs/ru/operations/settings/settings#settings-log-queries">log_queries = 0</a>. По-возможности, не отключайте логгирование, поскольку информация из таблицы важна при решении проблем.</p><p>Период сброса данных в таблицу задаётся параметром <code>flush_interval_milliseconds</code> в конфигурационной секции <a href="/docs/ru/operations/server-configuration-parameters/settings#server_configuration_parameters-query-log">query_log</a>. Чтобы принудительно записать логи из буффера памяти в таблицу, используйте запрос <a href="/docs/ru/sql-reference/statements/system#query_language-system-flush_logs">SYSTEM FLUSH LOGS</a>.</p><p>ClickHouse не удаляет данные из таблица автоматически. Смотрите <a href="#system-tables-introduction">Введение</a>.</p><p>Таблица <code>system.query_log</code> содержит информацию о двух видах запросов:</p><ol><li>Первоначальные запросы, которые были выполнены непосредственно клиентом.</li><li>Дочерние запросы, инициированные другими запросами (для выполнения распределенных запросов). Для дочерних запросов информация о первоначальном запросе содержится в столбцах <code>initial_*</code>.</li></ol><p>В зависимости от статуса (столбец <code>type</code>) каждый запрос создаёт одну или две строки в таблице <code>query_log</code>:</p><ol><li>Если запрос выполнен успешно, создаются два события типа <code>QueryStart</code> и <code>QueryFinish</code>.</li><li>Если во время обработки запроса возникла ошибка, создаются два события с типами <code>QueryStart</code> и <code>ExceptionWhileProcessing</code>.</li><li>Если ошибка произошла ещё до запуска запроса, создается одно событие с типом <code>ExceptionBeforeStart</code>.</li></ol><p>Чтобы уменьшить количество запросов, регистрирующихся в таблице <code>query_log</code>, вы можете использовать настройку <a href="/docs/ru/operations/settings/settings#log-queries-probability">log_queries_probability</a>.</p><p>Чтобы регистрировать отформатированные запросы в столбце <code>formatted_query</code>, вы можете использовать настройку <a href="/docs/ru/operations/settings/settings#settings-log-formatted-queries">log_formatted_queries</a>.</p><p>Столбцы:</p><ul><li><code>type</code> (<a href="/docs/ru/sql-reference/data-types/enum">Enum8</a>) — тип события, произошедшего при выполнении запроса. Значения:<ul><li><code>&#x27;QueryStart&#x27; = 1</code> — успешное начало выполнения запроса.</li><li><code>&#x27;QueryFinish&#x27; = 2</code> — успешное завершение выполнения запроса.</li><li><code>&#x27;ExceptionBeforeStart&#x27; = 3</code> — исключение перед началом обработки запроса.</li><li><code>&#x27;ExceptionWhileProcessing&#x27; = 4</code> — исключение во время обработки запроса.</li></ul></li><li><code>event_date</code> (<a href="/docs/ru/sql-reference/data-types/date">Date</a>) — дата начала запроса.</li><li><code>event_time</code> (<a href="/docs/ru/sql-reference/data-types/datetime">DateTime</a>) — время начала запроса.</li><li><code>event_time_microseconds</code> (<a href="/docs/ru/sql-reference/data-types/datetime">DateTime</a>) — время начала запроса с точностью до микросекунд.</li><li><code>query_start_time</code> (<a href="/docs/ru/sql-reference/data-types/datetime">DateTime</a>) — время начала обработки запроса.</li><li><code>query_start_time_microseconds</code> (<a href="/docs/ru/sql-reference/data-types/datetime64">DateTime64</a>) — время начала обработки запроса с точностью до микросекунд.</li><li><code>query_duration_ms</code> (<a href="/docs/ru/sql-reference/data-types/int-uint#uint-ranges">UInt64</a>) — длительность выполнения запроса в миллисекундах.</li><li><code>read_rows</code> (<a href="/docs/ru/sql-reference/data-types/int-uint#uint-ranges">UInt64</a>) — общее количество строк, считанных из всех таблиц и табличных функций, участвующих в запросе. Включает в себя обычные подзапросы, подзапросы для <code>IN</code> и <code>JOIN</code>. Для распределенных запросов <code>read_rows</code> включает в себя общее количество строк, прочитанных на всех репликах. Каждая реплика передает собственное значение <code>read_rows</code>, а сервер-инициатор запроса суммирует все полученные и локальные значения. Объемы кэша не учитываюся.</li><li><code>read_bytes</code> (<a href="/docs/ru/sql-reference/data-types/int-uint#uint-ranges">UInt64</a>) — общее количество байтов, считанных из всех таблиц и табличных функций, участвующих в запросе. Включает в себя обычные подзапросы, подзапросы для <code>IN</code> и <code>JOIN</code>. Для распределенных запросов <code>read_bytes</code> включает в себя общее количество байтов, прочитанных на всех репликах. Каждая реплика передает собственное значение <code>read_bytes</code>, а сервер-инициатор запроса суммирует все полученные и локальные значения. Объемы кэша не учитываюся.</li><li><code>written_rows</code> (<a href="/docs/ru/sql-reference/data-types/int-uint#uint-ranges">UInt64</a>) — количество записанных строк для запросов <code>INSERT</code>. Для других запросов, значение столбца 0.</li><li><code>written_bytes</code> (<a href="/docs/ru/sql-reference/data-types/int-uint#uint-ranges">UInt64</a>) — объём записанных данных в байтах для запросов <code>INSERT</code>. Для других запросов, значение столбца 0.</li><li><code>result_rows</code> (<a href="/docs/ru/sql-reference/data-types/int-uint#uint-ranges">UInt64</a>) — количество строк в результате запроса <code>SELECT</code> или количество строк в запросе <code>INSERT</code>.</li><li><code>result_bytes</code> (<a href="/docs/ru/sql-reference/data-types/int-uint#uint-ranges">UInt64</a>) — объём RAM в байтах, использованный для хранения результата запроса.</li><li><code>memory_usage</code> (<a href="/docs/ru/sql-reference/data-types/int-uint#uint-ranges">UInt64</a>) — потребление RAM запросом.</li><li><code>current_database</code> (<a href="/docs/ru/sql-reference/data-types/string">String</a>) — имя текущей базы данных.</li><li><code>query</code> (<a href="/docs/ru/sql-reference/data-types/string">String</a>) — текст запроса.</li><li><code>formatted_query</code> (<a href="/docs/ru/sql-reference/data-types/string">String</a>) — текст отформатированного запроса.</li><li><code>normalized_query_hash</code> (<a href="/docs/ru/sql-reference/data-types/int-uint#uint-ranges">UInt64</a>) — идентичная хэш-сумма без значений литералов для аналогичных запросов.</li><li><code>query_kind</code> (<a href="/docs/ru/sql-reference/data-types/lowcardinality">LowCardinality(String)</a>) — тип запроса.</li><li><code>databases</code> (<a href="/docs/ru/sql-reference/data-types/array">Array</a>(<a href="/docs/ru/sql-reference/data-types/lowcardinality">LowCardinality(String)</a>)) — имена баз данных, присутствующих в запросе.</li><li><code>tables</code> (<a href="/docs/ru/sql-reference/data-types/array">Array</a>(<a href="/docs/ru/sql-reference/data-types/lowcardinality">LowCardinality(String)</a>)) — имена таблиц, присутствующих в запросе.</li><li><code>views</code> (<a href="/docs/ru/sql-reference/data-types/array">Array</a>(<a href="/docs/ru/sql-reference/data-types/lowcardinality">LowCardinality(String)</a>)) — имена представлений (материализованные или live), которые представленны в запросе.</li><li><code>columns</code> (<a href="/docs/ru/sql-reference/data-types/array">Array</a>(<a href="/docs/ru/sql-reference/data-types/lowcardinality">LowCardinality(String)</a>)) — имена столбцов, присутствующих в запросе.</li><li><code>projections</code> (<a href="/docs/ru/sql-reference/data-types/string">String</a>) — имена проекций, использованных при выполнении запроса.</li><li><code>exception_code</code> (<a href="/docs/ru/sql-reference/data-types/int-uint">Int32</a>) — код исключения.</li><li><code>exception</code> (<a href="/docs/ru/sql-reference/data-types/string">String</a>) — сообщение исключения, если запрос завершился по исключению.</li><li><code>stack_trace</code> (<a href="/docs/ru/sql-reference/data-types/string">String</a>) — <a href="https://en.wikipedia.org/wiki/Stack_trace" target="_blank" rel="noopener noreferrer">stack trace</a>. Пустая строка, если запрос успешно завершен.</li><li><code>is_initial_query</code> (<a href="/docs/ru/sql-reference/data-types/int-uint">UInt8</a>) — вид запроса. Возможные значения:<ul><li>1 — запрос был инициирован клиентом.</li><li>0 — запрос был инициирован другим запросом при выполнении распределенного запроса.</li></ul></li><li><code>user</code> (<a href="/docs/ru/sql-reference/data-types/string">String</a>) — пользователь, запустивший текущий запрос.</li><li><code>query_id</code> (<a href="/docs/ru/sql-reference/data-types/string">String</a>) — ID запроса.</li><li><code>address</code> (<a href="/docs/ru/sql-reference/data-types/domains/ipv6">IPv6</a>) — IP адрес, с которого пришел запрос.</li><li><code>port</code> (<a href="/docs/ru/sql-reference/data-types/int-uint">UInt16</a>) — порт, с которого клиент сделал запрос</li><li><code>initial_user</code> (<a href="/docs/ru/sql-reference/data-types/string">String</a>) — пользователь, запустивший первоначальный запрос (для распределенных запросов).</li><li><code>initial_query_id</code> (<a href="/docs/ru/sql-reference/data-types/string">String</a>) — ID родительского запроса.</li><li><code>initial_address</code> (<a href="/docs/ru/sql-reference/data-types/domains/ipv6">IPv6</a>) — IP адрес, с которого пришел родительский запрос.</li><li><code>initial_port</code> (<a href="/docs/ru/sql-reference/data-types/int-uint">UInt16</a>) — порт, с которого клиент сделал родительский запрос.</li><li><code>initial_query_start_time</code> (<a href="/docs/ru/sql-reference/data-types/datetime">DateTime</a>) — время начала обработки запроса (для распределенных запросов).</li><li><code>initial_query_start_time_microseconds</code> (<a href="/docs/ru/sql-reference/data-types/datetime64">DateTime64</a>) — время начала обработки запроса с точностью до микросекунд (для распределенных запросов).</li><li><code>interface</code> (<a href="/docs/ru/sql-reference/data-types/int-uint">UInt8</a>) — интерфейс, с которого ушёл запрос. Возможные значения:<ul><li>1 — TCP.</li><li>2 — HTTP.</li></ul></li><li><code>os_user</code> (<a href="/docs/ru/sql-reference/data-types/string">String</a>) — имя пользователя операционной системы, который запустил <a href="/docs/ru/interfaces/cli">clickhouse-client</a>.</li><li><code>client_hostname</code> (<a href="/docs/ru/sql-reference/data-types/string">String</a>) — имя сервера, с которого присоединился <a href="/docs/ru/interfaces/cli">clickhouse-client</a> или другой TCP клиент.</li><li><code>client_name</code> (<a href="/docs/ru/sql-reference/data-types/string">String</a>) — <a href="/docs/ru/interfaces/cli">clickhouse-client</a> или другой TCP клиент.</li><li><code>client_revision</code> (<a href="/docs/ru/sql-reference/data-types/int-uint">UInt32</a>) — ревизия <a href="/docs/ru/interfaces/cli">clickhouse-client</a> или другого TCP клиента.</li><li><code>client_version_major</code> (<a href="/docs/ru/sql-reference/data-types/int-uint">UInt32</a>) — старшая версия <a href="/docs/ru/interfaces/cli">clickhouse-client</a> или другого TCP клиента.</li><li><code>client_version_minor</code> (<a href="/docs/ru/sql-reference/data-types/int-uint">UInt32</a>) — младшая версия <a href="/docs/ru/interfaces/cli">clickhouse-client</a> или другого TCP клиента.</li><li><code>client_version_patch</code> (<a href="/docs/ru/sql-reference/data-types/int-uint">UInt32</a>) — патч <a href="/docs/ru/interfaces/cli">clickhouse-client</a> или другого TCP клиента.</li><li><code>http_method</code> (<a href="/docs/ru/sql-reference/data-types/int-uint">UInt8</a>) — HTTP метод, инициировавший запрос. Возможные значения:<ul><li>0 — запрос запущен с интерфейса TCP.</li><li>1 — <code>GET</code>.</li><li>2 — <code>POST</code>.</li></ul></li><li><code>http_user_agent</code> (<a href="/docs/ru/sql-reference/data-types/string">String</a>) — HTTP заголовок <code>UserAgent</code>.</li><li><code>http_referer</code> (<a href="/docs/ru/sql-reference/data-types/string">String</a>) — HTTP заголовок <code>Referer</code> (содержит полный или частичный адрес страницы, с которой был выполнен запрос).</li><li><code>forwarded_for</code> (<a href="/docs/ru/sql-reference/data-types/string">String</a>) — HTTP заголовок <code>X-Forwarded-For</code>.</li><li><code>quota_key</code> (<a href="/docs/ru/sql-reference/data-types/string">String</a>) — <code>ключ квоты</code> из настроек <a href="/docs/ru/operations/system-tables/quotas">квот</a> (см. <code>keyed</code>).</li><li><code>revision</code> (<a href="/docs/ru/sql-reference/data-types/int-uint">UInt32</a>) — ревизия ClickHouse.</li><li><code>ProfileEvents</code> (<a href="/docs/ru/sql-reference/data-types/array">Map(String, UInt64)</a>) — счетчики для изменения различных метрик. Описание метрик можно получить из таблицы <a href="#system_tables-events">system.events</a>(#system_tables-events</li><li><code>Settings</code> (<a href="/docs/ru/sql-reference/data-types/array">Map(String, String)</a>) — имена настроек, которые меняются, когда клиент выполняет запрос. Чтобы разрешить логирование изменений настроек, установите параметр <code>log_query_settings</code> равным 1.</li><li><code>log_comment</code> (<a href="/docs/ru/sql-reference/data-types/string">String</a>) — комментарий к записи в логе. Представляет собой произвольную строку, длина которой должна быть не больше, чем <a href="/docs/ru/operations/settings/settings#settings-max_query_size">max_query_size</a>. Если нет комментария, то пустая строка.</li><li><code>thread_ids</code> (<a href="/docs/ru/sql-reference/data-types/array">Array(UInt64)</a>) — идентификаторы потоков, участвующих в обработке запросов.</li><li><code>used_aggregate_functions</code> (<a href="/docs/ru/sql-reference/data-types/array">Array(String)</a>) — канонические имена <code>агрегатных функций</code>, использованных при выполнении запроса.</li><li><code>used_aggregate_function_combinators</code> (<a href="/docs/ru/sql-reference/data-types/array">Array(String)</a>) — канонические имена <code>комбинаторов агрегатных функций</code>, использованных при выполнении запроса.</li><li><code>used_database_engines</code> (<a href="/docs/ru/sql-reference/data-types/array">Array(String)</a>) — канонические имена <code>движков баз данных</code>, использованных при выполнении запроса.</li><li><code>used_data_type_families</code> (<a href="/docs/ru/sql-reference/data-types/array">Array(String)</a>) — канонические имена <code>семейств типов данных</code>, использованных при выполнении запроса.</li><li><code>used_dictionaries</code> (<a href="/docs/ru/sql-reference/data-types/array">Array(String)</a>) — канонические имена <code>источников словарей</code>, использованных при выполнении запроса.</li><li><code>used_formats</code> (<a href="/docs/ru/sql-reference/data-types/array">Array(String)</a>) — канонические имена <code>форматов</code>, использованных при выполнении запроса.</li><li><code>used_functions</code> (<a href="/docs/ru/sql-reference/data-types/array">Array(String)</a>) — канонические имена <code>функций</code>, использованных при выполнении запроса.</li><li><code>used_storages</code> (<a href="/docs/ru/sql-reference/data-types/array">Array(String)</a>) — канонические имена <code>движков таблиц</code>, использованных при выполнении запроса.</li><li><code>used_table_functions</code> (<a href="/docs/ru/sql-reference/data-types/array">Array(String)</a>) — канонические имена <code>табличных функций</code>, использованных при выполнении запроса.</li></ul><p><strong>Пример</strong></p><div class="language-sql codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">FROM</span><span class="token plain"> system</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">query_log </span><span class="token keyword" style="color:rgb(86, 156, 214)">WHERE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">type</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;QueryFinish&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">BY</span><span class="token plain"> query_start_time </span><span class="token keyword" style="color:rgb(86, 156, 214)">DESC</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">LIMIT</span><span class="token plain"> </span><span class="token number" style="color:rgb(181, 206, 168)">1</span><span class="token plain"> FORMAT Vertical</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-text codeBlockContainer_APcc theme-code-block"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">Row 1:</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">──────</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">type:                                  QueryFinish</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">event_date:                            2021-11-03</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">event_time:                            2021-11-03 16:13:54</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">event_time_microseconds:               2021-11-03 16:13:54.953024</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">query_start_time:                      2021-11-03 16:13:54</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">query_start_time_microseconds:         2021-11-03 16:13:54.952325</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">query_duration_ms:                     0</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">read_rows:                             69</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">read_bytes:                            6187</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">written_rows:                          0</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">written_bytes:                         0</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">result_rows:                           69</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">result_bytes:                          48256</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">memory_usage:                          0</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">current_database:                      default</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">query:                                 DESCRIBE TABLE system.query_log</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">formatted_query:</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">normalized_query_hash:                 8274064835331539124</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">query_kind:</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">databases:                             []</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">tables:                                []</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">columns:                               []</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">projections:                           []</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">views:                                 []</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">exception_code:                        0</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">exception:</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">stack_trace:</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">is_initial_query:                      1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">user:                                  default</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">query_id:                              7c28bbbb-753b-4eba-98b1-efcbe2b9bdf6</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">address:                               ::ffff:127.0.0.1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">port:                                  40452</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">initial_user:                          default</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">initial_query_id:                      7c28bbbb-753b-4eba-98b1-efcbe2b9bdf6</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">initial_address:                       ::ffff:127.0.0.1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">initial_port:                          40452</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">initial_query_start_time:              2021-11-03 16:13:54</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">initial_query_start_time_microseconds: 2021-11-03 16:13:54.952325</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">interface:                             1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">os_user:                               sevirov</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">client_hostname:                       clickhouse.ru-central1.internal</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">client_name:                           ClickHouse</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">client_revision:                       54449</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">client_version_major:                  21</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">client_version_minor:                  10</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">client_version_patch:                  1</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">http_method:                           0</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">http_user_agent:</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">http_referer:</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">forwarded_for:</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">quota_key:</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">revision:                              54456</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">log_comment:</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">thread_ids:                            [30776,31174]</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">ProfileEvents:                         {&#x27;Query&#x27;:1,&#x27;NetworkSendElapsedMicroseconds&#x27;:59,&#x27;NetworkSendBytes&#x27;:2643,&#x27;SelectedRows&#x27;:69,&#x27;SelectedBytes&#x27;:6187,&#x27;ContextLock&#x27;:9,&#x27;RWLockAcquiredReadLocks&#x27;:1,&#x27;RealTimeMicroseconds&#x27;:817,&#x27;UserTimeMicroseconds&#x27;:427,&#x27;SystemTimeMicroseconds&#x27;:212,&#x27;OSCPUVirtualTimeMicroseconds&#x27;:639,&#x27;OSReadChars&#x27;:894,&#x27;OSWriteChars&#x27;:319}</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Settings:                              {&#x27;load_balancing&#x27;:&#x27;random&#x27;,&#x27;max_memory_usage&#x27;:&#x27;10000000000&#x27;}</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">used_aggregate_functions:              []</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">used_aggregate_function_combinators:   []</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">used_database_engines:                 []</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">used_data_type_families:               []</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">used_dictionaries:                     []</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">used_formats:                          []</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">used_functions:                        []</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">used_storages:                         []</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">used_table_functions:                  []</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>См. также</strong></p><ul><li><a href="/docs/ru/operations/system-tables/query_thread_log#system_tables-query_thread_log">system.query_thread_log</a> — в этой таблице содержится информация о цепочке каждого выполненного запроса.</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ClickHouse/ClickHouse/tree/master/docs/ru/operations/system-tables/query_log.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev paginationNavLink_UdUv" href="/docs/ru/operations/system-tables/processes"><svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.2751 19.175L10.3251 18.125L5.4501 13.25H21.6001V11.75H5.4501L10.3251 6.87501L9.2751 5.82501L2.5751 12.5L9.2751 19.175Z" fill="currentColor"></path></svg><div class="paginationNavContent__3xr"><div class="pagination-nav__sublabel">Previous</div><div class="paginationNavLabel_YPzM pagination-nav__label">system.processes</div></div></a><a class="pagination-nav__link pagination-nav__link--next paginationNavLink_UdUv" href="/docs/ru/operations/system-tables/query_thread_log"><div class="paginationNavContent__3xr"><div class="pagination-nav__sublabel">Next</div><div class="paginationNavLabel_YPzM pagination-nav__label">system.query_thread_log</div></div><svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.7249 19.175L13.6749 18.125L18.5499 13.25H2.3999V11.75H18.5499L13.6749 6.87501L14.7249 5.82501L21.4249 12.5L14.7249 19.175Z" fill="currentColor"></path></svg></a></nav></div></div></div></div></main></div></div><footer class="footer footer_jryj"><div class="container_y1z5 container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">© 2016&ndash;2023 ClickHouse, Inc.</div></div><div><div class="footer__links text--center"><div class="footer__links"><a href="https://clickhouse.com/legal/trademark-policy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Trademark</a><span class="footer__link-separator">·</span><a href="https://clickhouse.com/legal/privacy-policy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy</a><span class="footer__link-separator">·</span><a href="https://trust.clickhouse.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Security</a><span class="footer__link-separator">·</span><a href="https://clickhouse.com/legal/agreements/terms-of-service" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Service</a></div></div></div></div><button class="colorModeButton_hk25"><svg xmlns="http://www.w3.org/2000/svg" fill="none" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"></path></svg><span>dark Mode</span></button></footer></div>
<script src="/docs/assets/js/runtime~main.1f09f757.js"></script>
<script src="/docs/assets/js/main.299dbf94.js"></script>
</body>
</html>