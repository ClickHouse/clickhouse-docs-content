"use strict";(self.webpackChunkclickhouse=self.webpackChunkclickhouse||[]).push([[52829],{3905:function(e,t,a){a.d(t,{Zo:function(){return u},kt:function(){return m}});var n=a(67294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var r=n.createContext({}),c=function(e){var t=n.useContext(r),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},u=function(e){var t=c(e.components);return n.createElement(r.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,o=e.originalType,r=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),h=c(a),m=i,p=h["".concat(r,".").concat(m)]||h[m]||d[m]||o;return a?n.createElement(p,l(l({ref:t},u),{},{components:a})):n.createElement(p,l({ref:t},u))}));function m(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=a.length,l=new Array(o);l[0]=h;var s={};for(var r in t)hasOwnProperty.call(t,r)&&(s[r]=t[r]);s.originalType=e,s.mdxType="string"==typeof e?e:i,l[1]=s;for(var c=2;c<o;c++)l[c]=a[c];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},85162:function(e,t,a){a.d(t,{Z:function(){return l}});var n=a(67294),i=a(86010),o="tabItem_Ymn6";function l(e){var t=e.children,a=e.hidden,l=e.className;return n.createElement("div",{role:"tabpanel",className:(0,i.Z)(o,l),hidden:a},t)}},65488:function(e,t,a){a.d(t,{Z:function(){return m}});var n=a(87462),i=a(67294),o=a(86010),l=a(72389),s=a(67392),r=a(7094),c=a(12466),u="tabList__CuJ",d="tabItem_LNqP";function h(e){var t,a,l=e.lazy,h=e.block,m=e.defaultValue,p=e.values,k=e.groupId,g=e.className,v=i.Children.map(e.children,(function(e){if((0,i.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),f=null!=p?p:v.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),b=(0,s.l)(f,(function(e,t){return e.value===t.value}));if(b.length>0)throw new Error('Docusaurus error: Duplicate values "'+b.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var y=null===m?m:null!=(t=null!=m?m:null==(a=v.find((function(e){return e.props.default})))?void 0:a.props.value)?t:v[0].props.value;if(null!==y&&!f.some((function(e){return e.value===y})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+y+'" but none of its children has the corresponding value. Available values are: '+f.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var N=(0,r.U)(),w=N.tabGroupChoices,C=N.setTabGroupChoices,M=(0,i.useState)(y),T=M[0],H=M[1],S=[],E=(0,c.o5)().blockElementScrollPositionUntilNextRender;if(null!=k){var O=w[k];null!=O&&O!==T&&f.some((function(e){return e.value===O}))&&H(O)}var x=function(e){var t=e.currentTarget,a=S.indexOf(t),n=f[a].value;n!==T&&(E(t),H(n),null!=k&&C(k,String(n)))},q=function(e){var t,a=null;switch(e.key){case"ArrowRight":var n,i=S.indexOf(e.currentTarget)+1;a=null!=(n=S[i])?n:S[0];break;case"ArrowLeft":var o,l=S.indexOf(e.currentTarget)-1;a=null!=(o=S[l])?o:S[S.length-1]}null==(t=a)||t.focus()};return i.createElement("div",{className:(0,o.Z)("tabs-container",u)},i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":h},g)},f.map((function(e){var t=e.value,a=e.label,l=e.attributes;return i.createElement("li",(0,n.Z)({role:"tab",tabIndex:T===t?0:-1,"aria-selected":T===t,key:t,ref:function(e){return S.push(e)},onKeyDown:q,onFocus:x,onClick:x},l,{className:(0,o.Z)("tabs__item",d,null==l?void 0:l.className,{"tabs__item--active":T===t})}),null!=a?a:t)}))),l?(0,i.cloneElement)(v.filter((function(e){return e.props.value===T}))[0],{className:"margin-top--md"}):i.createElement("div",{className:"margin-top--md"},v.map((function(e,t){return(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==T})}))))}function m(e){var t=(0,l.Z)();return i.createElement(h,(0,n.Z)({key:String(t)},e))}},34775:function(e,t,a){a.d(t,{ZP:function(){return r}});var n=a(87462),i=a(63366),o=(a(67294),a(3905)),l=["components"],s={toc:[]};function r(e){var t=e.components,r=(0,i.Z)(e,l);return(0,o.kt)("wrapper",(0,n.Z)({},s,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("details",null,(0,o.kt)("summary",null,"Manage your IP Access List"),(0,o.kt)("p",null,"From your ClickHouse Cloud services list choose the service that you will work with and switch to ",(0,o.kt)("strong",{parentName:"p"},"Security"),".  If the IP Access List does not contain the IP Address or range of the remote system that needs to connect to your ClickHouse Cloud service, then you can resolve the problem with ",(0,o.kt)("strong",{parentName:"p"},"Add entry"),":"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Check to see if the service allows traffic",src:a(62406).Z,width:"999",height:"519"})),(0,o.kt)("p",null,"Add the individual IP Address, or the range of addresses that need to connect to your ClickHouse Cloud service. Modify the form as you see fit and then ",(0,o.kt)("strong",{parentName:"p"},"Add entry")," and ",(0,o.kt)("strong",{parentName:"p"},"Submit entry"),"."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Add your current IP address",src:a(68554).Z,width:"595",height:"523"}))))}r.isMDXComponent=!0},86081:function(e,t,a){a.r(t),a.d(t,{assets:function(){return m},contentTitle:function(){return d},default:function(){return g},frontMatter:function(){return u},metadata:function(){return h},toc:function(){return p}});var n=a(87462),i=a(63366),o=(a(67294),a(3905)),l=a(65488),s=a(85162),r=a(34775),c=["components"],u={sidebar_label:"Using clickhouse-local",sidebar_position:20,keywords:["clickhouse","migrate","migration","migrating","data","etl","elt","clickhouse-local","clickhouse-client"],slug:"/en/integrations/migration/clickhouse-local"},d="Using clickhouse-local",h={unversionedId:"en/integrations/migration/clickhouse-local-etl",id:"en/integrations/migration/clickhouse-local-etl",title:"Using clickhouse-local",description:"You can use ClickHouse, or to be more specific,clickhouse-local",source:"@site/docs/en/integrations/migration/clickhouse-local-etl.md",sourceDirName:"en/integrations/migration",slug:"/en/integrations/migration/clickhouse-local",permalink:"/docs/en/integrations/migration/clickhouse-local",draft:!1,editUrl:"https://github.com/ClickHouse/clickhouse-docs/blob/main/docs/en/integrations/migration/clickhouse-local-etl.md",tags:[],version:"current",sidebarPosition:20,frontMatter:{sidebar_label:"Using clickhouse-local",sidebar_position:20,keywords:["clickhouse","migrate","migration","migrating","data","etl","elt","clickhouse-local","clickhouse-client"],slug:"/en/integrations/migration/clickhouse-local"},sidebar:"english",previous:{title:"ClickHouse to Clickhouse Cloud",permalink:"/docs/en/integrations/migration/clickhouse-to-cloud"},next:{title:"Using a 3rd-party ETL Tool",permalink:"/docs/en/integrations/migration/etl-tool-to-clickhouse"}},m={},p=[{value:"What is clickhouse-local?",id:"what-is-clickhouse-local",level:2},{value:"Installing clickhouse-local",id:"installing-clickhouse-local",level:2},{value:"Example 1: Migrating from MySQL to ClickHouse Cloud with an Integration engine",id:"example-1-migrating-from-mysql-to-clickhouse-cloud-with-an-integration-engine",level:2},{value:"On the destination ClickHouse Cloud service:",id:"on-the-destination-clickhouse-cloud-service",level:3},{value:"Create the destination database:",id:"create-the-destination-database",level:4},{value:"Create a destination table that has a schema equivalent to the MySQL table:",id:"create-a-destination-table-that-has-a-schema-equivalent-to-the-mysql-table",level:4},{value:"On the clickhouse-local host machine:",id:"on-the-clickhouse-local-host-machine",level:3},{value:"Run clickhouse-local with the migration query:",id:"run-clickhouse-local-with-the-migration-query",level:4},{value:"Example 2: Migrating from MySQL to ClickHouse Cloud with the JDBC bridge",id:"example-2-migrating-from-mysql-to-clickhouse-cloud-with-the-jdbc-bridge",level:2},{value:"On the destination ClickHouse Cloud service:",id:"on-the-destination-clickhouse-cloud-service-1",level:3},{value:"Create the destination database:",id:"create-the-destination-database-1",level:4},{value:"Create a destination table that has a schema equivalent to the MySQL table:",id:"create-a-destination-table-that-has-a-schema-equivalent-to-the-mysql-table-1",level:4},{value:"On the clickhouse-local host machine:",id:"on-the-clickhouse-local-host-machine-1",level:3},{value:"Install, configure, and start the ClickHouse JDBC Bridge locally:",id:"install-configure-and-start-the-clickhouse-jdbc-bridge-locally",level:4},{value:"Run clickhouse-local with the migration query:",id:"run-clickhouse-local-with-the-migration-query-1",level:4}],k={toc:p};function g(e){var t=e.components,u=(0,i.Z)(e,c);return(0,o.kt)("wrapper",(0,n.Z)({},k,u,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"using-clickhouse-local"},"Using clickhouse-local"),(0,o.kt)("img",{src:a(26449).Z,class:"image",alt:"Migrating Self-managed ClickHouse",style:{width:"40%",padding:"30px"}}),(0,o.kt)("p",null,"You can use ClickHouse, or to be more specific,",(0,o.kt)("a",{parentName:"p",href:"/docs/en/operations/utilities/clickhouse-local"},(0,o.kt)("inlineCode",{parentName:"a"},"clickhouse-local")),"\nas an ETL tool for migrating data from your current database system to ClickHouse Cloud, as long as for your current database system there is either a\nClickHouse-provided ",(0,o.kt)("a",{parentName:"p",href:"/docs/en/engines/table-engines/#integration-engines"},"integration engine"),"  or ",(0,o.kt)("a",{parentName:"p",href:"/docs/en/sql-reference/table-functions/"},"table function"),", respectively,\nor a vendor provided JDBC driver or ODBC driver available."),(0,o.kt)("p",null,"ClickHouse provides integration engines and table functions (that create integration engines on-the-fly) for ",(0,o.kt)("a",{parentName:"p",href:"/docs/en/engines/table-engines/integrations/mysql/"},"MySQL"),", ",(0,o.kt)("a",{parentName:"p",href:"/docs/en/engines/table-engines/integrations/postgresql"},"PostgreSQL"),", ",(0,o.kt)("a",{parentName:"p",href:"/docs/en/engines/table-engines/integrations/mongodb"},"MongoDB")," and ",(0,o.kt)("a",{parentName:"p",href:"/docs/en/engines/table-engines/integrations/sqlite"},"SQLite"),".\nFor all other popular database systems, there is JDBC driver or ODBC driver available from the vendor of the system."),(0,o.kt)("h2",{id:"what-is-clickhouse-local"},"What is clickhouse-local?"),(0,o.kt)("img",{src:a(41604).Z,class:"image",alt:"Migrating Self-managed ClickHouse",style:{width:"100%",padding:"30px"}}),(0,o.kt)("p",null,"Typically, ClickHouse is run in the form of a cluster, where several instances of the ClickHouse database engine are running in a distributed fashion on different servers."),(0,o.kt)("p",null,"On a single server, the ClickHouse database engine is run as part of the ",(0,o.kt)("inlineCode",{parentName:"p"},"clickhouse-server")," program. Database access (paths, users, security, ...) is configured with a server configuration file."),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"clickhouse-local")," tool allows you to use the ClickHouse database engine isolated in a command-line utility fashion for blazing-fast SQL data processing on an ample amount of inputs and outputs, without having to configure and start a ClickHouse server."),(0,o.kt)("h2",{id:"installing-clickhouse-local"},"Installing clickhouse-local"),(0,o.kt)("p",null,"You need a host machine for ",(0,o.kt)("inlineCode",{parentName:"p"},"clickhouse-local")," that has network access to both your current source database system and your ClickHouse Cloud target service."),(0,o.kt)("p",null,"On that host machine, download the appropriate build of ",(0,o.kt)("inlineCode",{parentName:"p"},"clickhouse-local")," based on your computer's operating system:"),(0,o.kt)(l.Z,{groupId:"os",mdxType:"Tabs"},(0,o.kt)(s.Z,{value:"linux",label:"Linux",mdxType:"TabItem"},(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"The simplest way to download ",(0,o.kt)("inlineCode",{parentName:"p"},"clickhouse-local")," locally is to run the following command:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"curl https://clickhouse.com/ | sh\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Run ",(0,o.kt)("inlineCode",{parentName:"p"},"clickhouse-local")," (it will just print its version):"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"./clickhouse-local\n"))))),(0,o.kt)(s.Z,{value:"mac",label:"macOS",mdxType:"TabItem"},(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"The simplest way to download ",(0,o.kt)("inlineCode",{parentName:"p"},"clickhouse-local")," locally is to run the following command:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"curl https://clickhouse.com/ | sh\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Run ",(0,o.kt)("inlineCode",{parentName:"p"},"clickhouse-local")," (it will just print its version):"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"./clickhouse local\n")))))),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Important")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"The examples throughout this guide use the Linux commands for running ",(0,o.kt)("inlineCode",{parentName:"p"},"clickhouse-local")," (",(0,o.kt)("inlineCode",{parentName:"p"},"./clickhouse-local"),").\nTo run ",(0,o.kt)("inlineCode",{parentName:"p"},"clickhouse-local")," on a Mac, use ",(0,o.kt)("inlineCode",{parentName:"p"},"./clickhouse local"),"."))),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Add the remote system to your ClickHouse Cloud service IP Access List")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"In order for the ",(0,o.kt)("inlineCode",{parentName:"p"},"remoteSecure")," function to connect to your ClickHouse Cloud service, the IP address of the remote system needs to be allowed by the IP Access List.  Expand ",(0,o.kt)("strong",{parentName:"p"},"Manage your IP Access List")," below this tip for more information."))),(0,o.kt)(r.ZP,{mdxType:"AddARemoteSystem"}),(0,o.kt)("h2",{id:"example-1-migrating-from-mysql-to-clickhouse-cloud-with-an-integration-engine"},"Example 1: Migrating from MySQL to ClickHouse Cloud with an Integration engine"),(0,o.kt)("p",null,"We will use the ",(0,o.kt)("a",{parentName:"p",href:"/docs/en/engines/table-engines/integrations/mysql/"},"integration table engine")," (created on-the-fly by the ",(0,o.kt)("a",{parentName:"p",href:"/docs/en/sql-reference/table-functions/mysql/"},"mysql table function"),") for reading data from the source MySQL database and we will use the ",(0,o.kt)("a",{parentName:"p",href:"/docs/en/sql-reference/table-functions/remote/"},"remoteSecure table function"),"\nfor writing the data into a destination table on your ClickHouse cloud service."),(0,o.kt)("img",{src:a(19246).Z,class:"image",alt:"Migrating Self-managed ClickHouse",style:{width:"40%",padding:"30px"}}),(0,o.kt)("h3",{id:"on-the-destination-clickhouse-cloud-service"},"On the destination ClickHouse Cloud service:"),(0,o.kt)("h4",{id:"create-the-destination-database"},"Create the destination database:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE DATABASE db\n")),(0,o.kt)("h4",{id:"create-a-destination-table-that-has-a-schema-equivalent-to-the-mysql-table"},"Create a destination table that has a schema equivalent to the MySQL table:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE db.table ...\n")),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"The schema of the ClickHouse Cloud destination table and schema of the source MySQL table must be aligned (the column names and order must be the same, and the column data types must be compatible)."))),(0,o.kt)("h3",{id:"on-the-clickhouse-local-host-machine"},"On the clickhouse-local host machine:"),(0,o.kt)("h4",{id:"run-clickhouse-local-with-the-migration-query"},"Run clickhouse-local with the migration query:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"./clickhouse-local --query \"\nINSERT INTO FUNCTION\nremoteSecure('HOSTNAME.clickhouse.cloud:9440', 'db.table', 'default', 'PASS')\nSELECT * FROM mysql('host:port', 'database', 'table', 'user', 'password');\"\n")),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"No data is stored locally on the ",(0,o.kt)("inlineCode",{parentName:"p"},"clickhouse-local")," host machine. Instead, the data is read from the source MySQL table\nand then immediately written to the destination table on the ClickHouse Cloud service."))),(0,o.kt)("h2",{id:"example-2-migrating-from-mysql-to-clickhouse-cloud-with-the-jdbc-bridge"},"Example 2: Migrating from MySQL to ClickHouse Cloud with the JDBC bridge"),(0,o.kt)("p",null,"We will use the ",(0,o.kt)("a",{parentName:"p",href:"/docs/en/engines/table-engines/integrations/jdbc"},"JDBC integration table engine")," (created on-the-fly by the ",(0,o.kt)("a",{parentName:"p",href:"/docs/en/sql-reference/table-functions/jdbc"},"jdbc table function"),") together with the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/ClickHouse/clickhouse-jdbc-bridge"},"ClickHouse JDBC Bridge")," and the MySQL JDBC driver for reading data from the source MySQL database and we will use the ",(0,o.kt)("a",{parentName:"p",href:"/docs/en/sql-reference/table-functions/remote"},"remoteSecure table function"),"\nfor writing the data into a destination table on your ClickHouse cloud service."),(0,o.kt)("img",{src:a(93160).Z,class:"image",alt:"Migrating Self-managed ClickHouse",style:{width:"40%",padding:"30px"}}),(0,o.kt)("h3",{id:"on-the-destination-clickhouse-cloud-service-1"},"On the destination ClickHouse Cloud service:"),(0,o.kt)("h4",{id:"create-the-destination-database-1"},"Create the destination database:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE DATABASE db\n")),(0,o.kt)("h4",{id:"create-a-destination-table-that-has-a-schema-equivalent-to-the-mysql-table-1"},"Create a destination table that has a schema equivalent to the MySQL table:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE db.table ...\n")),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"The schema of the ClickHouse Cloud destination table and schema of the source MySQL table must be aligned,\ne.g. the column names and order must be the same, and the column data types must be compatible."))),(0,o.kt)("h3",{id:"on-the-clickhouse-local-host-machine-1"},"On the clickhouse-local host machine:"),(0,o.kt)("h4",{id:"install-configure-and-start-the-clickhouse-jdbc-bridge-locally"},"Install, configure, and start the ClickHouse JDBC Bridge locally:"),(0,o.kt)("p",null,"Follow the steps from the ",(0,o.kt)("a",{parentName:"p",href:"/docs/en/integrations/jdbc/jdbc-with-clickhouse#install-the-clickhouse-jdbc-bridge-locally"},"guide"),".\nThe guide also contains steps for configuring a data source from MySQL."),(0,o.kt)("h4",{id:"run-clickhouse-local-with-the-migration-query-1"},"Run clickhouse-local with the migration query:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"./clickhouse-local --query \"\nINSERT INTO FUNCTION\nremoteSecure('HOSTNAME.clickhouse.cloud:9440', 'db.table', 'default', 'PASS')\nSELECT * FROM jdbc('datasource', 'database', 'table');\"\n")),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"No data is stored locally on the ",(0,o.kt)("inlineCode",{parentName:"p"},"clickhouse-local")," host machine. Instead, the data is read from the MySQL source table\nand then immediately written to the destination table on the ClickHouse Cloud service."))))}g.isMDXComponent=!0},26449:function(e,t,a){t.Z=a.p+"assets/images/ch-local-01-bc59493cb59081d6184e00fd0abdf8f4.png"},41604:function(e,t,a){t.Z=a.p+"assets/images/ch-local-02-aaec4e640f5b61d8661f5f5134fd4178.png"},19246:function(e,t,a){t.Z=a.p+"assets/images/ch-local-03-54bfd36aa8807473cc62a34de3a333bd.png"},93160:function(e,t,a){t.Z=a.p+"assets/images/ch-local-04-f1883ec8d6f4b85f6eee9595180a3f02.png"},68554:function(e,t,a){t.Z=a.p+"assets/images/ip-allow-list-add-current-ip-308aa8c2edde4c6d29569c209968ddbc.png"},62406:function(e,t,a){t.Z=a.p+"assets/images/ip-allow-list-check-list-a3ec1682582a2648eaa2c1727170f893.png"}}]);