"use strict";(self.webpackChunkclickhouse=self.webpackChunkclickhouse||[]).push([[27113,80717],{3905:function(e,t,a){a.d(t,{Zo:function(){return u},kt:function(){return m}});var i=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,i,n=function(e,t){if(null==e)return{};var a,i,n={},r=Object.keys(e);for(i=0;i<r.length;i++)a=r[i],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)a=r[i],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=i.createContext({}),c=function(e){var t=i.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},u=function(e){var t=c(e.components);return i.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},p=i.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(a),m=n,h=p["".concat(s,".").concat(m)]||p[m]||d[m]||r;return a?i.createElement(h,o(o({ref:t},u),{},{components:a})):i.createElement(h,o({ref:t},u))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,o=new Array(r);o[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:n,o[1]=l;for(var c=2;c<r;c++)o[c]=a[c];return i.createElement.apply(null,o)}return i.createElement.apply(null,a)}p.displayName="MDXCreateElement"},23546:function(e,t,a){a.r(t),a.d(t,{assets:function(){return d},contentTitle:function(){return c},default:function(){return h},frontMatter:function(){return s},metadata:function(){return u},toc:function(){return p}});var i=a(87462),n=a(63366),r=(a(67294),a(3905)),o=a(55938),l=["components"],s={sidebar_position:1,slug:"en/faq/billing",title:"Billing"},c=void 0,u={unversionedId:"en/faq/billing",id:"en/faq/billing",title:"Billing",description:"",source:"@site/docs/en/faq/billing.md",sourceDirName:"en/faq",slug:"/en/faq/en/faq/billing",permalink:"/docs/en/faq/en/faq/billing",draft:!1,editUrl:"https://github.com/ClickHouse/clickhouse-docs/blob/main/docs/en/faq/billing.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,slug:"en/faq/billing",title:"Billing"},sidebar:"english",previous:{title:"FAQ",permalink:"/docs/en/faq"},next:{title:"Troubleshooting",permalink:"/docs/en/faq/en/faq/troubleshooting"}},d={},p=[],m={toc:p};function h(e){var t=e.components,a=(0,n.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)(o.default,{mdxType:"Content"}))}h.isMDXComponent=!0},55938:function(e,t,a){a.r(t),a.d(t,{assets:function(){return u},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return l},metadata:function(){return c},toc:function(){return d}});var i=a(87462),n=a(63366),r=(a(67294),a(3905)),o=["components"],l={sidebar_label:"Billing",slug:"/en/manage/billing",title:"Billing"},s=void 0,c={unversionedId:"en/manage/billing",id:"en/manage/billing",title:"Billing",description:"Pricing",source:"@site/docs/en/manage/billing.md",sourceDirName:"en/manage",slug:"/en/manage/billing",permalink:"/docs/en/manage/billing",draft:!1,editUrl:"https://github.com/ClickHouse/clickhouse-docs/blob/main/docs/en/manage/billing.md",tags:[],version:"current",frontMatter:{sidebar_label:"Billing",slug:"/en/manage/billing",title:"Billing"},sidebar:"english",previous:{title:"Manage",permalink:"/docs/en/manage"},next:{title:"Automatic Scaling",permalink:"/docs/en/manage/scaling"}},u={},d=[{value:"Pricing",id:"pricing",level:2},{value:"Sample scenarios and associated cost",id:"sample-scenarios-and-associated-cost",level:2},{value:"Dev/Test scenario ~ $427 per month",id:"devtest-scenario--427-per-month",level:3},{value:"Pricing breakdown for this example:",id:"pricing-breakdown-for-this-example",level:4},{value:"Steady workload scenario ~$3,372 per month",id:"steady-workload-scenario-3372-per-month",level:3},{value:"Pricing breakdown for this example:",id:"pricing-breakdown-for-this-example-1",level:4},{value:"Heavy usage scenario for ad-hoc analytics ~$2,455 per month",id:"heavy-usage-scenario-for-ad-hoc-analytics-2455-per-month",level:3},{value:"Pricing breakdown for this example:",id:"pricing-breakdown-for-this-example-2",level:4},{value:"FAQs",id:"faqs",level:2},{value:"What is a &quot;write unit&quot; and how do I estimate it?",id:"what-is-a-write-unit-and-how-do-i-estimate-it",level:3},{value:"Example 1: INSERTs in batches of 16MB",id:"example-1-inserts-in-batches-of-16mb",level:4},{value:"Example 2: INSERTs in batches of 100MB",id:"example-2-inserts-in-batches-of-100mb",level:4},{value:"Example 3: Time based batches",id:"example-3-time-based-batches",level:4},{value:"What are the best practices to reduce costs, including &quot;write units&quot;?\u200b",id:"what-are-the-best-practices-to-reduce-costs-including-write-units",level:3},{value:"How is storage on disk calculated?",id:"how-is-storage-on-disk-calculated",level:3},{value:"How do I estimate compression?",id:"how-do-i-estimate-compression",level:3},{value:"What tools does ClickHouse offer to estimate the cost for running a service in the cloud if I have a self-managed deployment?",id:"what-tools-does-clickhouse-offer-to-estimate-the-cost-for-running-a-service-in-the-cloud-if-i-have-a-self-managed-deployment",level:3},{value:"Do backups count towards total storage?",id:"do-backups-count-towards-total-storage",level:3},{value:"What billing options are available for ClickHouse Cloud?",id:"what-billing-options-are-available-for-clickhouse-cloud",level:3},{value:"How long is the billing cycle?",id:"how-long-is-the-billing-cycle",level:3},{value:"What controls does ClickHouse Cloud offer to manage costs?",id:"what-controls-does-clickhouse-cloud-offer-to-manage-costs",level:3},{value:"If I have multiple services, do I get an invoice per service or a consolidated invoice?",id:"if-i-have-multiple-services-do-i-get-an-invoice-per-service-or-a-consolidated-invoice",level:3},{value:"If I add my credit card and upgrade before my trial period and credits expire, will I be charged?",id:"if-i-add-my-credit-card-and-upgrade-before-my-trial-period-and-credits-expire-will-i-be-charged",level:3},{value:"How can I keep track of my spending?",id:"how-can-i-keep-track-of-my-spending",level:2}],p={toc:d};function m(e){var t=e.components,l=(0,n.Z)(e,o);return(0,r.kt)("wrapper",(0,i.Z)({},p,l,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"pricing"},"Pricing"),(0,r.kt)("p",null,"For pricing information see the ",(0,r.kt)("a",{parentName:"p",href:"https://clickhouse.com/pricing"},"ClickHouse Cloud Pricing")," page.  To understand what can affect your bill, and ways that you\ncan manage your spend, keep reading."),(0,r.kt)("h2",{id:"sample-scenarios-and-associated-cost"},"Sample scenarios and associated cost"),(0,r.kt)("h3",{id:"devtest-scenario--427-per-month"},"Dev/Test scenario ~ $427 per month"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Active workload ~50% time"),(0,r.kt)("li",{parentName:"ul"},"24 GB RAM"),(0,r.kt)("li",{parentName:"ul"},"6 CPU"),(0,r.kt)("li",{parentName:"ul"},"256 GB Data"),(0,r.kt)("li",{parentName:"ul"},"7,000 write units, 9,000 read units"),(0,r.kt)("li",{parentName:"ul"},"600 GB write, 6 TB read ")),(0,r.kt)("h4",{id:"pricing-breakdown-for-this-example"},"Pricing breakdown for this example:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Component"),(0,r.kt)("th",{parentName:"tr",align:"right"},"USD Estimate"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Compute units"),(0,r.kt)("td",{parentName:"tr",align:"right"},"$315")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Storage"),(0,r.kt)("td",{parentName:"tr",align:"right"},"$15")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Read units (~9000 units)"),(0,r.kt)("td",{parentName:"tr",align:"right"},"$9")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Write units (~7000 units)"),(0,r.kt)("td",{parentName:"tr",align:"right"},"$88")))),(0,r.kt)("h3",{id:"steady-workload-scenario-3372-per-month"},"Steady workload scenario ~$3,372 per month"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Active workload ~100% time"),(0,r.kt)("li",{parentName:"ul"},"96 GB RAM"),(0,r.kt)("li",{parentName:"ul"},"24 CPU"),(0,r.kt)("li",{parentName:"ul"},"5 TB Data"),(0,r.kt)("li",{parentName:"ul"},"43,000 write units, 25,000 read units"),(0,r.kt)("li",{parentName:"ul"},"6 TB write, 128 TB read")),(0,r.kt)("h4",{id:"pricing-breakdown-for-this-example-1"},"Pricing breakdown for this example:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Component"),(0,r.kt)("th",{parentName:"tr",align:"right"},"USD Estimate"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Compute units"),(0,r.kt)("td",{parentName:"tr",align:"right"},"$2521")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Storage"),(0,r.kt)("td",{parentName:"tr",align:"right"},"$288")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Read units (~25000 units)"),(0,r.kt)("td",{parentName:"tr",align:"right"},"$25")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Write units (~43000 units)"),(0,r.kt)("td",{parentName:"tr",align:"right"},"$538")))),(0,r.kt)("h3",{id:"heavy-usage-scenario-for-ad-hoc-analytics-2455-per-month"},"Heavy usage scenario for ad-hoc analytics ~$2,455 per month"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Active workload ~25% time"),(0,r.kt)("li",{parentName:"ul"},"192 GB RAM"),(0,r.kt)("li",{parentName:"ul"},"48 CPU"),(0,r.kt)("li",{parentName:"ul"},"4 TB Data"),(0,r.kt)("li",{parentName:"ul"},"70,000 write units, 90,000 read units"),(0,r.kt)("li",{parentName:"ul"},"6 TB write, 60 TB read ")),(0,r.kt)("h4",{id:"pricing-breakdown-for-this-example-2"},"Pricing breakdown for this example:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Component"),(0,r.kt)("th",{parentName:"tr",align:"right"},"USD Estimate"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Compute units"),(0,r.kt)("td",{parentName:"tr",align:"right"},"$1260")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Storage"),(0,r.kt)("td",{parentName:"tr",align:"right"},"$230")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Read units (~70000 units)"),(0,r.kt)("td",{parentName:"tr",align:"right"},"$90")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Write units (~90000 units)"),(0,r.kt)("td",{parentName:"tr",align:"right"},"$875")))),(0,r.kt)("p",null,"For help with further estimation, please contact ",(0,r.kt)("a",{parentName:"p",href:"https://clickhouse.cloud/support"},"support")," if you are already a ClickHouse cloud user, or ",(0,r.kt)("a",{parentName:"p",href:"mailto:sales@clickhouse.com"},"sales@clickhouse.com")," otherwise."),(0,r.kt)("h2",{id:"faqs"},"FAQs"),(0,r.kt)("h3",{id:"what-is-a-write-unit-and-how-do-i-estimate-it"},'What is a "write unit" and how do I estimate it?'),(0,r.kt)("p",null,'A single INSERT with less than 16MB of data generates ~0.01 "write unit", so a single "write unit" typically corresponds to ~100 INSERTs.'),(0,r.kt)("h4",{id:"example-1-inserts-in-batches-of-16mb"},"Example 1: INSERTs in batches of 16MB"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"You are doing INSERTs in batches of 100,000 rows"),(0,r.kt)("li",{parentName:"ul"},"Each row is 50 columns and 160 bytes, so the total data size per INSERT is 16MB"),(0,r.kt)("li",{parentName:"ul"},'It will take 1 "write unit" to run 100 INSERTs, which will insert 10,000,000 rows and 1.6G of data')),(0,r.kt)("h4",{id:"example-2-inserts-in-batches-of-100mb"},"Example 2: INSERTs in batches of 100MB"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},'Because the insert size is > 16MB, it will take fractionally more "write units" to run 100 INSERTs (~1.38 "write units" in our testing on a 100 column dataset)')),(0,r.kt)("p",null,"Note that INSERT queries with one record per insert, or other small batches, could benefit from the use of the ",(0,r.kt)("a",{parentName:"p",href:"/docs/en/manage/tuning-for-cloud-cost-efficiency/#use-asynchronous-inserts"},(0,r.kt)("inlineCode",{parentName:"a"},"async_insert"))," setting in ClickHouse, as this causes ClickHouse to batch these writes internally, which could reduce costs. "),(0,r.kt)("h4",{id:"example-3-time-based-batches"},"Example 3: Time based batches"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"You insert a total of 1.5TB per month. "),(0,r.kt)("li",{parentName:"ul"},"If you write once per 1s, which results in 2,635,200 INSERTs per month, it will cost $428.22 per month."),(0,r.kt)("li",{parentName:"ul"},"If you write once per 5s, which results in 527,040 INSERTs per month, it will cost $85.64 per month."),(0,r.kt)("li",{parentName:"ul"},"If you write once per 1m, which results in 43,920 INSERTs per month, it will cost $13.73 per month.  "),(0,r.kt)("li",{parentName:"ul"},"If you write once per 5m, which results in 8,784 INSERTs per month, it will cost $8.67 per month.")),(0,r.kt)("p",null,"Please read this article to see our best practices on how to ",(0,r.kt)("a",{parentName:"p",href:"/docs/en/manage/tuning-for-cloud-cost-efficiency"},"optimize your costs in ClickHouse Cloud")),(0,r.kt)("h3",{id:"what-are-the-best-practices-to-reduce-costs-including-write-units"},'What are the best practices to reduce costs, including "write units"?\u200b'),(0,r.kt)("p",null,"There are several ",(0,r.kt)("a",{parentName:"p",href:"/docs/en/manage/tuning-for-cloud-cost-efficiency"},"areas of optimization"),", some of them include"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Batching inserts  in place of frequent small-size inserts"),(0,r.kt)("li",{parentName:"ul"},"Having fewer columns in tables "),(0,r.kt)("li",{parentName:"ul"},"Choosing a ",(0,r.kt)("a",{parentName:"li",href:"/docs/en/engines/table-engines/mergetree-family/custom-partitioning-key"},"partition key")," so that inserts go into fewer number of partitions"),(0,r.kt)("li",{parentName:"ul"},"Avoiding write-heavy operations in ClickHouse, such as mutations, OPTIMIZE FINAL, and Nullable columns")),(0,r.kt)("h3",{id:"how-is-storage-on-disk-calculated"},"How is storage on disk calculated?"),(0,r.kt)("p",null,"ClickHouse Cloud uses cloud object storage and is metered on the compressed size of data stored in ClickHouse tables."),(0,r.kt)("h3",{id:"how-do-i-estimate-compression"},"How do I estimate compression?"),(0,r.kt)("p",null,"Compression can vary quite a bit by dataset. It is dependent on how compressible the data is in the first place (number of high vs. low cardinality fields), and how the user sets up the schema (using optional codecs or not, for instance). It can be on the order of 10x for common types of analytical data, but it can be significantly lower or higher as well. See the ",(0,r.kt)("a",{parentName:"p",href:"/docs/en/optimize/"},"optimizing")," documentation for guidance, and this ",(0,r.kt)("a",{parentName:"p",href:"https://www.uber.com/blog/logging/"},"Uber blog")," for a detailed logging use case example.\nThe only practical way to know exactly is to ingest your dataset into ClickHouse and compare the size of the dataset with the size stored in ClickHouse."),(0,r.kt)("p",null,"You can use the query ",(0,r.kt)("inlineCode",{parentName:"p"},"SELECT formatReadableSize(total_bytes) FROM system.tables WHERE name = <your table name>"),". "),(0,r.kt)("h3",{id:"what-tools-does-clickhouse-offer-to-estimate-the-cost-for-running-a-service-in-the-cloud-if-i-have-a-self-managed-deployment"},"What tools does ClickHouse offer to estimate the cost for running a service in the cloud if I have a self-managed deployment?"),(0,r.kt)("p",null,"The ClickHouse query log captures ",(0,r.kt)("a",{parentName:"p",href:"/docs/en/operations/system-tables/query_log"},"key metrics")," that can be used to estimate the cost of running a workload in ClickHouse Cloud.  For details on migrating from self managed to ClickHouse Cloud please refer to the ",(0,r.kt)("a",{parentName:"p",href:"/docs/en/integrations/migration/clickhouse-to-cloud"},"migration documentation"),", and contact ",(0,r.kt)("a",{parentName:"p",href:"https://clickhouse.cloud/support"},"ClickHouse Cloud support")," if you have further questions."),(0,r.kt)("h3",{id:"do-backups-count-towards-total-storage"},"Do backups count towards total storage?"),(0,r.kt)("p",null,"ClickHouse Cloud offers two free backups at no additional cost. Backups do not count towards storage. "),(0,r.kt)("h3",{id:"what-billing-options-are-available-for-clickhouse-cloud"},"What billing options are available for ClickHouse Cloud?"),(0,r.kt)("p",null,"ClickHouse Cloud supports the following billing options:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Self-service monthly (in USD, via credit card)"),(0,r.kt)("li",{parentName:"ul"},'Direct-sales annual / multi-year (through pre-paid "ClickHouse Credits", in USD, with additional payment options)')),(0,r.kt)("h3",{id:"how-long-is-the-billing-cycle"},"How long is the billing cycle?"),(0,r.kt)("p",null,"Billing follows a ~30 day billing cycle and the start date is tracked as the date when the ClickHouse Cloud organization was created."),(0,r.kt)("h3",{id:"what-controls-does-clickhouse-cloud-offer-to-manage-costs"},"What controls does ClickHouse Cloud offer to manage costs?"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Trial and Annual Commit customers will be notified with automated emails when the consumption hits certain thresholds - 50%, 75%, and 90%, so that users can take action.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"ClickHouse Cloud allows users to set a maximum auto-scaling limit on their compute via ",(0,r.kt)("a",{parentName:"p",href:"/docs/en/manage/scaling"},"Advanced scaling control"),", a significant cost factor for analytical workloads.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The ",(0,r.kt)("a",{parentName:"p",href:"/docs/en/manage/scaling"},"Advanced scaling control")," lets you set memory limits with an option to control the behavior of pausing/idling during inactivity. "))),(0,r.kt)("h3",{id:"if-i-have-multiple-services-do-i-get-an-invoice-per-service-or-a-consolidated-invoice"},"If I have multiple services, do I get an invoice per service or a consolidated invoice?"),(0,r.kt)("p",null,"A consolidated invoice is generated for all services in a given organization for a billing period."),(0,r.kt)("h3",{id:"if-i-add-my-credit-card-and-upgrade-before-my-trial-period-and-credits-expire-will-i-be-charged"},"If I add my credit card and upgrade before my trial period and credits expire, will I be charged?"),(0,r.kt)("p",null,"When a user converts from trial to paid before the 14-day trial period ends, but with credits remaining from the trial credit allowance, we continue to draw down from the trial credits during the initial 14-day trial period, and then charge the credit card."),(0,r.kt)("h2",{id:"how-can-i-keep-track-of-my-spending"},"How can I keep track of my spending?"),(0,r.kt)("p",null,"ClickHouse Cloud console includes a Usage display that gives detailed information about usage per service on compute and storage. This can be used to understand the cost breakdown by metered units."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Cost breakdown example",src:a(65329).Z,width:"1999",height:"749"})))}m.isMDXComponent=!0},65329:function(e,t,a){t.Z=a.p+"assets/images/billing-cost-breakdown-60c41454686f096b12f2c0e00a58a1c2.png"}}]);