"use strict";(self.webpackChunknew_nav_docusaurus_2_2=self.webpackChunknew_nav_docusaurus_2_2||[]).push([[20384],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=c(n),m=a,h=d["".concat(l,".").concat(m)]||d[m]||p[m]||i;return n?r.createElement(h,o(o({ref:t},u),{},{components:n})):r.createElement(h,o({ref:t},u))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:a,o[1]=s;for(var c=2;c<i;c++)o[c]=n[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},82384:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var r=n(87462),a=(n(67294),n(3905));const i={},o="Are Materialized Views inserted synchronously?",s={permalink:"/docs/knowledgebase/are_materialized_views_inserted_asynchronously",source:"@site/knowledgebase/are_materialized_views_inserted_asynchronously.md",title:"Are Materialized Views inserted synchronously?",description:"Question: When a source table has new rows inserted into it, those new rows are also sent to all of the materialized views of that source table. Are inserts into Materialized Views performed synchronously, meaning that once the insert is acknowledged successfully from the server to the client, it means that all Materialized Views have been fully updated and available for queries?",date:"2023-03-17T17:39:50.000Z",formattedDate:"March 17, 2023",tags:[],readingTime:1.115,hasTruncateMarker:!1,authors:[],frontMatter:{},nextItem:{title:"Synchronous data reading",permalink:"/docs/knowledgebase/async_vs_optimize_read_in_order"}},l={authorsImageUrls:[]},c=[],u={toc:c},d="wrapper";function p(e){let{components:t,...n}=e;return(0,a.kt)(d,(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Question:")," When a source table has new rows inserted into it, those new rows are also sent to all of the materialized views of that source table. Are inserts into Materialized Views performed synchronously, meaning that once the insert is acknowledged successfully from the server to the client, it means that all Materialized Views have been fully updated and available for queries?"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Answer:")),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"When an ",(0,a.kt)("inlineCode",{parentName:"li"},"INSERT")," succeeds, the data is inserted both to the table and all materialized views."),(0,a.kt)("li",{parentName:"ol"},"The insert is not atomic with respect to materialized views. At the moment of time when the ",(0,a.kt)("inlineCode",{parentName:"li"},"INSERT")," is in progress, concurrent clients may see the intermediate state, when the data is inserted to the main table, but not to materialized views, or vice versa."),(0,a.kt)("li",{parentName:"ol"},"If you are using ",(0,a.kt)("a",{parentName:"li",href:"https://clickhouse.com/docs/en/optimize/asynchronous-inserts/"},"async inserts"),", they collect the data and perform a regular insert under the hood, returning the same type of answer to the client as for regular inserts. If the client received success from an async insert with the option ",(0,a.kt)("inlineCode",{parentName:"li"},"wait_for_async_insert")," (as by default), the data is inserted into both the table and all of its materialized views.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Question:")," How about chained/cascaded materialized views?"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Answer:"),"\nThe same rules apply - an ",(0,a.kt)("inlineCode",{parentName:"p"},"INSERT")," with a successful response means that the data was inserted into every materialized view in the chain. The insert is non-atomic."))}p.isMDXComponent=!0}}]);