"use strict";(self.webpackChunknew_nav_docusaurus_2_2=self.webpackChunknew_nav_docusaurus_2_2||[]).push([[95190],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>d});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var o=r.createContext({}),s=function(e){var t=r.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},u=function(e){var t=s(e.components);return r.createElement(o.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,o=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=s(n),f=a,d=p["".concat(o,".").concat(f)]||p[f]||m[f]||i;return n?r.createElement(d,c(c({ref:t},u),{},{components:n})):r.createElement(d,c({ref:t},u))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,c=new Array(i);c[0]=f;var l={};for(var o in t)hasOwnProperty.call(t,o)&&(l[o]=t[o]);l.originalType=e,l[p]="string"==typeof e?e:a,c[1]=l;for(var s=2;s<i;s++)c[s]=n[s];return r.createElement.apply(null,c)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"},63995:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>c,default:()=>m,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var r=n(87462),a=(n(67294),n(3905));const i={slug:"/en/sql-reference/table-functions/iceberg",sidebar_label:"Iceberg"},c="iceberg Table Function",l={unversionedId:"en/sql-reference/table-functions/iceberg",id:"en/sql-reference/table-functions/iceberg",title:"iceberg Table Function",description:"Provides a read-only table-like interface to Apache Iceberg tables in Amazon S3.",source:"@site/docs/en/sql-reference/table-functions/iceberg.md",sourceDirName:"en/sql-reference/table-functions",slug:"/en/sql-reference/table-functions/iceberg",permalink:"/docs/en/sql-reference/table-functions/iceberg",draft:!1,editUrl:"https://github.com/ClickHouse/ClickHouse/tree/master/docs/en/sql-reference/table-functions/iceberg.md",tags:[],version:"current",frontMatter:{slug:"/en/sql-reference/table-functions/iceberg",sidebar_label:"Iceberg"},sidebar:"sqlreference",previous:{title:"Hudi",permalink:"/docs/en/sql-reference/table-functions/hudi"},next:{title:"Window Functions",permalink:"/docs/en/sql-reference/window-functions/"}},o={},s=[{value:"Syntax",id:"syntax",level:2},{value:"Arguments",id:"arguments",level:2},{value:"Defining a named collection",id:"defining-a-named-collection",level:2}],u={toc:s},p="wrapper";function m(e){let{components:t,...n}=e;return(0,a.kt)(p,(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"iceberg-table-function"},"iceberg Table Function"),(0,a.kt)("p",null,"Provides a read-only table-like interface to Apache ",(0,a.kt)("a",{parentName:"p",href:"https://iceberg.apache.org/"},"Iceberg")," tables in Amazon S3."),(0,a.kt)("h2",{id:"syntax"},"Syntax"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"iceberg(url [,aws_access_key_id, aws_secret_access_key] [,format] [,structure])\n")),(0,a.kt)("h2",{id:"arguments"},"Arguments"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"url")," \u2014 Bucket url with the path to an existing Iceberg table in S3."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"aws_access_key_id"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"aws_secret_access_key")," - Long-term credentials for the ",(0,a.kt)("a",{parentName:"li",href:"https://aws.amazon.com/"},"AWS")," account user.  You can use these to authenticate your requests. These parameters are optional. If credentials are not specified, they are used from the ClickHouse configuration. For more information see ",(0,a.kt)("a",{parentName:"li",href:"/docs/en/engines/table-engines/mergetree-family/mergetree/#table_engine-mergetree-s3"},"Using S3 for Data Storage"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"format")," \u2014 The ",(0,a.kt)("a",{parentName:"li",href:"/docs/en/interfaces/formats/#formats"},"format")," of the file. By default ",(0,a.kt)("inlineCode",{parentName:"li"},"Parquet")," is used."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"structure")," \u2014 Structure of the table. Format ",(0,a.kt)("inlineCode",{parentName:"li"},"'column1_name column1_type, column2_name column2_type, ...'"),".")),(0,a.kt)("p",null,"Engine parameters can be specified using ",(0,a.kt)("a",{parentName:"p",href:"/docs/en/operations/named-collections"},"Named Collections")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Returned value")),(0,a.kt)("p",null,"A table with the specified structure for reading data in the specified Iceberg table in S3."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Example")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * FROM iceberg('http://test.s3.amazonaws.com/clickhouse-bucket/test_table', 'test', 'test')\n")),(0,a.kt)("admonition",{type:"important"},(0,a.kt)("p",{parentName:"admonition"},"ClickHouse currently supports reading v1 (v2 support is coming soon!) of the Iceberg format via the ",(0,a.kt)("inlineCode",{parentName:"p"},"iceberg")," table function and ",(0,a.kt)("inlineCode",{parentName:"p"},"Iceberg")," table engine.")),(0,a.kt)("h2",{id:"defining-a-named-collection"},"Defining a named collection"),(0,a.kt)("p",null,"Here is an example of configuring a named collection for storing the URL and credentials:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},"<clickhouse>\n    <named_collections>\n        <iceberg_conf>\n            <url>http://test.s3.amazonaws.com/clickhouse-bucket/</url>\n            <access_key_id>test<access_key_id>\n            <secret_access_key>test</secret_access_key>\n            <format>auto</format>\n            <structure>auto</structure>\n        </iceberg_conf>\n    </named_collections>\n</clickhouse>\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * FROM iceberg(iceberg_conf, filename = 'test_table')\nDESCRIBE iceberg(iceberg_conf, filename = 'test_table')\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"See Also")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/docs/en/engines/table-engines/integrations/iceberg"},"Iceberg engine"))))}m.isMDXComponent=!0}}]);