"use strict";(self.webpackChunknew_nav_docusaurus_2_2=self.webpackChunknew_nav_docusaurus_2_2||[]).push([[99859],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>m});var r=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function a(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var c=r.createContext({}),l=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},u=function(e){var n=l(e.components);return r.createElement(c.Provider,{value:n},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},g=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,i=e.originalType,c=e.parentName,u=a(e,["components","mdxType","originalType","parentName"]),p=l(t),g=o,m=p["".concat(c,".").concat(g)]||p[g]||d[g]||i;return t?r.createElement(m,s(s({ref:n},u),{},{components:t})):r.createElement(m,s({ref:n},u))}));function m(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var i=t.length,s=new Array(i);s[0]=g;var a={};for(var c in n)hasOwnProperty.call(n,c)&&(a[c]=n[c]);a.originalType=e,a[p]="string"==typeof e?e:o,s[1]=a;for(var l=2;l<i;l++)s[l]=t[l];return r.createElement.apply(null,s)}return r.createElement.apply(null,t)}g.displayName="MDXCreateElement"},66696:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>d,frontMatter:()=>i,metadata:()=>a,toc:()=>l});var r=t(87462),o=(t(67294),t(3905));const i={slug:"/en/manage/security/cloud-endpoints-api",sidebar_label:"Cloud Endpoints API",title:"Cloud Endpoints API"},s=void 0,a={unversionedId:"en/cloud/security/cloud-endpoints-api",id:"en/cloud/security/cloud-endpoints-api",title:"Cloud Endpoints API",description:"ClickHouse Cloud Endpoints API",source:"@site/docs/en/cloud/security/cloud-endpoints-api.md",sourceDirName:"en/cloud/security",slug:"/en/manage/security/cloud-endpoints-api",permalink:"/docs/en/manage/security/cloud-endpoints-api",draft:!1,editUrl:"https://github.com/ClickHouse/clickhouse-docs/blob/main/docs/en/cloud/security/cloud-endpoints-api.md",tags:[],version:"current",frontMatter:{slug:"/en/manage/security/cloud-endpoints-api",sidebar_label:"Cloud Endpoints API",title:"Cloud Endpoints API"},sidebar:"cloud",previous:{title:"IP Access List",permalink:"/docs/en/manage/security/ip-access-list"},next:{title:"Setting up AWS PrivateLink",permalink:"/docs/en/manage/security/aws-privatelink"}},c={},l=[{value:"ClickHouse Cloud Endpoints API",id:"clickhouse-cloud-endpoints-api",level:2},{value:"Integrations could require egress access",id:"integrations-could-require-egress-access",level:2}],u={toc:l},p="wrapper";function d(e){let{components:n,...i}=e;return(0,o.kt)(p,(0,r.Z)({},u,i,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"clickhouse-cloud-endpoints-api"},"ClickHouse Cloud Endpoints API"),(0,o.kt)("p",null,"The ClickHouse Cloud Endpoints API endpoint is available on ",(0,o.kt)("a",{parentName:"p",href:"https://api.clickhouse.cloud/static-ips.json"},(0,o.kt)("inlineCode",{parentName:"a"},"https://api.clickhouse.cloud/static-ips.json")),"."),(0,o.kt)("p",null,"This API provides the endpoints for ClickHouse Cloud services, such as ingress/egress IPs and AWS S3 endpoints per region and cloud."),(0,o.kt)("h2",{id:"integrations-could-require-egress-access"},"Integrations could require egress access"),(0,o.kt)("p",null,"If you are using integration like the MySQL or PostgreSQL Engine, it is possible that you need to authorize ClickHouse Cloud to access your instances."),(0,o.kt)("p",null,"You could use this API to retrieve the public IPs and configure them in ",(0,o.kt)("inlineCode",{parentName:"p"},"firewalls")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"Authorized networks")," in GCP or in ",(0,o.kt)("inlineCode",{parentName:"p"},"Security Groups")," for Azure, AWS or in any other infrastructure egress management system you are using."),(0,o.kt)("p",null,"For example, to allow access from a ClickHouse Service hosted on AWS in the region ap-south-1, you can add the ",(0,o.kt)("inlineCode",{parentName:"p"},"egress_ips")," addresses for that region:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'\u276f curl -s https://api.clickhouse.cloud/static-ips.json | jq \'.\'\n{\n  "aws": [\n    {\n      "cell": "cell0",\n      "egress_ips": [\n        "3.110.39.68",\n        "15.206.7.77",\n        "3.6.83.17"\n      ],\n      "ingress_ips": [\n        "15.206.78.111",\n        "3.6.185.108",\n        "43.204.6.248"\n      ],\n      "region": "ap-south-1",\n      "s3_endpoint": "vpce-0a975c9130d07276d"\n    },\n...\n')),(0,o.kt)("p",null,"For example a ClickHouse cloud service running in ",(0,o.kt)("inlineCode",{parentName:"p"},"us-east-2")," using the integration to connect to an RDS in AWS, should have the following Inbound security group rules:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"AWS Security group rules",src:t(49147).Z,width:"2316",height:"568"})),(0,o.kt)("p",null,"For the same ClickHouse cloud service running in ",(0,o.kt)("inlineCode",{parentName:"p"},"us-east-2"),", but this time connected to an MySQL in GCP, the ",(0,o.kt)("inlineCode",{parentName:"p"},"Authorized networks")," should look like this:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"GCP Authorized networks",src:t(86909).Z,width:"1172",height:"1382"})))}d.isMDXComponent=!0},49147:(e,n,t)=>{t.d(n,{Z:()=>r});const r=t.p+"assets/images/aws-rds-mysql-480320c5280561362b1e7ff15cc2117f.png"},86909:(e,n,t)=>{t.d(n,{Z:()=>r});const r=t.p+"assets/images/gcp-authorized-network-32e675cf68be1f8c63e3326d060db353.png"}}]);