"use strict";(self.webpackChunkclickhouse=self.webpackChunkclickhouse||[]).push([[69327],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return d}});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var i=r.createContext({}),s=function(e){var t=r.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},p=function(e){var t=s(e.components);return r.createElement(i.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,i=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),m=s(n),d=a,f=m["".concat(i,".").concat(d)]||m[d]||u[d]||l;return n?r.createElement(f,c(c({ref:t},p),{},{components:n})):r.createElement(f,c({ref:t},p))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,c=new Array(l);c[0]=m;var o={};for(var i in t)hasOwnProperty.call(t,i)&&(o[i]=t[i]);o.originalType=e,o.mdxType="string"==typeof e?e:a,c[1]=o;for(var s=2;s<l;s++)c[s]=n[s];return r.createElement.apply(null,c)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},44388:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return i},default:function(){return d},frontMatter:function(){return o},metadata:function(){return s},toc:function(){return u}});var r=n(87462),a=n(63366),l=(n(67294),n(3905)),c=["components"],o={sidebar_position:43,sidebar_label:"DETACH"},i="DETACH Statement",s={unversionedId:"en/reference/sql-reference/statements/detach",id:"en/reference/sql-reference/statements/detach",title:"DETACH Statement",description:"detach}",source:"@site/docs/en/reference/sql-reference/statements/detach.md",sourceDirName:"en/reference/sql-reference/statements",slug:"/en/reference/sql-reference/statements/detach",permalink:"/en/reference/sql-reference/statements/detach",editUrl:"https://github.com/ClickHouse/ClickHouse/tree/master/docs/en/reference/sql-reference/statements/detach.md",tags:[],version:"current",sidebarPosition:43,frontMatter:{sidebar_position:43,sidebar_label:"DETACH"},sidebar:"english",previous:{title:"DESCRIBE",permalink:"/en/reference/sql-reference/statements/describe-table"},next:{title:"DROP",permalink:"/en/reference/sql-reference/statements/drop"}},p={},u=[],m={toc:u};function d(e){var t=e.components,n=(0,a.Z)(e,c);return(0,l.kt)("wrapper",(0,r.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"detach"},"DETACH Statement"),(0,l.kt)("p",null,'Makes the server "forget" about the existence of a table, a materialized view, or a dictionary.'),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Syntax")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"DETACH TABLE|VIEW|DICTIONARY [IF EXISTS] [db.]name [ON CLUSTER cluster] [PERMANENTLY]\n")),(0,l.kt)("p",null,"Detaching does not delete the data or metadata of a table, a materialized view or a dictionary. If an entity was not detached ",(0,l.kt)("inlineCode",{parentName:"p"},"PERMANENTLY"),", on the next server launch the server will read the metadata and recall the table/view/dictionary again. If an entity was detached ",(0,l.kt)("inlineCode",{parentName:"p"},"PERMANENTLY"),", there will be no automatic recall."),(0,l.kt)("p",null,"Whether a table or a dictionary was detached permanently or not, in both cases you can reattach them using the ",(0,l.kt)("a",{parentName:"p",href:"/en/reference/sql-reference/statements/attach"},"ATTACH")," query.\nSystem log tables can be also attached back (e.g. ",(0,l.kt)("inlineCode",{parentName:"p"},"query_log"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"text_log"),", etc). Other system tables can't be reattached. On the next server launch the server will recall those tables again."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"ATTACH MATERIALIZED VIEW")," does not work with short syntax (without ",(0,l.kt)("inlineCode",{parentName:"p"},"SELECT"),"), but you can attach it using the ",(0,l.kt)("inlineCode",{parentName:"p"},"ATTACH TABLE")," query."),(0,l.kt)("p",null,"Note that you can not detach permanently the table which is already detached (temporary). But you can attach it back and then detach permanently again."),(0,l.kt)("p",null,"Also you can not ",(0,l.kt)("a",{parentName:"p",href:"/en/reference/sql-reference/statements/drop#drop-table"},"DROP")," the detached table, or ",(0,l.kt)("a",{parentName:"p",href:"/en/reference/sql-reference/statements/create/table"},"CREATE TABLE")," with the same name as detached permanently, or replace it with the other table with ",(0,l.kt)("a",{parentName:"p",href:"/en/reference/sql-reference/statements/rename"},"RENAME TABLE")," query."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Example")),(0,l.kt)("p",null,"Creating a table:"),(0,l.kt)("p",null,"Query:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE test ENGINE = Log AS SELECT * FROM numbers(10);\nSELECT * FROM test;\n")),(0,l.kt)("p",null,"Result:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"\u250c\u2500number\u2500\u2510\n\u2502      0 \u2502\n\u2502      1 \u2502\n\u2502      2 \u2502\n\u2502      3 \u2502\n\u2502      4 \u2502\n\u2502      5 \u2502\n\u2502      6 \u2502\n\u2502      7 \u2502\n\u2502      8 \u2502\n\u2502      9 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,l.kt)("p",null,"Detaching the table:"),(0,l.kt)("p",null,"Query:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"DETACH TABLE test;\nSELECT * FROM test;\n")),(0,l.kt)("p",null,"Result:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"Received exception from server (version 21.4.1):\nCode: 60. DB::Exception: Received from localhost:9000. DB::Exception: Table default.test does not exist.\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"See Also")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"/en/reference/sql-reference/statements/create/view#materialized"},"Materialized View")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"/en/reference/sql-reference/dictionaries/"},"Dictionaries"))))}d.isMDXComponent=!0}}]);