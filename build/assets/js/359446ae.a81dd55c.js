"use strict";(self.webpackChunkclickhouse=self.webpackChunkclickhouse||[]).push([[33378],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return h}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),o=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=o(e.components);return a.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=o(n),h=r,f=d["".concat(c,".").concat(h)]||d[h]||p[h]||i;return n?a.createElement(f,l(l({ref:t},u),{},{components:n})):a.createElement(f,l({ref:t},u))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,l[1]=s;for(var o=2;o<i;o++)l[o]=n[o];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},21382:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return c},default:function(){return h},frontMatter:function(){return s},metadata:function(){return o},toc:function(){return p}});var a=n(87462),r=n(63366),i=(n(67294),n(3905)),l=["components"],s={sidebar_position:40,sidebar_label:"ATTACH"},c="ATTACH Statement",o={unversionedId:"en/reference/sql-reference/statements/attach",id:"en/reference/sql-reference/statements/attach",title:"ATTACH Statement",description:"attach}",source:"@site/docs/en/reference/sql-reference/statements/attach.md",sourceDirName:"en/reference/sql-reference/statements",slug:"/en/reference/sql-reference/statements/attach",permalink:"/en/reference/sql-reference/statements/attach",editUrl:"https://github.com/ClickHouse/ClickHouse/tree/master/docs/en/reference/sql-reference/statements/attach.md",tags:[],version:"current",sidebarPosition:40,frontMatter:{sidebar_position:40,sidebar_label:"ATTACH"},sidebar:"english",previous:{title:"REVOKE",permalink:"/en/reference/sql-reference/statements/revoke"},next:{title:"CHECK",permalink:"/en/reference/sql-reference/statements/check-table"}},u={},p=[{value:"Attach Existing Table",id:"attach-existing-table",level:2},{value:"Create New Table And Attach Data",id:"create-new-table-and-attach-data",level:2},{value:"With Specified Path to Table Data",id:"attach-with-specified-path",level:3},{value:"With Specified Table UUID",id:"attach-with-specified-uuid",level:3},{value:"Attach Existing Dictionary",id:"attach-existing-dictionary",level:2}],d={toc:p};function h(e){var t=e.components,n=(0,r.Z)(e,l);return(0,i.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"attach"},"ATTACH Statement"),(0,i.kt)("p",null,"Attaches a table or a dictionary, for example, when moving a database to another server."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Syntax")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"},"ATTACH TABLE|DICTIONARY [IF NOT EXISTS] [db.]name [ON CLUSTER cluster] ...\n")),(0,i.kt)("p",null,"The query does not create data on the disk, but assumes that data is already in the appropriate places, and just adds information about the table or the dictionary to the server. After executing the ",(0,i.kt)("inlineCode",{parentName:"p"},"ATTACH")," query, the server will know about the existence of the table or the dictionary."),(0,i.kt)("p",null,"If a table was previously detached (",(0,i.kt)("a",{parentName:"p",href:"/en/reference/sql-reference/statements/detach"},"DETACH")," query), meaning that its structure is known, you can use shorthand without defining the structure."),(0,i.kt)("h2",{id:"attach-existing-table"},"Attach Existing Table"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Syntax")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"},"ATTACH TABLE [IF NOT EXISTS] [db.]name [ON CLUSTER cluster]\n")),(0,i.kt)("p",null,"This query is used when starting the server. The server stores table metadata as files with ",(0,i.kt)("inlineCode",{parentName:"p"},"ATTACH")," queries, which it simply runs at launch (with the exception of some system tables, which are explicitly created on the server)."),(0,i.kt)("p",null,"If the table was detached permanently, it won't be reattached at the server start, so you need to use ",(0,i.kt)("inlineCode",{parentName:"p"},"ATTACH")," query explicitly."),(0,i.kt)("h2",{id:"create-new-table-and-attach-data"},"Create New Table And Attach Data"),(0,i.kt)("h3",{id:"attach-with-specified-path"},"With Specified Path to Table Data"),(0,i.kt)("p",null,"The query creates a new table with provided structure and attaches table data from the provided directory in ",(0,i.kt)("inlineCode",{parentName:"p"},"user_files"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Syntax")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"},"ATTACH TABLE name FROM 'path/to/data/' (col1 Type1, ...)\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example")),(0,i.kt)("p",null,"Query:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"},"DROP TABLE IF EXISTS test;\nINSERT INTO TABLE FUNCTION file('01188_attach/test/data.TSV', 'TSV', 's String, n UInt8') VALUES ('test', 42);\nATTACH TABLE test FROM '01188_attach/test' (s String, n UInt8) ENGINE = File(TSV);\nSELECT * FROM test;\n")),(0,i.kt)("p",null,"Result:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"},"\u250c\u2500s\u2500\u2500\u2500\u2500\u252c\u2500\u2500n\u2500\u2510\n\u2502 test \u2502 42 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2518\n")),(0,i.kt)("h3",{id:"attach-with-specified-uuid"},"With Specified Table UUID"),(0,i.kt)("p",null,"This query creates a new table with provided structure and attaches data from the table with the specified UUID.\nIt is supported by the ",(0,i.kt)("a",{parentName:"p",href:"/en/reference/engines/database-engines/atomic"},"Atomic")," database engine."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Syntax")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"},"ATTACH TABLE name UUID '<uuid>' (col1 Type1, ...)\n")),(0,i.kt)("h2",{id:"attach-existing-dictionary"},"Attach Existing Dictionary"),(0,i.kt)("p",null,"Attaches a previously detached dictionary."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Syntax")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"},"ATTACH DICTIONARY [IF NOT EXISTS] [db.]name [ON CLUSTER cluster]\n")))}h.isMDXComponent=!0}}]);